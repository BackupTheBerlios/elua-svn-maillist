<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Elua-svn] r610 - in branches/eagle_mmc: . doc doc/eluadoc doc/en	doc/images doc/pt inc romfs src src/lua src/modules	src/platform/lm3s src/platform/lpc24xx src/platform/stm32 test
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-svn/2009-December/index.html" >
   <LINK REL="made" HREF="mailto:elua-svn%40lists.berlios.de?Subject=Re%3A%20%5BElua-svn%5D%20r610%20-%20in%20branches/eagle_mmc%3A%20.%20doc%20doc/eluadoc%20doc/en%0A%09doc/images%20doc/pt%20inc%20romfs%20src%20src/lua%20src/modules%0A%09src/platform/lm3s%20src/platform/lpc24xx%20src/platform/stm32%20test&In-Reply-To=%3C200912240045.nBO0jc00003446%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000565.html">
   <LINK REL="Next"  HREF="000567.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Elua-svn] r610 - in branches/eagle_mmc: . doc doc/eluadoc doc/en	doc/images doc/pt inc romfs src src/lua src/modules	src/platform/lm3s src/platform/lpc24xx src/platform/stm32 test</H1>
    <B>jbsnyder at BerliOS</B> 
    <A HREF="mailto:elua-svn%40lists.berlios.de?Subject=Re%3A%20%5BElua-svn%5D%20r610%20-%20in%20branches/eagle_mmc%3A%20.%20doc%20doc/eluadoc%20doc/en%0A%09doc/images%20doc/pt%20inc%20romfs%20src%20src/lua%20src/modules%0A%09src/platform/lm3s%20src/platform/lpc24xx%20src/platform/stm32%20test&In-Reply-To=%3C200912240045.nBO0jc00003446%40sheep.berlios.de%3E"
       TITLE="[Elua-svn] r610 - in branches/eagle_mmc: . doc doc/eluadoc doc/en	doc/images doc/pt inc romfs src src/lua src/modules	src/platform/lm3s src/platform/lpc24xx src/platform/stm32 test">jbsnyder at mail.berlios.de
       </A><BR>
    <I>Thu Dec 24 01:45:38 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000565.html">[Elua-svn] r609 - branches/eagle_mmc/src/platform/lm3s
</A></li>
        <LI>Next message: <A HREF="000567.html">[Elua-svn] r611 - in branches/pre0.7: . inc romfs src src/fatfs	src/lua src/platform/lm3s src/platform/stm32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#566">[ date ]</a>
              <a href="thread.html#566">[ thread ]</a>
              <a href="subject.html#566">[ subject ]</a>
              <a href="author.html#566">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: jbsnyder
Date: 2009-12-24 01:45:27 +0100 (Thu, 24 Dec 2009)
New Revision: 610

Added:
   branches/eagle_mmc/doc/README.TXT
   branches/eagle_mmc/doc/eluadoc/refman_gen_can.lua
   branches/eagle_mmc/doc/eluadoc/refman_gen_rpc.lua
   branches/eagle_mmc/doc/en/building_unix.html
   branches/eagle_mmc/doc/en/building_win.html
   branches/eagle_mmc/doc/images/eLua_16x16.ico
   branches/eagle_mmc/luasrcdiet.lua
   branches/eagle_mmc/romfs/snake.lua
   branches/eagle_mmc/rpc-lua.py
Removed:
   branches/eagle_mmc/remote-lua.py
Modified:
   branches/eagle_mmc/SConstruct
   branches/eagle_mmc/cross-lua.py
   branches/eagle_mmc/doc/buildall.lua
   branches/eagle_mmc/doc/docdata.lua
   branches/eagle_mmc/doc/eluadoc.lua
   branches/eagle_mmc/doc/eluadoc/refman_gen_cpu.lua
   branches/eagle_mmc/doc/en/arch_overview.html
   branches/eagle_mmc/doc/en/arch_romfs.html
   branches/eagle_mmc/doc/en/building.html
   branches/eagle_mmc/doc/en/comunity.html
   branches/eagle_mmc/doc/en/dl_old.html
   branches/eagle_mmc/doc/en/downloads.html
   branches/eagle_mmc/doc/en/examples.html
   branches/eagle_mmc/doc/en/faq.html
   branches/eagle_mmc/doc/en/news.html
   branches/eagle_mmc/doc/en/status.html
   branches/eagle_mmc/doc/en/using.html
   branches/eagle_mmc/doc/en/versionhistory.html
   branches/eagle_mmc/doc/images/eLuaLogo.svg
   branches/eagle_mmc/doc/pt/comunity.html
   branches/eagle_mmc/doc/pt/downloads.html
   branches/eagle_mmc/doc/pt/examples.html
   branches/eagle_mmc/doc/pt/news.html
   branches/eagle_mmc/doc/pt/status.html
   branches/eagle_mmc/inc/luarpc_rpc.h
   branches/eagle_mmc/inc/platform.h
   branches/eagle_mmc/inc/version.h
   branches/eagle_mmc/mkfs.py
   branches/eagle_mmc/romfs/EK-LM3S6965.lua
   branches/eagle_mmc/romfs/EK-LM3S8962.lua
   branches/eagle_mmc/romfs/pong.lua
   branches/eagle_mmc/src/lua/linit.c
   branches/eagle_mmc/src/lua/lua.c
   branches/eagle_mmc/src/lua/luaconf.h
   branches/eagle_mmc/src/luarpc_elua_uart.c
   branches/eagle_mmc/src/luarpc_posix_serial.c
   branches/eagle_mmc/src/main.c
   branches/eagle_mmc/src/modules/can.c
   branches/eagle_mmc/src/modules/luarpc.c
   branches/eagle_mmc/src/platform/lm3s/platform_conf.h
   branches/eagle_mmc/src/platform/lpc24xx/platform_conf.h
   branches/eagle_mmc/src/platform/stm32/platform.c
   branches/eagle_mmc/src/platform/stm32/platform_conf.h
   branches/eagle_mmc/src/platform/stm32/startup_stm32f10x_hd.s
   branches/eagle_mmc/src/platform/stm32/stm32f10x_it.c
   branches/eagle_mmc/src/shell.c
   branches/eagle_mmc/test/test-rpc.lua
Log:
Merge branch 'pre0.7' into mmc branch.

Modified: branches/eagle_mmc/SConstruct
===================================================================
--- branches/eagle_mmc/SConstruct	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/SConstruct	2009-12-24 00:45:27 UTC (rev 610)
@@ -6,6 +6,7 @@
 toolchain = ARGUMENTS.get( 'toolchain', '')
 optram = int( ARGUMENTS.get( 'optram', '1' ) )
 boot = ARGUMENTS.get( 'boot', '').lower()
+romfsmode = ARGUMENTS.get( 'romfs', 'verbatim' ).lower()
 
 # Helper: &quot;normalize&quot; a name to make it a suitable C macro name
 def cnorm( name ):
@@ -20,35 +21,50 @@
     'link' : 'arm-elf-ld', 
     'asm' : 'arm-elf-as', 
     'bin' : 'arm-elf-objcopy', 
-    'size' : 'arm-elf-size' 
+    'size' : 'arm-elf-size',
+    'cross_cpumode' : 'little',
+    'cross_lua' : 'float_arm 64',
+    'cross_lualong' : 'int 32'
   },
   'arm-eabi-gcc' : {
     'compile' : 'arm-eabi-gcc',
     'link' : 'arm-eabi-ld',
     'asm' : 'arm-eabi-as',
     'bin' : 'arm-eabi-objcopy',
-    'size' : 'arm-eabi-size'
+    'size' : 'arm-eabi-size',
+    'cross_cpumode' : 'little',
+    'cross_lua' : 'float 64',
+    'cross_lualong' : 'int 32'
   },
   'codesourcery' : { 
     'compile' : 'arm-none-eabi-gcc', 
     'link' : 'arm-none-eabi-ld', 
     'asm' : 'arm-none-eabi-as', 
     'bin' : 'arm-none-eabi-objcopy', 
-    'size' : 'arm-none-eabi-size' 
+    'size' : 'arm-none-eabi-size',
+    'cross_cpumode' : 'little',
+    'cross_lua' : 'float 64',
+    'cross_lualong' : 'int 32'
   },
   'avr32-gcc' : { 
     'compile' : 'avr32-gcc', 
     'link' : 'avr32-ld', 
     'asm' : 'avr32-as', 
     'bin' : 'avr32-objcopy', 
-    'size' : 'avr32-size' 
+    'size' : 'avr32-size',
+    'cross_cpumode' : 'big',
+    'cross_lua' : 'float 64',
+    'cross_lualong' : 'int 32'
   },
   'i686-gcc' : { 
     'compile' : 'i686-elf-gcc', 
     'link' : 'i686-elf-ld', 
     'asm' : 'nasm', 
     'bin' : 'i686-elf-objcopy', 
-    'size' : 'i686-elf-size' 
+    'size' : 'i686-elf-size',
+    'cross_cpumode' : 'little',
+    'cross_lua' : 'float 64',
+    'cross_lualong' : 'int 32'
   }
 }
 
@@ -110,7 +126,8 @@
           'life' : [ 'life.lua' ],
           'logo' : ['logo.lua', 'logo.bin' ],
           'spaceship' : [ 'spaceship.lua' ],
-          'tetrives' : [ 'tetrives.lua' ]
+          'tetrives' : [ 'tetrives.lua' ],
+          'snake' : [ 'snake.lua' ]
         }
 
 # List of board/romfs data combinations
@@ -203,24 +220,42 @@
 # Check boot mode selection
 if boot == '':
   boot = 'standard'
-elif boot not in ['standard', 'luaremote']:
+elif boot not in ['standard', 'luarpc']:
   print &quot;Unknown boot mode: &quot;, boot
-  print &quot;Boot mode can be either 'standard' or 'luaremote'&quot;
+  print &quot;Boot mode can be either 'standard' or 'luarpc'&quot;
   sys.exit( -1 );
 
+# Check romfs mode
+if romfsmode not in ['verbatim', 'compile', 'compress']:
+  print &quot;Unknown romfs mode: &quot;, romfsmode
+  print &quot;romfs mode can be either 'verbatin', 'compile' or 'compress'&quot;
+  sys.exit( -1 )
 
+# Build the compilation command now
+compcmd = ''
+if romfsmode == 'compile':
+  # First check for luac.cross in the current directory
+  if not os.path.isfile( &quot;luac.cross&quot; ):
+    print &quot;The eLua cross compiler was not found.&quot;
+    print &quot;Build it by running 'scons -f cross-lua.py'&quot;
+    sys.exit( -1 )
+  compcmd = os.path.join( os.getcwd(), 'luac.cross -ccn %s -cce %s -o %%s -s %%s' % ( toolset[ 'cross_%s' % target ], toolset[ 'cross_cpumode' ] ) )
+elif romfsmode == 'compress':
+  compcmd = 'lua luasrcdiet.lua --quiet --maximum --opt-comments --opt-whitespace --opt-emptylines --opt-eols --opt-strings --opt-numbers --opt-locals -o %s %s'
+
 # User report
 if not GetOption( 'clean' ):
   print
   print &quot;*********************************&quot;
   print &quot;Compiling eLua ...&quot;
-  print &quot;CPU:         &quot;, cputype
-  print &quot;Board:       &quot;, boardname
-  print &quot;Platform:    &quot;, platform
-  print &quot;Allocator:   &quot;, allocator
-  print &quot;Boot Mode:   &quot;, boot
-  print &quot;Target:      &quot;, target == 'lua' and 'fplua' or 'target'
-  print &quot;Toolchain:   &quot;, toolchain
+  print &quot;CPU:            &quot;, cputype
+  print &quot;Board:          &quot;, boardname
+  print &quot;Platform:       &quot;, platform
+  print &quot;Allocator:      &quot;, allocator
+  print &quot;Boot Mode:      &quot;, boot
+  print &quot;Target:         &quot;, target == 'lua' and 'fplua' or 'target'
+  print &quot;Toolchain:      &quot;, toolchain
+  print &quot;ROMFS mode:     &quot;, romfsmode
   print &quot;*********************************&quot;
   print
 
@@ -233,8 +268,8 @@
 elif allocator == 'simple':
   cdefs = cdefs + &quot; -DUSE_SIMPLE_ALLOCATOR&quot;
 
-if boot == 'luaremote':
-  cdefs += &quot; -DELUA_BOOT_REMOTE&quot;
+if boot == 'luarpc':
+  cdefs += &quot; -DELUA_BOOT_RPC&quot;
 
 # Special macro definitions for the SYM target
 if platform == 'sim':
@@ -284,7 +319,6 @@
 #opt += &quot; -ffreestanding&quot;
 #opt += &quot; -fconserve-stack&quot; # conserve stack at potential speed cost, &gt;=GCC4.4
 
-
 # Toolset data (filled by each platform in part)
 tools = {}
 
@@ -301,14 +335,14 @@
   flist = []
   for sample in file_list[ boardname ]:
     flist += romfs[ sample ]
-# Automatically includes the autorun.lua file in the ROMFS
+  # Automatically includes the autorun.lua file in the ROMFS
   if os.path.isfile( os.path.join( romdir, 'autorun.lua' ) ):
     flist += [ 'autorun.lua' ]
-# Automatically includes platform specific Lua module 
+  # Automatically includes platform specific Lua module 
   if os.path.isfile( os.path.join( romdir, boardname + '.lua' ) ):
     flist += [boardname + '.lua']
   import mkfs
-  mkfs.mkfs( romdir, &quot;romfiles&quot;, flist )
+  mkfs.mkfs( romdir, &quot;romfiles&quot;, flist, romfsmode, compcmd )
   print
   if os.path.exists( &quot;inc/romfiles.h&quot; ): 
     os.remove( &quot;inc/romfiles.h&quot; )

Modified: branches/eagle_mmc/cross-lua.py
===================================================================
--- branches/eagle_mmc/cross-lua.py	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/cross-lua.py	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,6 +1,6 @@
 import os, sys 
 
-output = 'luac'
+output = 'luac.cross'
 cdefs = '-DLUA_CROSS_COMPILER'
 
 # Lua source files and include path
@@ -11,7 +11,7 @@
 local_include = &quot;-Isrc/lua&quot;
 
 # Compiler/linker options
-cccom = &quot;gcc -g %s -Wall %s -c $SOURCE -o $TARGET&quot; % ( local_include, cdefs )
+cccom = &quot;gcc -O2 %s -Wall %s -c $SOURCE -o $TARGET&quot; % ( local_include, cdefs )
 linkcom = &quot;gcc -o $TARGET $SOURCES -lm&quot;
 
 # Env for building the program

Added: branches/eagle_mmc/doc/README.TXT
===================================================================
--- branches/eagle_mmc/doc/README.TXT	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/README.TXT	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,11 @@
+The eLua doc is automatically generated by a Lua script contained here in the distro.
+The html doc generated by this script is the exactly the same shown in our online site (www.eluaproject.net)
+
+To generate the doc:
+- make sure you have Lua installed in your machine (www.lua.org)
+- go to the /doc directory of this distro (you're probably here already :)
+- run the script with
+  $ lua buildall.lua
+- the doc/site structure is generated in a new sub-folder called dist, where you can go and open any .html document. The left-side menu is actually part of the global layout and is included in every page of the doc/site.
+- enjoy eLua !
+

Modified: branches/eagle_mmc/doc/buildall.lua
===================================================================
--- branches/eagle_mmc/doc/buildall.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/buildall.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -85,7 +85,7 @@
 -- Returns the english name if the name for the specified language can't be found
 -- If the link field doesn't exists, the name is returned instead
 local function get_menu_title( menuitem, lang )
-  return get_menu_field( menuitem, lang, title_idx ) or get_menu_field( menuitem, lang, name_idx )
+  return &quot;eLua - &quot; .. ( get_menu_field( menuitem, lang, title_idx ) or  get_menu_field( menuitem, lang, name_idx ) )
 end
 
 -- Set &quot;print&quot; to print indented (with 2 spaces)
@@ -382,8 +382,12 @@
 &lt;head&gt;
 &lt;title&gt;%s&lt;/title&gt;
 &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;
+&lt;meta name=&quot;subject&quot; content=&quot;eLua - Lua for the embedded world&quot; /&gt;
+&lt;meta name=&quot;Description&quot; content=&quot;eLua stands for Embedded Lua and the project aims to offer the full set of features of the Lua Programming Language to the embedded world.&quot; /&gt;
+&lt;meta name=&quot;Keywords&quot; content=&quot;eLua, lua, embedded, ARM, Cortex-M3, AVR32, ARM7TDMI, microcontroller, mcu, programming, electronics, tools, development&quot; /&gt;
 &lt;link href=&quot;menu.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
 &lt;link href=&quot;style1.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
+&lt;link REL=&quot;SHORTCUT ICON&quot; HREF=&quot;./images/eLua_16x16.ico&quot;&gt;
 &lt;script type=&quot;text/javascript&quot;&gt;&lt;!--//--&gt;&lt;![CDATA[//&gt;&lt;!--
 
 sfHover = function() {
@@ -409,9 +413,18 @@
   header = header .. menuitems .. '&lt;div id=&quot;content&quot;&gt;\n'
   local footer = [[
 &lt;/div&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+var gaJsHost = ((&quot;https:&quot; == document.location.protocol) ? &quot;<A HREF="https://ssl.">https://ssl.</A>&quot; : &quot;<A HREF="http://www.">http://www.</A>&quot;);
+document.write(unescape(&quot;%%3Cscript src='&quot; + gaJsHost + &quot;google-analytics.com/ga.js' type='text/javascript'%%3E%%3C/script%%3E&quot;));
+&lt;/script&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+try {
+var pageTracker = _gat._getTracker(&quot;UA-11834941-1&quot;);
+pageTracker._trackPageview();
+} catch(err) {}&lt;/script&gt;
 &lt;/body&gt;
 &lt;/html&gt;
-]] 
+]]
   orig = orig:gsub( &quot;%$%$HEADER%$%$&quot;, header )
   orig = orig:gsub( &quot;%$%$FOOTER%$%$&quot;, footer )
   return orig

Modified: branches/eagle_mmc/doc/docdata.lua
===================================================================
--- branches/eagle_mmc/doc/docdata.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/docdata.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -101,16 +101,22 @@
   },
   { { &quot;Help&quot;, &quot;Ajuda&quot; }, &quot;using.html&quot;, 
     {
-      { { &quot;Building eLua&quot;, &quot;Build de eLua&quot; }, &quot;building.html&quot; },
-      { { &quot;Using&quot;, &quot;Usando eLua&quot; }, &quot;using.html&quot;, 
+      { { &quot;Using eLua&quot;, &quot;Usando eLua&quot; }, &quot;using.html&quot;, 
         {
           { { &quot;Over UART&quot;, &quot;Console via UART&quot; }, &quot;using.html#uart&quot; },
           { { &quot;Over TCP/IP&quot;, &quot;Console via TCP/IP&quot; }, &quot;using.html#tcpip&quot; },
           { { &quot;On PC&quot;, &quot;Num PC&quot; }, &quot;using.html#pc&quot; },
           { { &quot;The shell&quot;, &quot;O Shell&quot; }, &quot;using.html#shell&quot; },
           { &quot;Cross-compiling&quot;, &quot;using.html#cross&quot; },
+          { &quot;LuaRPC&quot;, &quot;using.html#rpc&quot; },
         },
       },
+      { { &quot;Building eLua&quot;, &quot;Build de eLua&quot; }, &quot;building.html&quot;,
+        {
+          { &quot;Building eLua in Linux&quot;, &quot;building_unix.html&quot; },
+          { &quot;Building eLua in Windows&quot;, &quot;building_win.html&quot; },
+        },  
+      },
       { { &quot;Code examples&quot;, &quot;Exemplos de C&#243;digo&quot; }, &quot;examples.html&quot; },
       { { &quot;FAQ&quot;, &quot;Perguntas Frequentes (FAQ)&quot; }, &quot;faq.html&quot; },
       { { &quot;Tutorials&quot;, &quot;Tutoriais&quot; }, &quot;tutorials.html&quot;,

Added: branches/eagle_mmc/doc/eluadoc/refman_gen_can.lua
===================================================================
--- branches/eagle_mmc/doc/eluadoc/refman_gen_can.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/eluadoc/refman_gen_can.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,70 @@
+-- eLua reference manual - CAN module
+
+data_en = 
+{
+
+  -- Title
+  title = &quot;eLua reference manual - CAN module&quot;,
+
+  -- Menu name
+  menu_name = &quot;can&quot;,
+
+  -- Overview
+  overview = [[This module contains functions for accessing the CAN interfaces of the eLua CPU]],
+  
+  -- Structures
+  structures =
+  {
+    { text = [[// eLua CAN ID types
+enum
+{
+  ELUA_CAN_ID_STD = 0,      // exported as $net.ID_STD$
+  ELUA_CAN_ID_EXT,          // exported as $can.ID_EXT$
+};]],
+      name = &quot;CAN ID types&quot;,
+      desc = &quot;These are the CAN identifier types supported by eLua. Standard identifiers are 11 bits in length, extended identifiers are 29 bits.&quot;,
+    }
+  },
+
+  -- Functions
+  funcs = 
+  {
+    { sig = &quot;clock = #can.setup#( id, clock )&quot;,
+      desc = &quot;Setup the CAN interface&quot;,
+      args = 
+      {
+        &quot;$id$ - the ID of the CAN interface.&quot;,
+        &quot;$clock$ - the clock of the CAN interface.&quot;,
+      },
+      ret = &quot;The actual clock set on the CAN interface. Depending on the hardware, this might have a different value than the $clock$ parameter.&quot;
+    },
+
+    { sig = &quot;#can.send#( id, canid, canidtype, message )&quot;,
+      desc = &quot;Send message over the CAN bus.&quot;,
+      args = 
+      {
+        &quot;$id$ - the ID of the CAN interface.&quot;,
+        &quot;$canid$ - CAN identifier number.&quot;,
+        &quot;$canidtype$ - identifier type as defined @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">can_id_types at here</A>@.&quot;,
+        &quot;$message$ - message in string format, 8 or fewer bytes.&quot;
+      },
+    },
+
+    { sig = &quot;canid, canidtype, message = #can.recv#( id )&quot;,
+      desc = &quot;Receive CAN bus message.&quot;,
+      args =
+      {
+        &quot;$id$ - the ID of the CAN interface.&quot;,
+      },
+      ret =
+      {
+        &quot;$canid$ - CAN identifier number.&quot;,
+        &quot;$canidtype$ - identifier type as defined @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">can_id_types at here</A>@.&quot;,
+        &quot;$message$ - message in string format, 8 or fewer bytes.&quot;
+      }
+    }
+   
+  },
+}
+
+data_pt = data_en

Modified: branches/eagle_mmc/doc/eluadoc/refman_gen_cpu.lua
===================================================================
--- branches/eagle_mmc/doc/eluadoc/refman_gen_cpu.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/eluadoc/refman_gen_cpu.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -12,7 +12,7 @@
   -- Overview
   overview = [[This module deals with low-level access to CPU (and related modules) functionality, such as reading and writing memory, or 
   enabling and disabling interrupts. It also offers access to platform specific CPU-related constants using a special macro defined in the
-  platform's $platform_conf.h$ file, as exaplained @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">cpu_constants at here</A>@.]],
+  platform's $platform_conf.h$ file, as explained @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">cpu_constants at here</A>@.]],
 
   -- Data structures, constants and types
   structures = 

Added: branches/eagle_mmc/doc/eluadoc/refman_gen_rpc.lua
===================================================================
--- branches/eagle_mmc/doc/eluadoc/refman_gen_rpc.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/eluadoc/refman_gen_rpc.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,114 @@
+-- eLua reference manual - RPC module
+
+data_en = 
+{
+
+  -- Title
+  title = &quot;eLua reference manual - LuaRPC module&quot;,
+
+  -- Menu name
+  menu_name = &quot;rpc&quot;,
+
+  -- Overview
+  overview = [[LuaRPC allows one to remotely control a lua state running on another machine or microcontroller.&lt;/p&gt;
+  &lt;p&gt;It works by providing a $handle$ to the client session which allows control over remote state. Functions can
+  be called in the remote environment and variables can be manipulated by treating the $handle$ (representing 
+  the remote global table) as if it were a local table.&lt;/p&gt;
+  &lt;p&gt;In order to open a connection, it is necessary to specify the interface through wich the connection is made.
+  Currently the connections are limited to serial ports on the desktop side, and uart devices on the eLua side.
+  For a number of the connections below, a parameter labeled $transport_identifiers$ is used to specify the port
+  to be used in a platform specific manner.:
+  &lt;ul&gt;
+    &lt;li&gt;eLua: $transport_identifiers$ = $uart_id$, $timer_id$
+      &lt;ul&gt;
+        &lt;li&gt;$uart_id$ - the ID of the serial port (as in the @<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">refman_gen_uart.html at uart</A> module@). This uart must already be configured using $uart.setup$ before being used in this module.&lt;/li&gt;
+        &lt;li&gt;$timer_id$ - the ID of the timer for send/receive timeouts (as with send/receive functions in the @<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">refman_gen_uart.html at uart</A> module@)&lt;/li&gt;
+      &lt;/ul&gt;
+    &lt;/li&gt;
+    &lt;li&gt;Linux/Mac OS X luarpc: $transport_identifiers$ = $uart_path$
+      &lt;ul&gt;
+        &lt;li&gt;$uart_path$ - the path to the serial port to use (e.g.: &quot;/dev/ttyS0&quot;)&lt;/li&gt;
+      &lt;/ul&gt;
+    &lt;/li&gt;
+  &lt;/ul&gt;
+  &lt;/p&gt;
+
+  &lt;p&gt;&lt;span class=&quot;warning&quot;&gt;NOTE&lt;/span&gt;: This module is considered experimental. It currently works over a 
+  serial port with eLua targets and on desktop systems implementing POSIX serial communications (Linux, Mac OS X, etc).
+  ]],
+
+  -- Functions
+  funcs = 
+  {
+    { sig = &quot;handle = #rpc.connect#( transport_identifiers )&quot;,
+      desc = &quot;Initiate connection from client to server.&quot;,
+      args = 
+      {
+        &quot;$transport_identifiers$ - platform-specific serial port identification (see @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">overview at overview</A>@)&quot;
+      },
+      ret = [[$handle$ - handle used to interact with the remote Lua state.  Usage styles are as follows:&lt;/p&gt;
+    &lt;table style=&quot;text-align: left; margin-left: 2em;&quot;&gt;
+    &lt;tbody&gt;
+    &lt;tr&gt;
+      &lt;th style=&quot;text-align: left; width: 20em;&quot;&gt;Usage Style&lt;/th&gt;
+      &lt;th style=&quot;text-align: left;&quot;&gt;Meaning&lt;/th&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;$handle$.$remote_var$ = $local_var$&lt;/td&gt;
+      &lt;td&gt;send contents of $local_var$ to remote host and assign to $remote_var$ (registered on global table). This also works where the destination variable is nested within tables.&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;$local_var$ = $handle$.$remote_var$:get()&lt;/td&gt;
+      &lt;td&gt;get contents of $remote_var$ from remote global table and assign to $local_var$.&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;$val1$, $val2$, $valn$ = $handle$.$remote_func$()&lt;/td&gt;
+      &lt;td&gt;call $remote_func$ on the server side, and return values to local state&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+      &lt;td&gt;$helper$ = $handle$.$remote_var$&lt;/td&gt;
+      &lt;td&gt;create a $helper$ which points to $remote_var$, and can be used as shorthand later (e.g.: $helper$:get() would get the contents of the remote variable. If $remote_var$ were a table with functions on it: $helper$.$funcname$() would call $funcname$, on table $remote_var$ on the server, and return any results.)&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;/tbody&gt;
+    &lt;/table&gt;
+    &lt;p&gt;]]
+    },
+
+    { sig = &quot;#rpc.close#( handle )&quot;,
+      desc = &quot;Close an active RPC session.&quot;,
+      args = &quot;$handle$ - handle associated with the connection.&quot;,
+    },
+
+    { sig = &quot;#rpc.server#( transport_identifiers )&quot;,
+      desc = &quot;Start a blocking/captive RPC server, which will wait for incoming connections.&quot;,
+      args = &quot;$transport_identifiers$ - platform-specific serial port identification (see @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">overview at overview</A>@)&quot;,
+    },
+
+    { sig = &quot;#rpc.on_error#( err_handler )&quot;,
+      desc = &quot;Define client-side error handler to deal with server-side error responses.&quot;,
+      args = &quot;$err_handler$ - function to handle error messages. string error messages may be passed to this function.&quot;,
+    },
+
+    { sig = &quot;server_handle = #rpc.listen#( transport_identifiers )&quot;,
+      desc = &quot;Open a listener on transport and await incoming connections.&quot;,
+      args = &quot;$transport_identifiers$ - platform-specific serial port identification (see @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">overview at overview</A>@)&quot;,
+      ret = &quot;server handle to use with @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">rpc.peek at rpc.peek</A>@ and @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">rpc.dispatch at rpc.dispatch</A>@&quot;
+    },
+    
+    { sig = &quot;data_available = #rpc.peek#( server_handle )&quot;,
+      desc = &quot;Check if data are available to read on transport.&quot;,
+      args = &quot;$server_handle$ - handle to refer to server session, created by @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">rpc.listen at rpc.listen</A>@&quot;,
+      ret = &quot;$data_available$ - 1 if data are available, 0 if data are unavailable&quot;
+    },
+    
+    { sig = &quot;#rpc.dispatch#( server_handle )&quot;,
+      desc = &quot;Read transport and handle incoming command.&quot;,
+      args = &quot;$server_handle$ - handle to refer to server session, created by @#<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">rpc.listen at rpc.listen</A>@&quot;,
+    },
+   
+  },
+
+}
+
+data_pt = data_en
+

Modified: branches/eagle_mmc/doc/eluadoc.lua
===================================================================
--- branches/eagle_mmc/doc/eluadoc.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/eluadoc.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -15,7 +15,7 @@
 local components = 
 { 
   arch_platform = { &quot;ll&quot;, &quot;pio&quot;, &quot;spi&quot;, &quot;uart&quot;, &quot;timers&quot;, &quot;pwm&quot;, &quot;cpu&quot;, &quot;eth&quot;, &quot;adc&quot; },
-  refman_gen = { &quot;bit&quot;, &quot;pd&quot;, &quot;cpu&quot;, &quot;pack&quot;, &quot;adc&quot;, &quot;term&quot;, &quot;pio&quot;, &quot;uart&quot;, &quot;spi&quot;, &quot;tmr&quot;, &quot;pwm&quot;, &quot;net&quot; },
+  refman_gen = { &quot;bit&quot;, &quot;pd&quot;, &quot;cpu&quot;, &quot;pack&quot;, &quot;adc&quot;, &quot;term&quot;, &quot;pio&quot;, &quot;uart&quot;, &quot;spi&quot;, &quot;tmr&quot;, &quot;pwm&quot;, &quot;net&quot;, &quot;can&quot;, &quot;rpc&quot; },
   refman_ps_lm3s = { &quot;disp&quot; }
 }
 

Modified: branches/eagle_mmc/doc/en/arch_overview.html
===================================================================
--- branches/eagle_mmc/doc/en/arch_overview.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/arch_overview.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -70,7 +70,7 @@
   &lt;a href=&quot;building.html&quot;&gt;here&lt;/a&gt;, the user must have full control over what's getting built into this &lt;b&gt;eLua&lt;/b&gt; image. If you don't need the SPI
   module, for example, you don't need to implement its platform interface.&lt;/li&gt;
   &lt;li&gt;a part of the platform interface is implemented (at least partially) in a file that is common for all the platforms (&lt;i&gt;src/common.c&lt;/i&gt;). It
-  eases the implmentation of some modules (such as the timer module) and also implements common features that are tied to the platform interface,
+  eases the implementation of some modules (such as the timer module) and also implements common features that are tied to the platform interface,
   but have a common behaviour on all platforms (for example virtual timers, see &lt;a href=&quot;arch_platform_timers.html#virtual_timers&quot;&gt;here&lt;/a&gt; for details). You probably won't need to modify 
   if you're writing platform specific code, but it's best to keep in mind what it does.&lt;/li&gt;
 &lt;/ul&gt;
@@ -202,7 +202,8 @@
   &lt;li&gt;&lt;b&gt;main&lt;/b&gt; then initializes the rest of the system: the ROM file system, XMODEM, and term.&lt;/li&gt;
   &lt;li&gt;if &lt;b&gt;/rom/autorun.lua&lt;/b&gt; (which is a file called &lt;b&gt;autorun.lua&lt;/b&gt; in the &lt;a href=&quot;arch_romfs.html&quot;&gt;ROM file system&lt;/a&gt;) is found, it is
   executed. If it returns after execution, or if it isn't found, the boot process continues with the next step.&lt;/li&gt;
-  &lt;li&gt;if the &lt;a href=&quot;using.html#shell&quot;&gt;shell&lt;/a&gt; was compiled in the image, it is started, otherwise a standard Lua interpreter is started.&lt;/li&gt;
+  &lt;li&gt;if boot is set to 'standard' and the &lt;a href=&quot;using.html#shell&quot;&gt;shell&lt;/a&gt; was compiled in the image, it is started, in the absence of the shell, a standard Lua interpreter is started.&lt;/li&gt;
+  &lt;li&gt;if boot is set to 'luarpc' an rpc server is started.&lt;/li&gt;
 &lt;/ol&gt;
 $$FOOTER$$
 

Modified: branches/eagle_mmc/doc/en/arch_romfs.html
===================================================================
--- branches/eagle_mmc/doc/en/arch_romfs.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/arch_romfs.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -55,5 +55,21 @@
  &lt;p&gt;&lt;pre&gt;&lt;code&gt;eLua# lua /rom/bisect.lua&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
 &lt;p&gt;Or directly from Lua:&lt;/p&gt;
  &lt;p&gt;&lt;pre&gt;&lt;code&gt;&gt; dofile &quot;/rom/bisect.lua&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/p&gt;
+&lt;a name=&quot;mode&quot; /&gt;&lt;h2&gt;ROMFS modes&lt;/h2&gt;
+&lt;p&gt;Starting with version 0.7, the ROMFS can be added to the &lt;b&gt;eLua&lt;/b&gt; binary image in 3 different ways:&lt;/p&gt;
+&lt;ul&gt;
+  &lt;li&gt;&lt;b&gt;verbatim&lt;/b&gt;: this is the default option. All the files are copied to the ROMFS directly, without any processing.&lt;/li&gt;
+  &lt;li&gt;&lt;b&gt;compress&lt;/b&gt;: compress the Lua source code by using &lt;a href=&quot;<A HREF="http://luaforge.net/projects/luasrcdiet/">http://luaforge.net/projects/luasrcdiet/</A>&quot;&gt;LuaSrcDiet&lt;/a&gt; (included in &lt;b&gt;eLua&lt;/b&gt;), a program
+  that can decrease the size of a Lua source file by applying different transformations. Every
+  Lua source file (extension &lt;b&gt;.lua&lt;/b&gt;) from ROMFS is fed through LuaSrcDiet and the result is written in the &lt;b&gt;eLua&lt;/b&gt; binary image. This option can yield
+  pretty good compression, the only downside being that the compressed Lua source files aren't generally easily readable. However, this isn't really a problem in
+  most practical cases.&lt;/li&gt;
+  &lt;li&gt;&lt;b&gt;compile&lt;/b&gt;: precompile the Lua source code to bytecode. Every Lua source file (extension &lt;b&gt;.lua&lt;/b&gt;) from ROMFS is fed through the Lua cross compiler
+  (see &lt;a href=&quot;using.html#cross&quot;&gt;here&lt;/a&gt; for details on cross compilation and its benefits) and the result is written in the &lt;b&gt;eLua&lt;/b&gt; binary image. This option
+  might decrease or increase the physical size of the ROMFS image, but its real benefits are increased speed (because &lt;b&gt;eLua&lt;/b&gt; doesn't need to compile the Lua
+  code to bytecode first) and decreased RAM consumption (the Lua parser might get quite memory-hungry at times, which in turn might lead to stack overflows and very
+  hard to find bugs). &lt;/li&gt;
+&lt;/ul&gt;
+&lt;p&gt;See &lt;a href=&quot;building.html#buildoptions&quot;&gt;here&lt;/a&gt; for instructions on how to specify the ROMFS compilation mode.&lt;/p&gt;
 $$FOOTER$$
-
+ 
\ No newline at end of file

Modified: branches/eagle_mmc/doc/en/building.html
===================================================================
--- branches/eagle_mmc/doc/en/building.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/building.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,49 +1,10 @@
 $$HEADER$$
 &lt;h3&gt;Building eLua&lt;/h3&gt;
-&lt;p&gt;If you decide to build your own &lt;b&gt;eLua&lt;/b&gt;
-binary image (instead of &lt;a href=&quot;downloads.html&quot;&gt;downloading
-one&lt;/a&gt;) you need to check a few things first:
-&lt;/p&gt;
-&lt;ul&gt;
-&lt;li&gt;you're using Linux. Compiling under windows should be
-possible, however this isn't tested. We are in Ubuntu, so what
-we use is&nbsp;&quot;apt-get&quot;. If you're using a distro with a different
-package
-manager you'll need to translate the &quot;apt-get&quot; calls to your specific
-distribution.&lt;/li&gt;
-&lt;li&gt;you have a toolchain (compiler, linker, assembler and
-standard C libraries) for your target. Check &lt;a href=&quot;toolchains.html&quot;&gt;the toolchains page&lt;/a&gt; for
-toolchain instructions. Please note that even if you already have a
-compiled toolchain, the differences in the Newlib configure flags
-(mainly the --disable-newlib-supplied-syscalls flags) might prevent &lt;b&gt;eLua&lt;/b&gt;
-for building properly on your machine.&lt;/li&gt;
-&lt;li&gt;you set your platform configuration options properly. Check
-the next paragraph for instructions on how to configure your build.&lt;/li&gt;
-&lt;li&gt;Python - It should be already installed. If it's not, use
-apt-get to install it:
-&lt;pre&gt;&lt;code&gt;$ sudo apt-get install python&lt;/code&gt;&lt;/pre&gt;
-&lt;/li&gt;
-&lt;li&gt;Scons - &lt;b&gt;eLua&lt;/b&gt; uses scons instead of make
-and makefiles, because we find scons much more &quot;natural&quot; and easier to
-use than make. To install it:
-&lt;pre&gt;&lt;code&gt;$ sudo apt-get install scons&lt;/code&gt;&lt;/pre&gt;
-&lt;/li&gt;
-&lt;li&gt;your toolchain's &quot;bin&quot; directory (this is generally
-something like /usr/local/cross-arm/bin, where /usr/local/cross-arm is
-the directory in which you installed your toolchain) must be in $PATH.
-&lt;/li&gt;
-&lt;li&gt;if you're building for the i386 platform, you'll also need
-&quot;nasm&quot;:
-&lt;pre&gt;&lt;code&gt;$ sudo apt-get install nasm&lt;/code&gt;&lt;/pre&gt;
-&lt;/li&gt;
-&lt;/ul&gt;
-&lt;p&gt;For each platform, &lt;b&gt;eLua&lt;/b&gt; assumes a certain
-name for the toolchain components, as shown below.
-&lt;/p&gt;
-&lt;p&gt;If your toolchain uses different names, you have to modify the
-toolchain definition in SConstruct. See the &lt;a href=&quot;toolchains.html&quot;&gt;toolchains instructions&lt;/a&gt; for
-details.&lt;/p&gt;
-&lt;h3&gt;Configuring the build image&lt;/h3&gt;
+&lt;p&gt;If you decide to build your own &lt;b&gt;eLua&lt;/b&gt; binary image (instead of &lt;a href=&quot;downloads.html&quot;&gt;downloading
+one&lt;/a&gt;) you need to download the source code (see &lt;a href=&quot;downloads.html#source&quot;&gt;here&lt;/a&gt; for details) and follow the 
+platform specific eLua build instructions (provided for &lt;a href=&quot;build_unix.html&quot;&gt;Linux&lt;/a&gt; and &lt;a href=&quot;build_win.html&quot;&gt;Windows&lt;/a&gt;) to setup your build environment. 
+Then follow the instructions below to build your eLua binary image.&lt;/p&gt;
+&lt;a name=&quot;configuring&quot; /&gt;&lt;h3&gt;Configuring the build image&lt;/h3&gt;
 &lt;p&gt;&lt;b&gt;eLua&lt;/b&gt; has a very flexible build system that
 can be used to select the components that are going to be part of the &lt;b&gt;eLua&lt;/b&gt;
 binary image and to set the compile time (static) configuration.
@@ -68,7 +29,8 @@
 #define BUILD_DHCPC
 #define BUILD_DNS
 #define BUILD_CON_GENERIC
-#define BUILD_ADC&lt;/code&gt;&lt;/pre&gt;
+#define BUILD_ADC
+#define BUILD_RPC&lt;/code&gt;&lt;/pre&gt;
 &lt;p&gt;The components that can be configured in &lt;b&gt;eLua&lt;/b&gt; are:&lt;/p&gt;
 &lt;table class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
@@ -181,6 +143,14 @@
 &lt;a href=&quot;building.html#static&quot;&gt;Static configuration data dependencies:&lt;/a&gt; &lt;b&gt;ADC_BIT_RESOLUTION, ADC_TIMER_FIRST_ID, ADC_NUM_TIMERS, BUF_ENABLE_ADC, ADC_BUF_SIZE&lt;/b&gt;
 &lt;/td&gt;
 &lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;BUILD_RPC&lt;/td&gt;
+&lt;td&gt;Define this to build support for LuaRPC. This must be enabled to use the &lt;a href=&quot;refman_gen_rpc.html&quot;&gt;rpc module&lt;/a&gt;, or the &lt;a href=&quot;arch_platform_rpc.html&quot;&gt;rpc platform interface&lt;/a&gt;.
+To enable:
+&lt;pre&gt;&lt;code&gt;#define BUILD_RPC&lt;/code&gt;&lt;/pre&gt;
+&lt;a href=&quot;building.html#static&quot;&gt;Static configuration data dependencies&lt;/a&gt; (ONLY if built with boot=luarpc): &lt;b&gt;RPC_UART_ID, RPC_TIMER_ID&lt;/b&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
 &lt;a name=&quot;confmodules&quot;&gt;&lt;h2&gt;Configuring modules&lt;/h2&gt;&lt;/a&gt;
@@ -282,34 +252,33 @@
 &lt;/tr&gt;
 
 &lt;tr&gt;
-&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;BUF_ENABLE_ADC&lt;/td&gt;
-&lt;td&gt;If the &lt;a href=&quot;arch_platform_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, this controls whether or not the ADC will create a buffer so that more than one sample per channel can be held in a buffer before being returned through adc.getsample or adc.getsamples.  If disabled, only one conversion result will be buffered.  This option does NOT affect the behavior of the moving average filter.&lt;/td&gt;
+&lt;td&gt;If the &lt;a href=&quot;refman_gen_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, this controls whether or not the ADC will create a buffer so that more than one sample per channel can be held in a buffer before being returned through adc.getsample or adc.getsamples.  If disabled, only one conversion result will be buffered.  This option does NOT affect the behavior of the moving average filter.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;ADC_BUF_SIZE&lt;/td&gt;
-&lt;td&gt;If the &lt;a href=&quot;arch_platform_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, and BUF_ENABLE_ADC is defined, this will define the default buffer length allocated at startup.  This does not limit buffer sizes, it only defines the default length.  Appropriate values range from BUF_SIZE_2 to BUF_SIZE_32768, with the numeric component at the end being in powers of 2.&lt;/td&gt;
- &lt;/tr&gt;
-
+&lt;td&gt;If the &lt;a href=&quot;refman_gen_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, and
+BUF_ENABLE_ADC is defined, this will define the default buffer length
+allocated at startup. This does not limit buffer sizes, it only defines the
+default length. Appropriate values range from BUF_SIZE_2 to BUF_SIZE_32768,
+with the numeric component at the end being in powers of 2.&lt;/td&gt;
+&lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;ADC_BIT_RESOLUTION&lt;br&gt;ADC_TIMER_FIRST_ID&lt;br&gt;ADC_NUM_TIMERS
-=======
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;BUF_ENABLE_ADC&lt;/td&gt;
-&lt;td&gt;If the &lt;a href=&quot;refman_gen_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, this controls whether or not the ADC will create a buffer so that more than one sample per channel can be held in a buffer before being returned through adc.getsample or adc.getsamples.  If disabled, only one conversion result will be buffered.  This option does NOT affect the behavior of the moving average filter.&lt;/td&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;ADC_BIT_RESOLUTION
+&lt;/td&gt;
+&lt;td&gt;If the &lt;a href=&quot;refman_gen_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, this will
+define the number of bits per adc conversion result. This is used to determine
+the maximum conversion value that can be returned by the ADC.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;ADC_BUF_SIZE&lt;/td&gt;
-&lt;td&gt;If the &lt;a href=&quot;refman_gen_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, and BUF_ENABLE_ADC is defined, this will define the default buffer length allocated at startup.  This does not limit buffer sizes, it only defines the default length.  Appropriate values range from BUF_SIZE_2 to BUF_SIZE_32768, with the numeric component at the end being in powers of 2.&lt;/td&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;RPC_UART_ID
+&lt;/td&gt;
+&lt;td&gt;If the &lt;a href=&quot;refman_gen_rpc.html&quot;&gt;rpc module&lt;/a&gt; is enabled and boot mode is set to luarpc, this selects which uart luarpc will listen on for incoming client connections.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;ADC_BIT_RESOLUTION
-&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r476
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;RPC_TIMER_ID
 &lt;/td&gt;
-&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
-&lt;td&gt;The ADC resolution in bits, the ID of the first timer and the total number of timers used by the ADC subsystem.&lt;/td&gt;
-=======
-&lt;td&gt;If the &lt;a href=&quot;refman_gen_adc.html&quot;&gt;adc module&lt;/a&gt; is enabled, this will define the number of bits per adc conversion result.  This is used to determine the maximum conversion value that can be returned by the ADC.&lt;/td&gt;
-&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r476
+&lt;td&gt;If the &lt;a href=&quot;refman_gen_rpc.html&quot;&gt;rpc module&lt;/a&gt; is enabled and boot mode is set to luarpc, this selects which timer will be used with the uart selected with RPC_UART_ID.&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
@@ -318,7 +287,7 @@
 One more thing you might want to configure for your build is the
 contents of the ROM file system. See the &lt;a href=&quot;arch_romfs.html&quot;&gt;ROMFS
 documentation&lt;/a&gt; for details on how to do this.&lt;/p&gt;
-&lt;h3&gt;Invoking the build system&lt;/h3&gt;
+&lt;a name=&quot;buildoptions&quot; /&gt;&lt;h3&gt;Invoking the build system&lt;/h3&gt;
 &lt;p&gt;Once you have everything in place, all you have to do is to
 invoke the build system (scons) with the right arguments. This is a
 fairly easy step, although it might look intimidating because of the
@@ -328,7 +297,7 @@
 aparent complexity. The examples at the end of this section will show
 how easy it is to use the build system in practice.
 &lt;/p&gt;
-&lt;pre&gt;&lt;code&gt;$ scons &lt;br&gt; [target=lua | lualong]&lt;br&gt; [cpu=at91sam7x256 | at91sam7x512 | i386 | str912fw44 | lm3s8962 | &lt;br&gt; lm3s6965 | lm3s6918 | lpc2888 | str711fr2 | at32uc3a0512 | stm32f103ze&lt;br&gt; [board=ek-lm3s8962 | ek-lm3s6965 | eagle-100 | str9-comstick | sam7-ex256 | &lt;br&gt; lpc-h2888 | mod711 | pc | atevk1100 | stm3210e-eval ]&lt;br&gt; [cpumode=arm | thumb] &lt;br&gt; [allocator = newlib | multiple | simple]&lt;br&gt; [toolchain = &lt;toolchain name&gt;]&lt;br&gt; [optram = 0 | 1]&lt;br&gt; [prog]&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;
+&lt;pre&gt;&lt;code&gt;$ scons &lt;br&gt; [target=lua | lualong]&lt;br&gt; [cpu=at91sam7x256 | at91sam7x512 | i386 | str912fw44 | lm3s8962 | &lt;br&gt; lm3s6965 | lm3s6918 | lpc2888 | str711fr2 | at32uc3a0512 | stm32f103ze&lt;br&gt; [board=ek-lm3s8962 | ek-lm3s6965 | eagle-100 | str9-comstick | sam7-ex256 | &lt;br&gt; lpc-h2888 | mod711 | pc | atevk1100 | stm3210e-eval ]&lt;br&gt; [cpumode=arm | thumb] &lt;br&gt; [allocator = newlib | multiple | simple]&lt;br&gt; [toolchain = &lt;toolchain name&gt;]&lt;br&gt; [optram = 0 | 1]&lt;br&gt; [romfs = verbatim | compress | compile]&lt;br&gt; [prog]&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;p&gt;Your build target is specified by two paramters: cpu and
 board. &quot;cpu&quot; gives the name of your CPU, and &quot;board&quot; the name of the
 board. A board can be associated with more than one CPU. This allows
@@ -381,6 +350,7 @@
 build also the platform-specific programming file where appropriate
 (for example, on a AT91SAM7X256 this results in a .bin file that can be
 programmed in the CPU). &lt;/li&gt;
+&lt;li&gt;&lt;b&gt;romfs = verbatim | compress | compile&lt;/b&gt;: ROMFS compilation mode, check &lt;a href=&quot;arch_romfs.html#mode&quot;&gt;here&lt;/a&gt; for details (&lt;b&gt;new in 0.7&lt;/b&gt;).&lt;/li&gt; 
 &lt;/ul&gt;
 &lt;p&gt;The output will be a file named elua_&lt;i&gt;[target]&lt;/i&gt;_&lt;i&gt;[cpu]&lt;/i&gt;.elf
 (and also another file with the same name but ending in .bin/.hex if

Added: branches/eagle_mmc/doc/en/building_unix.html
===================================================================
--- branches/eagle_mmc/doc/en/building_unix.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/building_unix.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,36 @@
+$$HEADER$$
+&lt;h3&gt;Building eLua in Linux&lt;/h3&gt;
+&lt;p&gt;Building &lt;b&gt;eLua&lt;/b&gt; in Linux is fairly easy. This tutorial assumes that Ubuntu is used for building, however any distro should be fine, you just need to 
+convert the &quot;apt-get&quot; calls to your distro's package manager equivalent. You need a few packages installed to build &lt;b&gt;eLua&lt;/b&gt;:&lt;/p&gt;
+&lt;ul&gt;
+&lt;li&gt;&lt;b&gt;a toolchain&lt;/b&gt;: check &lt;a href=&quot;toolchains.html&quot;&gt;the toolchains page&lt;/a&gt; for
+toolchain instructions. Please note that even if you already have a
+compiled toolchain, the differences in the Newlib configure flags
+(mainly the --disable-newlib-supplied-syscalls flags) might prevent &lt;b&gt;eLua&lt;/b&gt;
+for building properly on your machine.&lt;/li&gt;
+&lt;li&gt;&lt;b&gt;Python&lt;/b&gt; : it should be already installed. If it's not, use
+apt-get to install it:
+&lt;pre&gt;&lt;code&gt;$ sudo apt-get install python&lt;/code&gt;&lt;/pre&gt;
+&lt;/li&gt;
+&lt;li&gt;&lt;b&gt;scons&lt;/b&gt; - &lt;b&gt;eLua&lt;/b&gt; uses scons instead of make
+and makefiles, because we find scons much more &quot;natural&quot; and easier to
+use than make. To install it:
+&lt;pre&gt;&lt;code&gt;$ sudo apt-get install scons&lt;/code&gt;&lt;/pre&gt;
+&lt;/li&gt;
+&lt;li&gt;your toolchain's &quot;bin&quot; directory (this is generally
+something like /usr/local/cross-arm/bin, where /usr/local/cross-arm is
+the directory in which you installed your toolchain) must be in $PATH.
+&lt;/li&gt;
+&lt;li&gt;if you're building for the i386 platform, you'll also need
+&quot;nasm&quot;:
+&lt;pre&gt;&lt;code&gt;$ sudo apt-get install nasm&lt;/code&gt;&lt;/pre&gt;
+&lt;/li&gt;
+&lt;li&gt;&lt;b&gt;gcc&lt;/b&gt;: if you want to use the ROMFS precompile feature (see &lt;a href=&quot;arch_romfs.html#mode&quot;&gt;here&lt;/a&gt; for details) you need to build an image of the &lt;b&gt;eLua&lt;/b&gt; cross compiler, and you need an i386
+toolchain for this. It should be already installed, but if you want to be on the safe side do this:
+  &lt;pre&gt;&lt;code&gt;sudo apt-get install build-essential&lt;/code&gt;&lt;/pre&gt;
+  Then build the &lt;b&gt;eLua&lt;/b&gt; cross compiler by executing this command: 
+  &lt;pre&gt;&lt;code&gt;scons -f cross-lua.py&lt;/code&gt;&lt;/pre&gt;
+&lt;/li&gt;
+&lt;/ul&gt;
+&lt;p&gt;After you setup your build environment as described above, follow &lt;a href=&quot;building.html#configuring&quot;&gt;this tutorial&lt;/a&gt; to build your &lt;b&gt;eLua&lt;/b&gt; image.&lt;/p&gt;
+$$FOOTER$$

Added: branches/eagle_mmc/doc/en/building_win.html
===================================================================
--- branches/eagle_mmc/doc/en/building_win.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/building_win.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,34 @@
+$$HEADER$$
+&lt;h3&gt;Building eLua in Windows&lt;/h3&gt;
+&lt;p&gt;Starting with version 0.7, building &lt;b&gt;eLua&lt;/b&gt; in Windows is officialy supported. The following instructions were tested in Windows 7 Professional, but they
+should work with little or no modification in any version of Windows 7, Vista or XP. You need to download and install a few things first:&lt;/p&gt; 
+&lt;ul&gt;
+&lt;li&gt;&lt;b&gt;a toolchain&lt;/b&gt;: building a GCC-based toolchain under Windows is possible, but not easy. We found that the easiest thing to do is to download a pre-built toolchain 
+and install it. Currently, all the targets supported by &lt;b&gt;eLua&lt;/b&gt; (except i386) have at least one toolchain that runs under Windows:
+&lt;ul&gt; 
+  &lt;li&gt;For ARM7, ARM9 and Cortex-M3 targets, you can download and install the CodeSourcery Lite Edition (supported by &lt;b&gt;eLua&lt;/b&gt; out of the box) from 
+  &lt;a href=&quot;<A HREF="http://www.codesourcery.com/sgpp/lite/arm/portal/subscription?@template=lite">http://www.codesourcery.com/sgpp/lite/arm/portal/subscription?@template=lite</A>&quot;&gt;here&lt;/a&gt;. For reference, the version used in this tutorial is 
+  &quot;Sourcery G++ Lite 2009q3-68 for ARM EABI&quot;. Future (and some previous) versions of this toolchain should also work. Remember to specify 
+  &lt;code&gt;toolchain=codesourcery&lt;/code&gt; when using this toolchain (see &lt;a href=&quot;building.html#buildoptions&quot;&gt;here&lt;/a&gt; for details).&lt;/li&gt;
+  &lt;li&gt;AVR32 has its own Windows based GNU toolchain that can be downloaded from Atmel &lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/tools_card.asp?tool_id=4118">http://www.atmel.com/dyn/products/tools_card.asp?tool_id=4118</A>&quot;&gt;here&lt;/a&gt;.&lt;/li&gt;
+&lt;/ul&gt;&lt;/li&gt;   
+&lt;li&gt;&lt;b&gt;Python&lt;/b&gt;: my favourite Windows distribution of Python is &lt;a href=&quot;<A HREF="http://www.activestate.com/activepython/">http://www.activestate.com/activepython/</A>&quot;&gt;ActivePython&lt;/a&gt;. Simply download it and install it. ActivePython
+2.6.4.8 will be used in this tutorial. Other Python distribution might work equally well.&lt;/li&gt;
+&lt;li&gt;&lt;b&gt;scons&lt;/b&gt;: download the Windows installer package from &lt;a href=&quot;<A HREF="http://www.scons.org/download.php">http://www.scons.org/download.php</A>&quot;&gt;here&lt;/a&gt;. For this tutorial, scons 1.2.0 will be used. Remember to install
+scons &lt;b&gt;after&lt;/b&gt; you install Python. &lt;/li&gt;
+&lt;li&gt;&lt;b&gt;lua&lt;/b&gt;: a very good and versatile Lua distribution for Windows is &quot;Lua for Windows&quot;, it can be downloaded from &lt;a href=&quot;<A HREF="http://luaforwindows.luaforge.net/">http://luaforwindows.luaforge.net/</A>&quot;&gt;here&lt;/a&gt;. Besides
+Lua itself, it includes a lot of very useful Lua modules, so I highly recommend it. Version 5.1.4.30 of Lua for Windows will be used in this tutorial.&lt;/li&gt;
+&lt;li&gt;&lt;b&gt;svn&lt;/b&gt;: if you need to checkout the &lt;b&gt;eLua&lt;/b&gt; source code from the SVN repository, you need to install SVN for windows. There are a few precompiled SVN packages for
+Windows available, I'm using the Tigris binaries that can be downloaded from &lt;a href=&quot;<A HREF="http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=8100">http://subversion.tigris.org/servlets/ProjectDocumentList?folderID=8100</A>&quot;&gt;here&lt;/a&gt;. In this
+tutorial I'll use version 1.6.6.&lt;/li&gt;
+&lt;li&gt;&lt;b&gt;gcc&lt;/b&gt;: if you want to use the ROMFS precompile feature (see &lt;a href=&quot;arch_romfs.html#mode&quot;&gt;here&lt;/a&gt; for details) you need to build an image of the &lt;b&gt;eLua&lt;/b&gt; cross compiler, and you need an i386
+toolchain for this. I'm using MinGW for this task, it can be downloaded from &lt;a href=&quot;<A HREF="http://www.mingw.org/">http://www.mingw.org/</A>&quot;&gt;here&lt;/a&gt;. This tutorial uses MinGW version 5.1.6. Note that you
+don't need to install MSYS, MinGW should be enough. Cygwin should work equally well, or even Microsoft's Visual Studio (not tested). To build the cross compiler, run
+this command from the command line:
+  &lt;pre&gt;&lt;code&gt;scons -f cross-lua.py&lt;/code&gt;&lt;/pre&gt;
+&lt;/li&gt;
+&lt;/ul&gt;
+&lt;p&gt;Make sure that all the programs listed above are added to %PATH%. Most of them do this automatically, or have an option to do this automatically, but some
+(for example MinGW) do not and you need to add them to %PATH% manually.&lt;/p&gt; 
+&lt;p&gt;After you setup your build environment as described above, follow &lt;a href=&quot;building.html#configuring&quot;&gt;this tutorial&lt;/a&gt; to build your &lt;b&gt;eLua&lt;/b&gt; image.&lt;/p&gt;
+$$FOOTER$$

Modified: branches/eagle_mmc/doc/en/comunity.html
===================================================================
--- branches/eagle_mmc/doc/en/comunity.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/comunity.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,5 +1,5 @@
 $$HEADER$$
-&lt;a name=&quot;lists&quot; /&gt;&lt;h3&gt;Mail lists&lt;/h3&gt;
+&lt;a name=&quot;lists&quot; /&gt;&lt;h3&gt;Mailing lists&lt;/h3&gt;
 &lt;p style=&quot;text-align: left;&quot;&gt;&lt;strong&gt;eLua&lt;/strong&gt; currently has a single &lt;strong&gt;developers and users discussion list&lt;/strong&gt;. You are very welcomed
 to join us at &lt;a href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev&lt;/a">https://lists.berlios.de/mailman/listinfo/elua-dev&lt;/a</A>&gt;.
 Please note that the list is moderated in order to avoid spam, so you
@@ -8,9 +8,8 @@
 &lt;p&gt;Our development repository is currently maintained in a
 subversion server. If you want to track SVN activity, you can also subscribe to our &lt;strong&gt;SVN
 Activity List&lt;/strong&gt; at &lt;a href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">https://lists.berlios.de/mailman/listinfo/elua-svn</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn&lt;/a">https://lists.berlios.de/mailman/listinfo/elua-svn&lt;/a</A>&gt;&lt;/p&gt;
-&lt;a name=&quot;forums&quot; /&gt;&lt;h3&gt;eLua forums&lt;/h3&gt;
-&lt;p&gt;&lt;b&gt;eLua&lt;/b&gt; doesn't have a dedicated forum at this point. However, our Developers
- and Users Discussion List is &quot;mirrored&quot; in a forum-like format at
+&lt;a name=&quot;forums&quot; /&gt;&lt;h3&gt;Forums&lt;/h3&gt;
+&lt;p&gt;&lt;b&gt;eLua&lt;/b&gt; doesn't have a dedicated forum at this point. However, our &lt;strong&gt;developers and users discussion list&lt;/strong&gt; is &quot;mirrored&quot; in a forum-like format at
   &lt;a href=&quot;<A HREF="http://n2.nabble.com/eLua-Development-f2368040.html">http://n2.nabble.com/eLua-Development-f2368040.html</A>&quot;&gt;this address&lt;/a&gt; 
   (using the services provided by &lt;a href=&quot;<A HREF="http://www.nable.com">http://www.nable.com</A>&quot;&gt;Nabble&lt;/a&gt;).
 &lt;/p&gt; 
@@ -22,23 +21,22 @@
 &lt;ul&gt;
  &lt;li&gt;Everson Denis and Fl&#225;vio Nogueira - Portuguese translation for the site &amp; doc&lt;/li&gt;
  &lt;li&gt;Fr&#233;deric Thomas - Site hosting, LM3S enhancements&lt;/li&gt;
- &lt;li&gt;James Snyder - ADC, CAN, LuaRPC (&lt;a href=&quot;<A HREF="http://q12.org/lua/index.html">http://q12.org/lua/index.html</A>&quot;&gt;originaly by Russell Smith&lt;/a&gt;), testing&lt;/li&gt;
+ &lt;li&gt;Jesus Alvarez - Initial SD/MMC card support&lt;/li&gt;
+ &lt;li&gt;James Snyder - ADC, CAN, LuaRPC (&lt;a href=&quot;<A HREF="http://q12.org/lua/index.html">http://q12.org/lua/index.html</A>&quot;&gt;originaly by Russell Smith&lt;/a&gt;), sd/mmc, testing, planning, ...&lt;/li&gt;
  &lt;li&gt;Mike Panetta - STM32 port&lt;/li&gt;
- &lt;li&gt;Pedro Bittencourt - RIT OLED, &lt;a href=&quot;<A HREF="http://code.google.com/p/vhews/">http://code.google.com/p/vhews/</A>&quot;&gt;VHeHS&lt;/a&gt;, testing...&lt;/li&gt;
+ &lt;li&gt;Pedro Bittencourt - RIT OLED display support, testing ...&lt;/li&gt;
  &lt;li&gt;Raul Nunes - The fundamental support from &lt;a href=&quot;<A HREF="http://www.puc-rio.br">http://www.puc-rio.br</A>&quot;&gt;PUC-Rio&lt;/a&gt;.&lt;/li&gt;
- &lt;li&gt;Roberto Ierusalimschy, Luiz Henrique Figueiredo, Waldemar Celles - for
- &lt;a href=&quot;<A HREF="http://www.lua.org">http://www.lua.org</A>&quot;&gt;Lua&lt;/a&gt; (!!! :)&lt;/li&gt;
- &lt;li&gt;T&#233;o Benjamin, Ives Cunha, Rafael Barmak - Pong, TetrIves, SpaceShip
- games and &lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/manfredo">http://www.giga.puc-rio.br/site/embedded/manfredo</A>&quot;&gt;Manfredo&lt;/a&gt;, a GPS guided robot, powered by eLua.&lt;/li&gt;
- &lt;li&gt;The whole community of users on our eLua list at &lt;a
- href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev&lt;/a">https://lists.berlios.de/mailman/listinfo/elua-dev&lt;/a</A>&gt;&lt;/li&gt;
+ &lt;li&gt;Roberto Ierusalimschy, Luiz Henrique Figueiredo, Waldemar Celles - for &lt;a href=&quot;<A HREF="http://www.lua.org">http://www.lua.org</A>&quot;&gt;Lua&lt;/a&gt; (!!! :)&lt;/li&gt;
+ &lt;li&gt;T&#233;o Benjamin, Ives Cunha, Rafael Barmak - Pong, TetrIves, SpaceShip games and &lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/manfredo">http://www.giga.puc-rio.br/site/embedded/manfredo</A>&quot;&gt;Manfredo&lt;/a&gt;, a GPS guided robot, powered by eLua.&lt;/li&gt;
+ &lt;li&gt;The whole community of users on our eLua list at &lt;a href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev&lt;/a">https://lists.berlios.de/mailman/listinfo/elua-dev&lt;/a</A>&gt;&lt;/li&gt;
 &lt;/ul&gt;
  ... and the constant help and support from:&lt;br /&gt;
  
-Alberto Fabiano, Andr&#233; Carregal, &#194;ngelo Santos, Asko Kauppi, Cosmin Filip,
-Dean Hall, Diego Sueiro, Fabio Pereira, Giovani Balduino, Jesus Alvarez, John Hind, Luiz de Barros, Marcelo T&#237;io, Marco Meggiolaro,
-Ricardo L. Rosa, Robert Jakabosky, Yuri Takhteyev ....
-...
+Alberto Fabiano, Andr&#233; Carregal, &#194;ngelo Santos, Asko Kauppi, Carlos Eduardo Deodoro,
+Cosmin Filip, Dean Hall, Diego Sueiro, Eduardo von Ristow, Fabio Pereira,
+Giovani Balduino, Guilherme Sanchez Pacheco, John Hind, Luiz de Barros, Marcelo T&#237;io,
+Marco Meggiolaro, Ralph Hempel, Robert Jakabosky, Vagner Nascimento,
+Yuri Takhteyev, ....
 &lt;/a&gt;
 
 $$FOOTER$$

Modified: branches/eagle_mmc/doc/en/dl_old.html
===================================================================
--- branches/eagle_mmc/doc/en/dl_old.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/dl_old.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,6 +1,103 @@
 $$HEADER$$
 &lt;h3&gt;Downloading eLua Old Versions&lt;/h3&gt;
 &lt;p&gt;The tables below have links to the previous official versions of &lt;b&gt;eLua&lt;/b&gt; (both source code and binaries).&lt;/p&gt;
+&lt;a name=&quot;v060&quot; /&gt;&lt;h2&gt;0.6&lt;/h2&gt;
+&lt;table class=&quot;table_center&quot;&gt;
+&lt;tbody&gt;
+&lt;tr&gt;
+&lt;th&gt;Version&lt;/th&gt;
+&lt;th&gt;MCU&lt;/th&gt;
+&lt;th&gt;Board&lt;/th&gt;
+&lt;th&gt;Lua number type&lt;/th&gt;
+&lt;th&gt;Image file&lt;/th&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755">http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755</A>&quot;&gt;AT91SAM7X256&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/sam7-ex256.html">http://www.olimex.com/dev/sam7-ex256.html</A>&quot;&gt;SAM7-EX256&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x256.bin">http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x256.bin</A>&quot;&gt;elua0.6_lua_at91sam7x256.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104">http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104</A>&quot;&gt;AT91SAM7X512&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;None&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x512.bin">http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x512.bin</A>&quot;&gt;elua0.6_lua_at91sam7x512.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (generic)&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;PCs/emulators&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_i386.elf">http://prdownload.berlios.de/elua/elua0.6_lua_i386.elf</A>&quot;&gt;elua0.6_lua_i386.elf&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965.html">http://www.luminarymicro.com/products/lm3s6965.html</A>&quot;&gt;LM3S6965&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html</A>&quot;&gt;EKx-LM3S6965&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6965.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6965.bin</A>&quot;&gt;elua0.6_lua_lm3s6965.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S8962.html">http://www.luminarymicro.com/products/LM3S8962.html</A>&quot;&gt;LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html</A>&quot;&gt;EKx-LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s8962.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s8962.bin</A>&quot;&gt;elua0.6_lua_lm3s8962.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html">http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html</A>&quot;&gt;LPC2888&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/lpc-h2888.html">http://www.olimex.com/dev/lpc-h2888.html</A>&quot;&gt;LPC-H2888&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lpc2888.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lpc2888.bin</A>&quot;&gt;elua0.6_lua_lpc2888.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR711FR2.html">http://www.st.com/mcu/devicedocs-STR711FR2.html</A>&quot;&gt;STR711FR2&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.sctec.com.br/content/view/101/30/">http://www.sctec.com.br/content/view/101/30/</A>&quot;&gt;MOD711&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_str711fr2.bin">http://prdownload.berlios.de/elua/elua0.6_lua_str711fr2.bin</A>&quot;&gt;elua0.6_lua_str711fr2.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.hitex.com/index.php?id=383">http://www.hitex.com/index.php?id=383</A>&quot;&gt;STR9-comStick&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_str912fw44.bin">http://prdownload.berlios.de/elua/elua0.6_lua_str912fw44.bin</A>&quot;&gt;elua0.6_lua_str912fw44.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S6918.html">http://www.luminarymicro.com/products/LM3S6918.html</A>&quot;&gt;LM3S6918&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.micromint.com/index.php/SBC/eagle-100.html">http://www.micromint.com/index.php/SBC/eagle-100.html</A>&quot;&gt;Micromint Eagle 100&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6918.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6918.bin</A>&quot;&gt;elua0.6_lua_lm3s918.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/product_card.asp?part_id=4117">http://www.atmel.com/dyn/products/product_card.asp?part_id=4117</A>&quot;&gt;AT32UC3A0512&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114">http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114</A>&quot;&gt;ATEVK1100&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at32uc3a0512.hex">http://prdownload.berlios.de/elua/elua0.6_lua_at32uc3a0512.hex</A>&quot;&gt;elua0.6_lua_at32uc3a0512.hex&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103RE-110.html">http://www.st.com/mcu/devicedocs-STM32F103RE-110.html</A>&quot;&gt;STM32F103RE&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.futurlec.com/ET-STM32_Stamp.shtml">http://www.futurlec.com/ET-STM32_Stamp.shtml</A>&quot;&gt;ET-STM32 Stamp&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103re.bin">http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103re.bin</A>&quot;&gt;elua0.6_lua_stm32f103re.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html">http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html</A>&quot;&gt;STM32F103ZE&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html">http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html</A>&quot;&gt;STM3210E-EVAL&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103ze.bin">http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103ze.bin</A>&quot;&gt;elua0.6_lua_stm32f103ze.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/tbody&gt;
+&lt;/table&gt;
+
 &lt;a name=&quot;v050&quot; /&gt;&lt;h2&gt;0.5&lt;/h2&gt;
 &lt;table class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;

Modified: branches/eagle_mmc/doc/en/downloads.html
===================================================================
--- branches/eagle_mmc/doc/en/downloads.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/downloads.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -2,7 +2,7 @@
 &lt;h3&gt;Downloading eLua&lt;/h3&gt;
 &lt;p&gt;You have a few options for downloading &lt;b&gt;eLua&lt;/b&gt;:&lt;/p&gt;
 &lt;ul&gt;
-  &lt;li&gt;download a binary &lt;b&gt;eLua&lt;/b&gt; image for your platform of choice. Binary images are provided with each official release
+  &lt;li&gt;download a binary &lt;b&gt;eLua&lt;/b&gt; image for the platform of your choice. Binary images are provided with each official release
   and also for some specific applications (ie: games). This is generally the best option if you have a bord that's officially
   supported by &lt;b&gt;eLua&lt;/b&gt; (see &lt;a href=&quot;status.html&quot;&gt;here&lt;/a&gt; for details) and you want to have &lt;b&gt;eLua&lt;/b&gt; up and running on your board as quickly as possible.&lt;/li&gt;
   &lt;li&gt;download the source code to build &lt;b&gt;eLua&lt;/b&gt; yourself. You can either download the source code of an official release or get the &quot;bleeding edge&quot; version from the SVN repository. Download the source code instead of a
@@ -10,16 +10,27 @@
   happens behind the &lt;i&gt;eLua# &lt;/i&gt; prompt :)&lt;/li&gt;
 &lt;/ul&gt;
 &lt;a name=&quot;binaries&quot; /&gt;&lt;h3&gt;Binary images&lt;/h3&gt;
-&lt;p&gt;Pre-built images of &lt;b&gt;eLua&lt;/b&gt; can be downloaded for each official release. Only the latest official &lt;b&gt;eLua&lt;/b&gt; release is covered in this paragraph; if you want to download a pre-built
-image from an older release (although this isn't generally advisable), check &lt;a href=&quot;dl_old.html&quot;&gt;this page&lt;/a&gt;. Choose the corresponding image file from the table below, flash it into your
-board, connect a serial terminal (or Ethernet if you board supports) and enjoy &lt;b&gt;eLua&lt;/b&gt;. Also note that &lt;b&gt;eLua binaries&lt;/b&gt;, like the &lt;a href=&quot;#source&quot;&gt;source code distribution&lt;/a&gt;,
-include some example programs in it's file system, so you can run and play them (yes! we have games too! :), following the instructions in our &lt;a href=&quot;using.html&quot;&gt;Using eLua&lt;/a&gt; page. The
-available example programs are described in our &lt;a href=&quot;examples.html&quot;&gt;examples page&lt;/a&gt;.&lt;/p&gt;
-&lt;p&gt;If you need a customized binary image for an already supported platform (for example with an autorun program, with some code of yours in the file system, with your LAN IP settings) and the
-&lt;a href=&quot;building.html&quot;&gt;instructions for building eLua&lt;/a&gt; didn't work for you, feel free to &lt;a href=&quot;overview.html#contacts&quot;&gt;write us&lt;/a&gt; explaining what you need. We may find some time to
-build one for you and eventually make it available here too.&lt;/p&gt;
-&lt;p&gt;To understand what's in a file name (for example &lt;i&gt;elua_lualong_lm3s8962.bin&lt;/i&gt;) check our &lt;a href=&quot;building.html&quot;&gt;building eLua&lt;/a&gt; page.&lt;/p&gt;
-&lt;!-- [NEWVER] --&gt;
+&lt;p&gt;Pre-built images of &lt;b&gt;eLua&lt;/b&gt; can be downloaded for each official release. Only the latest official &lt;b&gt;eLua&lt;/b&gt; release is covered in this
+paragraph. If you want to download a pre-built image from an older release (although this isn't generally advisable), check &lt;a href=&quot;dl_old.html&quot;&gt;this page&lt;/a&gt;. 
+&lt;/p&gt;
+&lt;p&gt;Choose the corresponding image file from the table below, flash it into your
+board, connect a serial terminal (or Ethernet if you board supports) and enjoy &lt;b&gt;eLua&lt;/b&gt;. 
+Please also note that &lt;b&gt;eLua binaries&lt;/b&gt;, like the &lt;a href=&quot;#source&quot;&gt;source code distribution&lt;/a&gt;,
+include some example programs in it's file system, so you can run and play (yes! we have games too! :) them , following the instructions in our &lt;a href=&quot;using.html&quot;&gt;Using eLua&lt;/a&gt; page. 
+The available example programs are described in our &lt;a href=&quot;examples.html&quot;&gt;examples page&lt;/a&gt;.
+&lt;/p&gt;
+&lt;p&gt;
+If you need a customized binary image for an already supported platform (for example with an autorun program, with some code of yours in the file system, with your LAN IP settings) and the
+&lt;a href=&quot;building.html&quot;&gt;instructions for building eLua&lt;/a&gt; didn't work for you, feel free to
+ask for one in &lt;a
+href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>&quot;&gt;our discussion
+list&lt;/a&gt; explaining what you need. We may find some time to
+build one for you and eventually make it available here too.
+&lt;/p&gt;
+&lt;h2&gt;Official Latest Release Binaries&lt;/h2&gt;
+&lt;p&gt;
+To understand what's in a file name (for example &lt;i&gt;elua_lualong_lm3s8962.bin&lt;/i&gt;) check our &lt;a href=&quot;building.html&quot;&gt;building eLua&lt;/a&gt; page.
+&lt;/p&gt;
 &lt;table class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
@@ -30,99 +41,147 @@
 &lt;th&gt;Image file&lt;/th&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;All (source code)&lt;/td&gt;
-&lt;td&gt;All (source code)&lt;/td&gt;
-&lt;td&gt;All (source code)&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6.tgz">http://prdownload.berlios.de/elua/elua0.6.tgz</A>&quot;&gt;elua0.6.tgz&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S8962.html">http://www.luminarymicro.com/products/LM3S8962.html</A>&quot;&gt;LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html</A>&quot;&gt;EK-LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_lm3s8962.bin">http://prdownload.berlios.de/elua/elua0.7_lua_lm3s8962.bin</A>&quot;&gt;elua0.7_lua_lm3s8962.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755">http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755</A>&quot;&gt;AT91SAM7X256&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/sam7-ex256.html">http://www.olimex.com/dev/sam7-ex256.html</A>&quot;&gt;SAM7-EX256&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965.html">http://www.luminarymicro.com/products/lm3s6965.html</A>&quot;&gt;LM3S6965&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html</A>&quot;&gt;EK-LM3S6965&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x256.bin">http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x256.bin</A>&quot;&gt;elua0.6_lua_at91sam7x256.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_lm3s6965.bin">http://prdownload.berlios.de/elua/elua0.7_lua_lm3s6965.bin</A>&quot;&gt;elua0.7_lua_lm3s6965.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104">http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104</A>&quot;&gt;AT91SAM7X512&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;None&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S6918.html">http://www.luminarymicro.com/products/LM3S6918.html</A>&quot;&gt;LM3S6918&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.micromint.com/index.php/SBC/eagle-100.html">http://www.micromint.com/index.php/SBC/eagle-100.html</A>&quot;&gt;Micromint Eagle 100&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x512.bin">http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x512.bin</A>&quot;&gt;elua0.6_lua_at91sam7x512.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_lm3s6918.bin">http://prdownload.berlios.de/elua/elua0.7_lua_lm3s6918.bin</A>&quot;&gt;elua0.7_lua_lm3s918.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (generic)&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;PCs/emulators&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S8962.html">http://www.luminarymicro.com/products/LM3S8962.html</A>&quot;&gt;LM3S9B62&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a
+href=&quot;<A HREF="http://www.luminarymicro.com/products/ek-lm3s9b92.html">http://www.luminarymicro.com/products/ek-lm3s9b92.html</A>&quot;&gt;EK-LM3S9B92&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_i386.elf">http://prdownload.berlios.de/elua/elua0.6_lua_i386.elf</A>&quot;&gt;elua0.6_lua_i386.elf&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a
+href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_lm3s9B62.bin">http://prdownload.berlios.de/elua/elua0.7_lua_lm3s9B62.bin</A>&quot;&gt;elua0.7_lua_m3s9b992.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965.html">http://www.luminarymicro.com/products/lm3s6965.html</A>&quot;&gt;LM3S6965&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html</A>&quot;&gt;EKx-LM3S6965&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755">http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755</A>&quot;&gt;AT91SAM7X256&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/sam7-ex256.html">http://www.olimex.com/dev/sam7-ex256.html</A>&quot;&gt;SAM7-EX256&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6965.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6965.bin</A>&quot;&gt;elua0.6_lua_lm3s6965.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_at91sam7x256.bin">http://prdownload.berlios.de/elua/elua0.7_lua_at91sam7x256.bin</A>&quot;&gt;elua0.7_lua_at91sam7x256.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S8962.html">http://www.luminarymicro.com/products/LM3S8962.html</A>&quot;&gt;LM3S8962&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html</A>&quot;&gt;EKx-LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104">http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104</A>&quot;&gt;AT91SAM7X512&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;None&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s8962.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s8962.bin</A>&quot;&gt;elua0.6_lua_lm3s8962.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_at91sam7x512.bin">http://prdownload.berlios.de/elua/elua0.7_lua_at91sam7x512.bin</A>&quot;&gt;elua0.7_lua_at91sam7x512.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/product_card.asp?part_id=4117">http://www.atmel.com/dyn/products/product_card.asp?part_id=4117</A>&quot;&gt;AT32UC3A0512&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114">http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114</A>&quot;&gt;ATEVK1100&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_at32uc3a0512.hex">http://prdownload.berlios.de/elua/elua0.7_lua_at32uc3a0512.hex</A>&quot;&gt;elua0.7_lua_at32uc3a0512.hex&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.7&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html">http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html</A>&quot;&gt;LPC2888&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/lpc-h2888.html">http://www.olimex.com/dev/lpc-h2888.html</A>&quot;&gt;LPC-H2888&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lpc2888.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lpc2888.bin</A>&quot;&gt;elua0.6_lua_lpc2888.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_lpc2888.bin">http://prdownload.berlios.de/elua/elua0.7_lua_lpc2888.bin</A>&quot;&gt;elua0.7_lua_lpc2888.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.nxp.com/#/pip/pip=[pip=LPC2468_4">http://www.nxp.com/#/pip/pip=[pip=LPC2468_4</A>]|pp=[t=pip,i=LPC2468_4]&quot;&gt;LPC2468&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/eluademoboard">http://www.giga.puc-rio.br/site/embedded/eluademoboard</A>&quot;&gt;PUC-Rio eLua board&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a
+href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_lpc2468.bin">http://prdownload.berlios.de/elua/elua0.7_lua_lpc2468.bin</A>&quot;&gt;elua0.7_lua_lpc2468.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.7&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR711FR2.html">http://www.st.com/mcu/devicedocs-STR711FR2.html</A>&quot;&gt;STR711FR2&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.sctec.com.br/content/view/101/30/">http://www.sctec.com.br/content/view/101/30/</A>&quot;&gt;MOD711&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_str711fr2.bin">http://prdownload.berlios.de/elua/elua0.6_lua_str711fr2.bin</A>&quot;&gt;elua0.6_lua_str711fr2.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_str711fr2.bin">http://prdownload.berlios.de/elua/elua0.7_lua_str711fr2.bin</A>&quot;&gt;elua0.7_lua_str711fr2.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.hitex.com/index.php?id=383">http://www.hitex.com/index.php?id=383</A>&quot;&gt;STR9-comStick&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_str912fw44.bin">http://prdownload.berlios.de/elua/elua0.6_lua_str912fw44.bin</A>&quot;&gt;elua0.6_lua_str912fw44.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_str912fw44.bin">http://prdownload.berlios.de/elua/elua0.7_lua_str912fw44.bin</A>&quot;&gt;elua0.7_lua_str912fw44.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S6918.html">http://www.luminarymicro.com/products/LM3S6918.html</A>&quot;&gt;LM3S6918&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.micromint.com/index.php/SBC/eagle-100.html">http://www.micromint.com/index.php/SBC/eagle-100.html</A>&quot;&gt;Micromint Eagle 100&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.hitex.com/index.php?id=383">http://www.hitex.com/index.php?id=383</A>&quot;&gt;STR9-comStick&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6918.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6918.bin</A>&quot;&gt;elua0.6_lua_lm3s918.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_str912fw44.bin">http://prdownload.berlios.de/elua/elua0.7_lua_str912fw44.bin</A>&quot;&gt;elua0.7_lua_str912fw44.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/product_card.asp?part_id=4117">http://www.atmel.com/dyn/products/product_card.asp?part_id=4117</A>&quot;&gt;AT32UC3A0512&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114">http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114</A>&quot;&gt;ATEVK1100&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at32uc3a0512.hex">http://prdownload.berlios.de/elua/elua0.6_lua_at32uc3a0512.hex</A>&quot;&gt;elua0.6_lua_at32uc3a0512.hex&lt;/a&gt;&lt;/td&gt;
-&lt;/tr&gt;
-&lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103RE-110.html">http://www.st.com/mcu/devicedocs-STM32F103RE-110.html</A>&quot;&gt;STM32F103RE&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.futurlec.com/ET-STM32_Stamp.shtml">http://www.futurlec.com/ET-STM32_Stamp.shtml</A>&quot;&gt;ET-STM32 Stamp&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103re.bin">http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103re.bin</A>&quot;&gt;elua0.6_lua_stm32f103re.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_stm32f103re.bin">http://prdownload.berlios.de/elua/elua0.7_lua_stm32f103re.bin</A>&quot;&gt;elua0.7_lua_stm32f103re.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html">http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html</A>&quot;&gt;STM32F103ZE&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html">http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html</A>&quot;&gt;STM3210E-EVAL&lt;/a&gt;&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103ze.bin">http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103ze.bin</A>&quot;&gt;elua0.6_lua_stm32f103ze.bin&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_stm32f103ze.bin">http://prdownload.berlios.de/elua/elua0.7_lua_stm32f103ze.bin</A>&quot;&gt;elua0.7_lua_stm32f103ze.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (generic)&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;PCs/emulators&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7_lua_i386.elf">http://prdownload.berlios.de/elua/elua0.7_lua_i386.elf</A>&quot;&gt;elua0.7_lua_i386.elf&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
-&lt;p&gt;&lt;b&gt;NOTE:&lt;/b&gt; &lt;i&gt;Lua number type&lt;/i&gt; refers to the built Lua interpreter number type, float or integer, as explained in the &lt;a href=&quot;building.html&quot;&gt;building eLua&lt;/a&gt; page.&lt;/p&gt;
+&lt;p&gt;
+&lt;b&gt;NOTE:&lt;/b&gt; &lt;i&gt;Lua number type&lt;/i&gt; refers to the built Lua interpreter number type, float or integer, as explained in the &lt;a href=&quot;building.html&quot;&gt;building eLua&lt;/a&gt; page.
+&lt;/p&gt;
+&lt;p/&gt;
+&lt;h2&gt;Custom Releases Binaries&lt;/h2&gt;
+&lt;p&gt;This section offers some &lt;b&gt;eLua&lt;/b&gt; builds for custom applications.&lt;/p&gt;
+&lt;ul&gt;
+  &lt;li&gt;&lt;b&gt;LM3S Games and Demos&lt;/b&gt; image contains a build for the TI
+  EK-LM3Sxxxx boards that have an OLED display. Just flash it, press the
+  reset button on the kit and select the options you want on the display
+  menu. To go back to the menu after running an example, press reset.&lt;/li&gt;
+&lt;/ul&gt;
+  
+&lt;table class=&quot;table_center&quot;&gt;
+&lt;tbody&gt;
+&lt;tr&gt;
+&lt;th&gt;Build Description&lt;/th&gt;
+&lt;th&gt;Version&lt;/th&gt;
+&lt;th&gt;MCU&lt;/th&gt;
+&lt;th&gt;Board&lt;/th&gt;
+&lt;th&gt;Image file&lt;/th&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;LM3S Games and Demos&lt;/td&gt;
+&lt;td&gt;v0.9&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S8962.html">http://www.luminarymicro.com/products/LM3S8962.html</A>&quot;&gt;LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html</A>&quot;&gt;EK-LM3S8962&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/lm3s_games.bin">http://prdownload.berlios.de/elua/lm3s_games.bin</A>&quot;&gt;lm3s_games.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/tbody&gt;
+&lt;/table&gt;
+&lt;p/&gt;
 &lt;a name=&quot;source&quot; /&gt;&lt;h3&gt;Source code&lt;/h3&gt;
 &lt;p&gt;If all you want is to take a quick peek at &lt;b&gt;eLua&lt;/b&gt;'s source code, but you don't need to download it, it's probably enough to use the 
 &lt;a href=&quot;<A HREF="http://svn.berlios.de/wsvn/elua">http://svn.berlios.de/wsvn/elua</A>&quot;&gt;BerliOS WebSVN interface&lt;/a&gt;. You can browse through the complete source of &lt;b&gt;eLua&lt;/b&gt; using this method.&lt;br /&gt;
@@ -143,8 +202,8 @@
 &lt;th&gt;Source code archive&lt;/th&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6.tgz">http://prdownload.berlios.de/elua/elua0.6.tgz</A>&quot;&gt;eLua 0.6&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;0.7&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.7.tgz">http://prdownload.berlios.de/elua/elua0.7.tgz</A>&quot;&gt;eLua 0.7&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;&lt;/table&gt;
 &lt;a name=&quot;svnpublic&quot; /&gt;&lt;h2&gt;SVN public repository (anonymous read-only mode)&lt;/h2&gt;

Modified: branches/eagle_mmc/doc/en/examples.html
===================================================================
--- branches/eagle_mmc/doc/en/examples.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/examples.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -52,7 +52,7 @@
 &lt;br /&gt;
 
 &lt;h3&gt;dualpwm.lua: because a single LED is just not enough&lt;/h3&gt;
-&lt;p&gt;&lt;strong&gt;Runs on: &lt;/strong&gt;MOD711&lt;/p&gt;
+&lt;p&gt;&lt;strong&gt;Runs on: &lt;/strong&gt;MOD711, ET-STM32&lt;/p&gt;
 &lt;p&gt;&lt;strong&gt;Description: &lt;/strong&gt;My &lt;a href=&quot;<A HREF="http://www.sctec.com.br/content/view/101/30/">http://www.sctec.com.br/content/view/101/30/</A>&quot;&gt;MOD711 board&lt;/a&gt; needed a
 &quot;motherboard&quot; for a few components (mainly the RS232-TTL level converter and a reset button) so I also added two LEDs to it, connected
 to two different PWM channels. With this program, the two LEDs fade at the same type, but in different directions.&lt;/p&gt;

Modified: branches/eagle_mmc/doc/en/faq.html
===================================================================
--- branches/eagle_mmc/doc/en/faq.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/faq.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -15,6 +15,7 @@
   &lt;li&gt;&lt;a href=&quot;#windows&quot;&gt;All your tutorials give instructions on how to compile eLua under Linux, yet you seem to use a lot of Windows tools. 
   How come?&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;#cygwin&quot;&gt;Will you ever post instructions about how to compile toolchains under Cygwin in Windows?&lt;/a&gt;&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;#wincomp&quot;&gt;Is it possible to compile eLua under Windows?&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;#bytecode&quot;&gt;I know that Lua can be compiled to bytecode, so I compiled one of the eLua examples with luac and tried to run it on 
   my eLua board, but it didn't work. Is this a bug in eLua?&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;#outofmemory&quot;&gt;I get &quot;out of memory&quot; errors when I run my Lua programs, what should I do?&lt;/a&gt;&lt;/li&gt;
@@ -78,8 +79,8 @@
   would increase the code size and complexity too much. These are some caveats that come to mind (note that these are only a few examples, the complete 
   list is much longer):&lt;/p&gt;
 &lt;ul&gt;
-  &lt;li&gt;&lt;b&gt;timers&lt;/b&gt;: from all the platforms on which &lt;b&gt;eLua&lt;/b&gt; runs, only the Luminary Cortex CPUs has rock solid 32-bit timers. You can do pretty much 
-  everything you need with them. All the other platforms have 16-bit timers, which imposes some limits on the range of delays you can achieve with them. 
+  &lt;li&gt;&lt;b&gt;timers&lt;/b&gt;: some CPUs, like the Luminary Cortex CPUs, have rock solid 32-bit timers. You can do pretty much 
+  everything you need with them. Most platforms have only 16-bit timers though, which imposes some limits on the range of delays you can achieve with them. 
   Make sure to use tmr.mindelay(id) and tmr.maxdelay(id) to check the actual resolution of your timers, and adapt your code accordingly. To 'compensate' 
   for this, it's not possible to change the base timer frequency on the Cortex CPUs, but it is possible on most other platforms :) So be sure to also check 
   the result of tmr.setclock(id)&lt;/li&gt;
@@ -114,6 +115,9 @@
   over Windows when it comes to developing applications. Also, I noticed that the GNU based toolchains are noticeable slower on Cygwin than on Linux, so 
   experimenting with them can prove frustrating. Also, compiling under Linux and Cygwin should be quite similar,so try starting from my Linux based 
   tutorials, they might work as well on Cygwin.&lt;/p&gt;
+  
+&lt;a name =&quot;wincomp /&quot;&gt;&lt;h2&gt;Is it possible to compile eLua under Windows?&lt;/h2&gt;
+&lt;p&gt;Starting with version 0.7, compiling &lt;b&gt;eLua&lt;/b&gt; under Windows is officialy supported, check &lt;a href=&quot;building_win.html&quot;&gt;here&lt;/a&gt; for details.&lt;/p&gt;
 
 &lt;a name=&quot;bytecode&quot; /&gt;&lt;h2&gt;I know that Lua can be compiled to bytecode, so I compiled one of the eLua examples with luac and tried to run it on my eLua
   board, but it didn't work. Is this a bug in eLua?&lt;/h2&gt;

Modified: branches/eagle_mmc/doc/en/news.html
===================================================================
--- branches/eagle_mmc/doc/en/news.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/news.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -2,15 +2,19 @@
 
 &lt;h3&gt;eLua Project News&lt;/h3&gt;
 
-&lt;h2&gt;##TODO ?? November 2009&lt;/h2&gt;
-&lt;p&gt;Version ##TODO is released. The main changes are described below and the
-full list can be seen in our Version History page:&lt;/p&gt;
+&lt;h2&gt;?? ????? 20??&lt;/h2&gt;
+&lt;p&gt;Version 0.7 is released. The main changes are described below:&lt;/p&gt;
 &lt;ul&gt;
-  &lt;li&gt;Added support for STR-E912 board&lt;/li&gt;
-  &lt;li&gt;More PT content&lt;/li&gt;
-  &lt;li&gt;Added the Lua EGC (Emergency Garbage Collection) patch&lt;/li&gt;
-  &lt;li&gt;Please check our &lt;a href=&quot;versionhistory.html&quot;&gt;Version History page&lt;/a&gt;
-  to see the full details of the changes.&lt;/li&gt;
+  &lt;li&gt;Added the &lt;a href=&quot;<A HREF="http://lua-users.org/wiki/EmergencyGarbageCollector">http://lua-users.org/wiki/EmergencyGarbageCollector</A>&quot;&gt;Lua EGC&lt;/a&gt; (Emergency Garbage Collection) patch&lt;/li&gt;
+  &lt;li&gt;???? Added generic and portable SD/MMC Card FAT File System support&lt;/li&gt;
+  &lt;li&gt;Added &lt;a href=&quot;<A HREF="http://fanplastic.org/2009/05/11/lua-rpc/">http://fanplastic.org/2009/05/11/lua-rpc/</A>&quot;&gt;LuaRPC&lt;/a&gt; support (remote procedure calls in the embedded world)&lt;/li&gt;
+  &lt;li&gt;New eLua shell cat/type command, lists text file contents&lt;/li&gt;
+  &lt;li&gt;Added support for &lt;a href=&quot;<A HREF="http://www.olimex.com/dev/str-e912.html">http://www.olimex.com/dev/str-e912.html</A>&quot;&gt;Olimex STR-E912&lt;/a&gt; board, ST Electronics STR912FW44X MCU&lt;/li&gt;
+  &lt;li&gt;Added support for the &lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/eluademoboard">http://www.giga.puc-rio.br/site/embedded/eluademoboard</A>&quot;&gt;PUC-Rio  eLua&lt;/a&gt; board, NXP LPC2468 MCU&lt;/li&gt;
+  &lt;li&gt;Compiling &lt;b&gt;eLua&lt;/b&gt; under Windows is now officialy supported, tutorial added &lt;a href=&quot;build_win.html&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
+  &lt;li&gt;New ROMFS build modes: compress and compile (see &lt;a href=&quot;arch_romfs.html#mode&quot;&gt;here&lt;/a&gt; for details)&lt;/li&gt;
+  &lt;li&gt;More portuguese content translations&lt;/li&gt;
+  &lt;li&gt;ADC module and doc enhancements&lt;/li&gt;
 &lt;/ul&gt;
 
 &lt;h2&gt;06 October 2009&lt;/h2&gt;
@@ -21,6 +25,7 @@
   &lt;li&gt;Documentation available offline&lt;/li&gt;
   &lt;li&gt;Added support for AVR32 CPUs&lt;/li&gt;
   &lt;li&gt;Added support for STM32 Cortex-M3 CPUs&lt;/li&gt;
+  &lt;li&gt;Added support for LM3S9Bxx Cortex-M2 CPUs&lt;/li&gt;
   &lt;li&gt;Added ADC module with support for moving average filters&lt;/li&gt;
   &lt;li&gt;Added support for multiple toolchains&lt;/li&gt;
   &lt;li&gt;Added an ls (or dir) shell command&lt;/li&gt;
@@ -37,7 +42,7 @@
 the event. eLua demos will also be presented in the second day of the event.
 The activities on October 7th will be dedicated to the use of Lua in games,
 as part of Lua Games 2009, a pre-event of SBGames 2009.
-We will also proudly offer a &quot;little surprise&quot; for the &lt;b&gt;eLua comunity&lt;/b&gt;.&lt;/p&gt;
+We will also proudly offer a &quot;little surprise&quot; for the &lt;b&gt;eLua&lt;/b&gt; comunity.&lt;/p&gt;
 
 &lt;h2&gt;02 February 2009&lt;/h2&gt;
 &lt;p&gt;We know that we haven't had an official release in a while now, but

Modified: branches/eagle_mmc/doc/en/status.html
===================================================================
--- branches/eagle_mmc/doc/en/status.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/status.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,11 +1,12 @@
 $$HEADER$$
-&lt;a name=&quot;platforms&quot; /&gt;&lt;h3&gt;eLua platforms and modules status&lt;/h3&gt;
-&lt;p&gt;The current status of &lt;b&gt;eLua&lt;/b&gt; is given by the list of the
+&lt;p&gt;
+The current status of &lt;b&gt;eLua&lt;/b&gt; is given by the list of the
 currently supported platforms, together with a list of
 modules-per-platform and their development phase. For better
 formatting, the lists are organized as tables that use the graphical
-notation given below:&lt;/p&gt;
-&lt;table style=&quot;width: 325px;&quot; class=&quot;table_center&quot;&gt;
+notation given below:
+&lt;/p&gt;
+&lt;table style=&quot;width: 620px;&quot; class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;th style=&quot;text-align: center;&quot;&gt;Symbol&lt;/th&gt;
@@ -16,8 +17,8 @@
 &lt;td style=&quot;text-align: left;&quot;&gt;Implemented and tested&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;Implemented, not tested&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Implemented, needs more testing&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
@@ -29,39 +30,54 @@
 &lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
-
-&lt;p&gt;The list of CPUs/boards currently supported by &lt;b&gt;eLua&lt;/b&gt; is given below:&lt;/p&gt;
+&lt;p/&gt;
+&lt;a name=&quot;platforms&quot; /&gt;&lt;h3&gt;eLua suported platforms&lt;/h3&gt;
+&lt;p&gt;The list of CPUs and boards currently supported by &lt;b&gt;eLua&lt;/b&gt; is given below:&lt;/p&gt;
 &lt;table style=&quot;text-align: left; width: 620px;&quot; class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
   &lt;th style=&quot;text-align: left;&quot;&gt;CPU&lt;/th&gt;
   &lt;th style=&quot;text-align: center;&quot;&gt;Architecture&lt;/th&gt;
   &lt;th style=&quot;text-align: center;&quot;&gt;Platform name&lt;/th&gt;
-  &lt;th style=&quot;text-align: center;&quot;&gt;Supported boards&lt;/th&gt;
+  &lt;th style=&quot;text-align: center;&quot;&gt; Supported boards &lt;/th&gt;
   &lt;th style=&quot;text-align: center;&quot;&gt;Status&lt;/th&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S8962.html">http://www.luminarymicro.com/products/LM3S8962.html</A>&quot;&gt;LM3S8962&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;Cortex-M3&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;lm3s&lt;/td&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html</A>&quot;&gt;EKx-LM3S8962&lt;/a&gt;&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s8962_can_ethernet_evaluation_kit.html</A>&quot;&gt;EK-LM3S8962&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965.html">http://www.luminarymicro.com/products/lm3s6965.html</A>&quot;&gt;LM3S6965&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;Cortex-M3&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;lm3s&lt;/td&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html</A>&quot;&gt;EKx-LM3S6965&lt;/a&gt;&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html">http://www.luminarymicro.com/products/lm3s6965_ethernet_evaluation_kit.html</A>&quot;&gt;EK-LM3S6965&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6918.html">http://www.luminarymicro.com/products/lm3s6918.html</A>&quot;&gt;LM3S6918&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;Cortex-M3&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;lm3s&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.micromint.com/index.php/SBC/eagle-100.html">http://www.micromint.com/index.php/SBC/eagle-100.html</A>&quot;&gt;Eagle 100&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/lm3s6918.html">http://www.luminarymicro.com/products/lm3s6918.html</A>&quot;&gt;LM3S9B92&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;Cortex-M3&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/ek-lm3s9b92.html">http://www.luminarymicro.com/products/ek-lm3s9b92.html</A>&quot;&gt;EK-LM3S9B92&lt;/a&gt;&lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/product_card.asp?part_id=4117">http://www.atmel.com/dyn/products/product_card.asp?part_id=4117</A>&quot;&gt;AT32UC3A0512&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;AVR32&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;AVR32&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114">http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114</A>&quot;&gt;ATEVK1100&lt;/a&gt;&lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755">http://www.atmel.com/dyn/products/Product_card.asp?part_id=3755</A>&quot;&gt;AT91SAM7X256&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;ARM7TDMI&lt;/td&gt;
   &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;at91sam7x&lt;/td&gt;
@@ -73,61 +89,77 @@
   &lt;td&gt;ARM7TDMI&lt;/td&gt;
   &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;at91sam7x&lt;/td&gt;
   &lt;td&gt;None&lt;/td&gt;
-  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (generic)&lt;/a&gt;&lt;/td&gt;
-  &lt;td&gt;x86&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;i386&lt;/td&gt;
-  &lt;td&gt;PCs/emulators&lt;/td&gt;
+  &lt;td&gt;&lt;a
+  href=&quot;<A HREF="http://www.nxp.com/#/pip/pip=[pip=LPC1768_66_65_64_2">http://www.nxp.com/#/pip/pip=[pip=LPC1768_66_65_64_2</A>]|pp=[t=pip,i=LPC1768_66_65_64_2]&quot;&gt;LPC1768&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;Cortex-M3&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC17xx&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://hackaday.com/2009/11/21/review-mbed-nxp-lpc1768-microcontroller/">http://hackaday.com/2009/11/21/review-mbed-nxp-lpc1768-microcontroller/</A>&quot;&gt;mbed&lt;/a&gt;&lt;/td&gt;  
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
-  &lt;td&gt;ARM966E-S&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;str9&lt;/td&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.hitex.com/index.php?id=383">http://www.hitex.com/index.php?id=383</A>&quot;&gt;STR9-comStick&lt;/a&gt;
-      &lt;a href=&quot;<A HREF="http://www.olimex.com/dev/str-e912.html">http://www.olimex.com/dev/str-e912.html</A>&quot;&gt;STR-E912&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;&lt;a
+  href=&quot;<A HREF="http://www.nxp.com/#/pip/pip=[pip=LPC2468_4">http://www.nxp.com/#/pip/pip=[pip=LPC2468_4</A>]|pp=[t=pip,i=LPC2468_4]&quot;&gt;LPC2468&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;ARM7TDMI&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC24xx&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/eluademoboard">http://www.giga.puc-rio.br/site/embedded/eluademoboard</A>&quot;&gt;PUC-Rio Demo Board&lt;/a&gt;&lt;/td&gt;  
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html">http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html</A>&quot;&gt;LPC2888&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;ARM7TDMI&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;lpc288x&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC288x&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/lpc-h2888.html">http://www.olimex.com/dev/lpc-h2888.html</A>&quot;&gt;LPC-H2888&lt;/a&gt;&lt;/td&gt;  
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR711FR2.html">http://www.st.com/mcu/devicedocs-STR711FR2.html</A>&quot;&gt;STR711FR2&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;ARM7TDMI&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;str7&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR7&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.sctec.com.br/content/view/101/30/">http://www.sctec.com.br/content/view/101/30/</A>&quot;&gt;MOD711&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/product_card.asp?part_id=4117">http://www.atmel.com/dyn/products/product_card.asp?part_id=4117</A>&quot;&gt;AT32UC3A0512&lt;/a&gt;&lt;/td&gt;
-  &lt;td&gt;AVR32&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;avr32&lt;/td&gt;
-  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114">http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114</A>&quot;&gt;ATEVK1100&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;ARM966E-S&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR9&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.hitex.com/index.php?id=383">http://www.hitex.com/index.php?id=383</A>&quot;&gt;STR9-comStick&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;ARM966E-S&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR9&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/str-e912.html">http://www.olimex.com/dev/str-e912.html</A>&quot;&gt;STR-E912&lt;/a&gt;&lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html">http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html</A>&quot;&gt;STM32F103ZE&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;Cortex-M3&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;stm32&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STM32&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html">http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html</A>&quot;&gt;STM3210E-EVAL&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103RE-110.html">http://www.st.com/mcu/devicedocs-STM32F103RE-110.html</A>&quot;&gt;STM32F103RE&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;Cortex-M3&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;stm32&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STM32&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.futurlec.com/ET-STM32_Stamp.shtml">http://www.futurlec.com/ET-STM32_Stamp.shtml</A>&quot;&gt;ET-STM32 Stamp&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (generic)&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;x86&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;i386&lt;/td&gt;
+  &lt;td&gt;PCs/emulators&lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
-
+&lt;p/&gt;
+&lt;a name=&quot;gen_modules&quot; /&gt;&lt;h3&gt;eLua modules&lt;/h3&gt;
 &lt;p&gt;The following table shows a list of the generic modules currently implemented (and planned to be implemented) in &lt;b&gt;eLua&lt;/b&gt;.&lt;/p&gt;
 &lt;table style=&quot;text-align: left; width: 620px;&quot; class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
@@ -138,27 +170,27 @@
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;pio&lt;/td&gt;
-&lt;td&gt;Programmable Input/Output&lt;/td&gt;
+&lt;td&gt;programmable input/output&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;tmr&lt;/td&gt;
-&lt;td&gt;timers&lt;/td&gt;
+&lt;td&gt;periodic timer / counters&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;pwm&lt;/td&gt;
-&lt;td&gt;Pulse Width Modulation&lt;/td&gt;
+&lt;td&gt;pulse width modulation&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;uart&lt;/td&gt;
-&lt;td&gt;Universal Asynchronous Receiver Transmitter&lt;/td&gt;
+&lt;td&gt;universal asynchronous receiver transmitter&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;spi&lt;/td&gt;
-&lt;td&gt;Serial Peripheral Interface&lt;/td&gt;
+&lt;td&gt;serial peripheral interface&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;net&lt;/td&gt;
@@ -167,10 +199,15 @@
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;adc&lt;/td&gt;
-&lt;td&gt;Analog to Digital Converter&lt;/td&gt;
+&lt;td&gt;analog to digital converter&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;dac&lt;/td&gt;
+&lt;td&gt;digital to analog converter&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;cpu&lt;/td&gt;
 &lt;td&gt;low level system access&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
@@ -202,7 +239,7 @@
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;i2c&lt;/td&gt;
-&lt;td&gt;I2C bus access module&lt;/td&gt;
+&lt;td&gt;inter-integrated circuit protocol&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
@@ -212,16 +249,67 @@
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;can&lt;/td&gt;
-&lt;td&gt;Controller Area Network&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td&gt;controller area network&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
+&lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;rpc&lt;/td&gt;
-&lt;td&gt;remote procedure call / remote control&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
+&lt;td&gt;remote procedure call&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;dma&lt;/td&gt;
+&lt;td&gt;direct memory access&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;i2s&lt;/td&gt;
+&lt;td&gt;inter-IC sound&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;mmc&lt;/td&gt;
+&lt;td&gt;sd/mmc card FAT file system&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;disp&lt;/td&gt;
+&lt;td&gt;lcd, oled and other displays support&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;int&lt;/td&gt;
+&lt;td&gt;interrupt service routines&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
-
+&lt;p&gt;
+For some platforms, a number of platform dependent modules are
+implemented (or in the works) and are listed below. To understand the
+difference between generic modules and platform specific modules, check
+&lt;a href=&quot;arch_overview.html&quot;&gt;the eLua architecture page&lt;/a&gt;.
+&lt;/p&gt;
+&lt;table style=&quot;width: 620px; margin-bottom: 10px;&quot; class=&quot;table_center&quot;&gt;
+&lt;tbody&gt;
+&lt;tr&gt;
+  &lt;th style=&quot;text-align: left;&quot;&gt;Name&lt;/th&gt;
+  &lt;th style=&quot;text-align: center;&quot;&gt;Description&lt;/th&gt;
+  &lt;th style=&quot;text-align: center;&quot;&gt;Boards&lt;/th&gt;
+  &lt;th style=&quot;text-align: center;&quot;&gt;Status&lt;/th&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;disp&lt;/td&gt;
+  &lt;td&gt;OLED display support&lt;/td&gt;
+  &lt;td&gt;EK-LM3S8962&lt;br&gt;
+      EK-LM3S6965
+  &lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/tbody&gt;
+&lt;/table&gt;
+&lt;p/&gt;
+&lt;a name=&quot;plat_modules&quot; /&gt;&lt;h3&gt;eLua modules x MCUs&lt;/h3&gt;
 &lt;p&gt;The relationship between a module and its implementation on a particular platform is given in the next table.&lt;/p&gt;
 &lt;table style=&quot;text-align: left; width: 620px;&quot; class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
@@ -240,23 +328,29 @@
 &lt;th rowspan=&quot;2&quot;&gt;bit&lt;/th&gt;
 &lt;th rowspan=&quot;2&quot;&gt;pack&lt;/th&gt;
 &lt;th rowspan=&quot;2&quot;&gt;can&lt;/th&gt;
+&lt;th rowspan=&quot;2&quot;&gt;i2c&lt;/th&gt;
+&lt;th rowspan=&quot;2&quot;&gt;rpc&lt;/th&gt;
+&lt;th rowspan=&quot;2&quot;&gt;mmc&lt;/th&gt;
 &lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;MCU&lt;/td&gt;
 &lt;/tr&gt;&lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S8962&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;width: 16px; height: 16px;&quot; src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;width: 16px; height: 16px;&quot; src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;width: 16px; height: 16px;&quot; src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S6965&lt;/td&gt;
@@ -273,6 +367,9 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S6918&lt;/td&gt;
@@ -289,24 +386,47 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;i386&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LM3S9B92&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;width: 16px; height: 16px;&quot; src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;width: 16px; height: 16px;&quot; src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;height: 16px; width: 16px;&quot; src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;height: 16px; width: 16px;&quot; src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;AT32UC3A0512&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt; &lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;  &lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt; &lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;AT91SAM7X256&lt;/td&gt;
@@ -323,7 +443,9 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;AT91SAM7X512&lt;/td&gt;
@@ -340,11 +462,12 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR912FAW44&lt;/td&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC1768&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
@@ -358,10 +481,30 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC2468&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot; &gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC2888&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
@@ -376,7 +519,9 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR711FR2&lt;/td&gt;
@@ -393,27 +538,31 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;AT32UC3A0512&lt;/td&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR912FAW44&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt; &lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;  &lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt; &lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot; &gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
-
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: testing&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
-&lt;tr&gt;&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STM32F103ZE&lt;/td&gt;
+&lt;tr&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STM32F103ZE&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt; &lt;/td&gt;
@@ -427,8 +576,9 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
-
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STM32F103RE&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
@@ -444,34 +594,32 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
-
-
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
-
-&lt;/tbody&gt;
-&lt;/table&gt;
-
-&lt;p&gt;For some platforms, a number of platform dependent modules are
-implemented (or in the works) and are listed below. To understand the
-difference between generic modules and platform specific modules, check
-&lt;a href=&quot;arch_overview.html&quot;&gt;the eLua architecture page&lt;/a&gt;.&lt;/p&gt;
-&lt;table style=&quot;width: 620px; margin-bottom: 10px;&quot; class=&quot;table_center&quot;&gt;
-&lt;tbody&gt;
 &lt;tr&gt;
-  &lt;th style=&quot;text-align: left;&quot;&gt;Name&lt;/th&gt;
-  &lt;th style=&quot;text-align: center;&quot;&gt;Description&lt;/th&gt;
-  &lt;th style=&quot;text-align: center;&quot;&gt;Boards&lt;/th&gt;
-  &lt;th style=&quot;text-align: center;&quot;&gt;Status&lt;/th&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;i386&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;height: 16px; width: 16px;&quot; src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img style=&quot;height: 16px; width: 16px;&quot; src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_applicable.png&quot; alt=&quot;Status: not applicable&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
-&lt;tr&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;disp&lt;/td&gt;
-  &lt;td&gt;OLED display support&lt;/td&gt;
-  &lt;td&gt;EKx-LM3S8962&lt;br&gt;EKx-LM3S6965&lt;/td&gt;
-  &lt;td&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
-&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
-
+&lt;p/&gt;
 &lt;a name=&quot;roadmap&quot; /&gt;&lt;h3&gt;Status of features and roadmap&lt;/h3&gt;
 &lt;p&gt;The following table shows the status of some existing and planned &lt;b&gt;eLua&lt;/b&gt; features.&lt;/p&gt;
 &lt;table style=&quot;text-align: left; width: 620px;&quot; class=&quot;table_center&quot;&gt;
@@ -484,23 +632,44 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td&gt;Various Lua examples running properly&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot; &gt;Embedded HTTP web server&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot; &gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Various Lua examples and eLua apps running properly&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;Choose floating point or integer Lua&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Lua floating point or integer number selection&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;XMODEM transfer over UART&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;eLua FP module (for integer Lua)&lt;/td&gt;
+&lt;td style=&quot;color: rgb(255, 102, 0); text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;
+&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;XMODEM protocol support for console file transfer&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;ZMODEM protocol support for console file transfer&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
 &lt;td style=&quot;text-align: left;&quot;&gt;Embedded ROM (Flash) file system&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;Terminal / Console over UART and Ethernet&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;FAT File System layer for mmc/sd cards&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Minimal R/W file system&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Terminal / Console over UART or Ethernet&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
@@ -516,24 +685,23 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;FAT File System layer for mmc/sd cards&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;<A HREF="http://lua-users.org/wiki/EmergencyGarbageCollector">http://lua-users.org/wiki/EmergencyGarbageCollector</A>&quot;&gt;eLua EGC (Emergency Garbage Collection) patch&lt;/a&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;Minimal R/W file system&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Embedded text editor&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;eLua FP module (for integer Lua)&lt;/td&gt;
-&lt;td style=&quot;color: rgb(255, 102, 0); text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;
-&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Embedded help/doc subsystem&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;Embedded text editor&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Lua debugging (remote/on target)&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;Lua debugging (remote/on target)&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;Host (PC) File Sharing&lt;/td&gt;
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
@@ -541,12 +709,9 @@
 &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot;&gt;GUI eLua build configuration tool&lt;br&gt;&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_implemented.png&quot; alt=&quot;Status: not implemented&quot; /&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: left;&quot;&gt;eLua web build service&lt;br&gt;&lt;/td&gt;
+&lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_not_tested.png&quot; alt=&quot;Status: not tested&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
-&lt;tr&gt;
-&lt;td style=&quot;text-align: left;&quot; &gt;Embedded HTTP web server&lt;/td&gt;
-&lt;td style=&quot;text-align: center;&quot; &gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
 

Modified: branches/eagle_mmc/doc/en/using.html
===================================================================
--- branches/eagle_mmc/doc/en/using.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/using.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,13 +1,16 @@
 $$HEADER$$
 &lt;h3&gt;Using eLua&lt;/h3&gt;
-&lt;p&gt; So, you already &lt;a href=&quot;building.html&quot;&gt;built&lt;/a&gt; and &lt;a href=&quot;installing.html&quot;&gt;installed&lt;/a&gt; &lt;b&gt;eLua&lt;/b&gt;, and now it is time to (finally) have some fun with it :) 
-  You can compile &lt;b&gt;eLua&lt;/b&gt; with either console over UART (by far the most popular) and console over TCP/IP (still experimental, but working quite well), so there are two different usage 
-  scenarios for this (see &lt;a href=&quot;building.html&quot;&gt;building eLua&lt;/a&gt; for details on how to select serial or TCP/IP console).&lt;/p&gt;
+&lt;p&gt;So, you already &lt;a href=&quot;building.html&quot;&gt;built&lt;/a&gt; and &lt;a href=&quot;installing.html&quot;&gt;installed&lt;/a&gt; 
+&lt;b&gt;eLua&lt;/b&gt;, now it is time to (finally) have some fun with it :) 
+  You can compile &lt;b&gt;eLua&lt;/b&gt; with either console over UART (the default and by far the most popular)
+  or console over TCP/IP (still experimental, but working quite well). See &lt;a href=&quot;building.html&quot;&gt;building eLua&lt;/a&gt; for details on how to select
+  the second option above.&lt;/p&gt;
 &lt;a name=&quot;uart&quot;&gt;&lt;h3&gt;Using eLua over serial connections&lt;/h3&gt;&lt;/a&gt;
 &lt;p&gt;All you need to use &lt;b&gt;eLua&lt;/b&gt; over a serial connection is your &lt;b&gt;eLua&lt;/b&gt;
 board connected to a PC running a terminal emulator program.&lt;br&gt;If
-you're using Windows, I strongly recommend &lt;a  href=&quot;<A HREF="http://www.ayera.com/teraterm/">http://www.ayera.com/teraterm/</A>&quot;&gt;TeraTerm&lt;/a&gt;.
-It's a freeware, it's very powerful and also easy to use. The native Hyper Terminal progam can do too, but give TeraTerm a chance, it's much better than HyperTerm IMO.&lt;br&gt;On
+you're using Windows, we recommend &lt;a  href=&quot;<A HREF="http://www.ayera.com/teraterm/">http://www.ayera.com/teraterm/</A>&quot;&gt;TeraTerm&lt;/a&gt;.
+It's a freeware, it's very powerful and also easy to use. The native Hyper Terminal progam can do
+too, as well as any most other terminal emulator programs.&lt;br&gt;On
 Linux,
 you'll probably be stucked with minicom. It is not exactly intuitive
 and it runs in text mode, but it's still very powerful. If you
@@ -22,35 +25,43 @@
 
 &lt;p&gt;Also, depending on the type of your board, you'll need some way to
 connect the board to a serial port on your PC or to USB if you're
-using an USB to serial converter. For example, as already explained &lt;a href=&quot;installing_lm3s.html&quot;&gt;here&lt;/a&gt;,
+using an USB to serial converter. For example (as already explained &lt;a
+href=&quot;installing_lm3s.html&quot;&gt;here)&lt;/a&gt;,
 the USB port on the LM3Sxxxx boards is dual, so you can use it as an USB
 to serial converter after downloading your firmware, thus you don't
 need any other type of connection. The same is true for the
-STR9-comStick board. On the other hand, for the SAM7-EX256 board you'll
+STR9-Comstick board. On the other hand, for the SAM7-EX256 board you'll
 need to connect a serial cable to the &quot;RS232&quot; connector, provided that
 the jumpers are already set as explained &lt;a href=&quot;installing_at91sam7x.html&quot;&gt;here&lt;/a&gt; and on the MOD711 you will need to add an RS232 converter chip.
-There's no universal rule here, it all depends on your board.
+There's no universal rule here, it all depends on your board. Feel free to
+ask if you need help in our &lt;a href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-dev">https://lists.berlios.de/mailman/listinfo/elua-dev</A>&quot;&gt;discussion
+list&lt;/a&gt;
 &lt;/p&gt;
 &lt;a name=&quot;tcpip&quot;&gt;&lt;h3&gt;Using eLua over TCP/IP connections&lt;/h3&gt;&lt;/a&gt;
 &lt;p&gt;Things are even easier if you decide to enable console over TCP/IP:&lt;/p&gt;
 &lt;ul&gt;
-  &lt;li&gt;make sure you know the address of your board. If you enabled static IPs (see &lt;a href=&quot;building.html&quot;&gt;building&lt;/a&gt;) remember what you chose for the static IP; if DHCP is used instead, your
-      DHCP server should've added the address of the &lt;b&gt;eLua&lt;/b&gt; board to your DNS. The board name is always &quot;elua&quot;, so if you execute &quot;ping elua&quot; from a shell you should see that the board is
+  &lt;li&gt;make sure you know the address of your board. If you enabled static IPs (see &lt;a href=&quot;building.html&quot;&gt;building&lt;/a&gt;) remember what you chose for the static IP; if DHCP
+  (the default) is used instead, your
+      DHCP server should've added the address of the &lt;b&gt;eLua&lt;/b&gt; board to your DNS. The board name is always &quot;elua&quot;
+      in our code examples too, so if you execute &quot;ping elua&quot; from a shell you should see that the board is
       alive.&lt;/li&gt;
-  &lt;li&gt;telnet to the address of the board (or simply &quot;telnet elua&quot; if DHCP is used), and you'll be greeted with the shell prompt (if the shell is enabled, see the next paragraph for details). 
+  &lt;li&gt;telnet to the address of the board (or simply &quot;telnet elua&quot; if DHCP is used), and you'll be greeted with the shell prompt (if the shell is
+      enabled; see the next paragraph for details). 
   Note that you can only have an active telnet session to the &lt;b&gt;eLua&lt;/b&gt; board at a given time.&lt;/li&gt;
 &lt;/ul&gt;
 
-&lt;p&gt;If you're under Windows, make sure you're using a proper telnet client, which basically means &quot;just about everything &lt;b&gt;but&lt;/b&gt; the build-in telnet client&quot;.
+&lt;p&gt;If you're under Windows, make sure you're using a proper telnet client, which basically means &quot;just about everything &lt;b&gt;but&lt;/b&gt; the
+built-in telnet client&quot;.
    &lt;a href=&quot;<A HREF="http://www.chiark.greenend.org.uk/~sgtatham/putty/">http://www.chiark.greenend.org.uk/~sgtatham/putty/</A>&quot;&gt;PuTTY&lt;/a&gt; is a very good and popular choice.&lt;/p&gt;
 
 &lt;a name=&quot;pc&quot;&gt;&lt;h3&gt;Using standalone eLua on PC&lt;/h3&gt;&lt;/a&gt;
 &lt;p&gt;If you build &lt;b&gt;eLua&lt;/b&gt; for the i386 platform, you can boot your PC directly in &lt;b&gt;eLua&lt;/b&gt;! No underlying OS, nothing but plain &lt;b&gt;eLua&lt;/b&gt;. It won't have any actual peripherals to 
-access, but it can use the &lt;b&gt;term&lt;/b&gt; module to run &lt;i&gt;hangman.lua&lt;/i&gt; and &lt;i&gt;life.lua&lt;/i&gt;, as well as other samples, which makes it a nice demo :) Follow &lt;a href=&quot;installing_i386.html&quot;&gt;
+access, but it can use the &lt;b&gt;term&lt;/b&gt; module to run &lt;i&gt;hangman.lua&lt;/i&gt; and &lt;i&gt;life.lua&lt;/i&gt;, as well as other
+code examples and games, which makes it a nice demo :) Follow &lt;a href=&quot;installing_i386.html&quot;&gt;
 this link&lt;/a&gt; for specific informations about the i386 port. &lt;/p&gt;
 
 &lt;a name=&quot;shell&quot;&gt;&lt;h3&gt;The eLua shell&lt;/h3&gt;&lt;/a&gt;
-&lt;p&gt;No matter what's your physical connection (serial, TCP/IP or you PC's monitor after booting &lt;b&gt;eLua&lt;/b&gt;), after you setup the PC-&lt;b&gt;eLua&lt;/b&gt; board connection (if applicable) and press 
+&lt;p&gt;No matter what's your physical connection (serial, TCP/IP or you PC's monitor after booting &lt;b&gt;eLua&lt;/b&gt;), after you setup the PC-&lt;b&gt;eLua&lt;/b&gt; board connection and press 
   the &quot;RESET&quot; button on your board or simply press ENTER if you're using the serial connection, you should see the &lt;b&gt;eLua&lt;/b&gt; shell prompt (if you enabled the shell in your build, as described &lt;a href=&quot;building.html&quot;&gt;here&lt;/a&gt;). The shell is a simple
   interactive command interpreter that allows you to:&lt;/p&gt;
 &lt;ul&gt;
@@ -59,23 +70,24 @@
   &lt;li&gt;run a Lua program from the eLua File System&lt;/li&gt;
   &lt;li&gt;upload a Lua source file via XMODEM and execute in on board&lt;/li&gt;
   &lt;li&gt;query the eLua version&lt;/li&gt;
-  &lt;li&gt;list files on eLua file systems&lt;/li&gt;
+  &lt;li&gt;list file names and sizes on eLua file systems&lt;/li&gt;
+  &lt;li&gt;list file contents&lt;/li&gt;
 &lt;/ul&gt;
-&lt;p&gt;A detailed description of all the shell commands is given below.&lt;/p&gt;
+&lt;p&gt;A detailed description of the current shell commands is given below.&lt;/p&gt;
 
 &lt;h2&gt;help&lt;/h2&gt;
 &lt;p&gt;Show a list of all shell commands.&lt;/p&gt;
 &lt;h2&gt;ver&lt;/h2&gt;
 &lt;p&gt;Print the version of the &lt;b&gt;eLua&lt;/b&gt; image installed on the board. Currently, the version only increments for official releases, so if there's inter-release code in the
 development tree, this isn't reflected in the version number.&lt;/p&gt;
+
 &lt;h2&gt;recv&lt;/h2&gt;
-
-&lt;p&gt;Allows you to receive a Lua file (either source or compiled bytecode) via
+&lt;p&gt;Allows you to receive from the PC running the terminal emulator program, a Lua file (either source or compiled bytecode) via
 XMODEM and execute it on your board. To use this, your &lt;b&gt;eLua&lt;/b&gt; target image must be built with support for XMODEM 
-(see &lt;a href=&quot;building.html&quot;&gt;building&lt;/a&gt; for details).Also, your terminal emulation program must 
+(see &lt;a href=&quot;building.html&quot;&gt;building&lt;/a&gt; for details). Also, your terminal emulation program must 
 support sending files via the XMODEM protocol. Both XMODEM with checksum and XMODEM with CRC are supported, but only XMODEM with 128 
 byte packets is allowed (XMODEM with 1K packets won't work).
-To use this feature, enter &quot;recv&quot; at the shell prompt. eLua will respond with 
+To use this feature, enter &quot;recv&quot; at the shell prompt. &lt;b&gt;eLua&lt;/b&gt; will respond with 
 &quot;Waiting for file ...&quot;. At this point you can send the file to the eLua board 
 via XMODEM. eLua will receive and execute the file. Don't worry when you see 'C'
 characters suddenly appearing on your terminal after you enter this command, 
@@ -85,32 +97,34 @@
 &lt;/p&gt;
 
 &lt;h2&gt;lua&lt;/h2&gt;
-
-&lt;p&gt;This allows you to start the Lua interpreter, optionally passing command line parameters, just 
+&lt;p&gt;This command allows you to start the Lua interpreter, optionally passing command line parameters, just 
 as you would do from a desktop machine. The command has some
 restrictions:&lt;/p&gt;
-
 &lt;ul&gt;&lt;li&gt;the command line can't be longer than 50 chars&lt;/li&gt;
 &lt;li&gt;character escaping is not implemented. For example, the next command won't work
     because of the ' (simple quotes) escape sequences:
-
 &lt;pre&gt;&lt;code&gt;eLua# lua -e 'print(\'Hello, World!\')' -i
 Press CTRL+Z to exit Lua
 lua: (command line):1: unexpected symbol near ''&lt;/code&gt;&lt;/pre&gt;
-
 &lt;p&gt;However, if you use both '' (simple quotes) and &quot;&quot; (double quotes) for string quotin , it will work:&lt;/p&gt;
-
 &lt;pre&gt;&lt;code&gt;eLua# lua -e 'print(&quot;Hello, World&quot;)' -i
 Press CTRL+Z to exit Lua
 Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
 Hello,World&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;&lt;/ul&gt;
 &lt;p&gt;If you want to execute a file from the &lt;a href=&quot;arch_romfs.html&quot;&gt;ROM file system&lt;/a&gt;, remember to prefix it with &lt;i&gt;/rom&lt;/i&gt;. For example, to execute &lt;b&gt;hello.lua&lt;/b&gt;, do this:&lt;/p&gt;
 &lt;pre&gt;&lt;code&gt;$ lua /rom/hello.lua&lt;/code&gt;&lt;/pre&gt;
+
 &lt;h2&gt;ls or dir&lt;/h2&gt;
-&lt;p&gt;Shows a list of all the files in the filesystems used by &lt;b&gt;eLua&lt;/b&gt; (currently only the ROM file system), as well as their size and the total size of the given file system.&lt;/p&gt;
+&lt;p&gt;Shows a list of all the files in the filesystems used by &lt;b&gt;eLua&lt;/b&gt;, as well as their size and the total size of the given file system.&lt;/p&gt;
+
+&lt;h2&gt;cat or type&lt;/h2&gt;
+&lt;p&gt;Prints the content of (usually text) files on the console.&lt;/p&gt;
+&lt;pre&gt;&lt;code&gt;$ cat &lt;i&gt;filename1&lt;/i&gt; [&lt;i&gt;filename2 filename3 ...&lt;/i&gt;]&lt;/code&gt;&lt;/pre&gt;
+
 &lt;h2&gt;exit&lt;/h2&gt;
 &lt;p&gt;Exits the shell. This only makes sense if &lt;b&gt;eLua&lt;/b&gt; is compiled with terminal support over TCP/IP , as it closes the telnet session to the &lt;b&gt;eLua&lt;/b&gt; board. Otherwise it just
   terminates the shell and blocks forever until you reset your board.&lt;/p&gt;
+
 &lt;a name=&quot;cross&quot;&gt;&lt;h3&gt;Cross-compiling your eLua programs&lt;/h3&gt;&lt;/a&gt;
 &lt;p&gt;&lt;i&gt;Cross-compilation&lt;/i&gt; is the process of compiling a program on one hardware platform for a 
 different hardware platform. For example, the process of compiling the &lt;b&gt;eLua&lt;/b&gt; binary image on
@@ -207,6 +221,102 @@
 &lt;ul&gt;
   &lt;li&gt;write it to &lt;a href=&quot;arch_romfs.html&quot;&gt;the ROM file system&lt;/a&gt; and execute it from there.&lt;/li&gt;
   &lt;li&gt;use the &lt;i&gt;recv&lt;/i&gt; command from &lt;a href=&quot;using.html#shell&quot;&gt;the shell&lt;/a&gt; to upload it to the board using a serial connection.&lt;/li&gt;
+  &lt;li&gt;write it to an sd/mmc card and, if your board supports it, execute it
+  from there.&lt;/li&gt;
 &lt;/ul&gt;
+
+&lt;a name=&quot;rpc&quot;&gt;&lt;h3&gt;Controlling eLua with LuaRPC&lt;/h3&gt;&lt;/a&gt;
+&lt;p&gt;&lt;i&gt;Remote procedure calls&lt;/i&gt; (RPC) allow one program to communicate with another and call functions or subroutines within the second program. For example one might want to programmatically control an array of LEDs connected to an eLua embedded device from a desktop Lua state.  A simple implementation might be a protocol that would allow one to send commands numeric or text-based commands that would cause code to be executed in eLua that would change the state of the LEDs. As one needs new commands to change these LEDs, one would need to upload a new Lua program to handle changing functionality.  In contrast to this ad-hoc method for remote calls, LuaRPC provides a more general way to manipulate the state and execution of a remote Lua environment.&lt;/p&gt;
+  &lt;p&gt;When a client is connected to a LuaRPC server, it can interact with it in the following ways:&lt;/p&gt;
+&lt;ul&gt;
+  &lt;li&gt;assign values to new or existing variables in the server state&lt;/li&gt;
+  &lt;li&gt;get values from variables in the server state&lt;/li&gt;
+  &lt;li&gt;call functions to be executed on the server side using parameters of serializable types, with return values being sent back to the client&lt;/li&gt;
+  &lt;li&gt;create local userdata helpers (aliases) which provide short-hand access to remote state&lt;/li&gt;
+&lt;/ul&gt;
+
+&lt;h2&gt;Building the Desktop Client/Server&lt;/h2&gt;
+&lt;ul&gt;
+&lt;li&gt;first, make sure that your PC has already a build system installed (gcc,
+  binutils, libc, headers...). You'll also need scons. The good news is that 
+  you should have it already installed, since otherwise you won't be able to 
+  build even regular &lt;b&gt;eLua&lt;/b&gt; (see &lt;a href=&quot;building.html&quot;&gt;building&lt;/a&gt; for more in-depth instructions).&lt;/li&gt;
+&lt;li&gt;from the &lt;b&gt;eLua&lt;/b&gt; base directory, issue this command:
+  &lt;pre&gt;&lt;code&gt;$ scons -f rpc-lua.py&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
+&lt;/ul&gt;
+&lt;p&gt;You should get a file called &lt;i&gt;luarpc&lt;/i&gt; in the same directory which, when started, should give you a normal Lua interpreter with a built-in rpc module.&lt;/p&gt;
+
+&lt;h2&gt;LuaRPC Basics&lt;/h2&gt;
+&lt;p&gt;In terms of the LED example from the beginning of this section, one could directly call pio module functions from the desktop side, experimenting with responses. If the experimentation developed into a program this could be tested both on the desktop side and on the microcontroller by making aliases to eLua modules in local Lua state.  Such aliasing can be done as follows:&lt;/p&gt;
+&lt;pre&gt;&lt;code&gt;-- open connection from Linux host serial port to eLua
+slave,err = rpc.connect(&quot;/dev/ttyUSB0&quot;)
+
+-- make a local helper pointing to pio module in eLua
+pio = slave.pio 
+
+-- define function to set direction and value of port B
+function set_port_val(val)
+  pio.port.setdir( pio.OUTPUT, pio.PB )
+  pio.port.setval( val, pio.PB )
+end
+
+set_port_val(23)&lt;/pre&gt;&lt;/code&gt;
+&lt;p&gt;When we run this locally, calling and indexing helpers are translated into appropriate actions on the server.  If we were done with modifications to the above function and wanted it to execute in eLua rather than using local aliases, which will result in a great deal of RPC traffic every time the function is called, we can send the function to the remote side:&lt;/p&gt;
+&lt;pre&gt;&lt;code&gt;-- cross-compile local chunk for function and send to server
+slave.set_port_val = set_port_val 
+
+-- call function on server device
+slave.set_port_val(23)&lt;/pre&gt;&lt;/code&gt;
+
+&lt;p&gt;In addition to functions, we can also copy most other Lua types from client to server using simple assignment. Due to Lua's internal workings the opposite operation of copying Lua types from server to client requires an additional metamethod:&lt;/p&gt;
+&lt;pre&gt;&lt;code&gt;-- make table on remote server
+slave.remote_table = {}
+
+-- put data in table
+slave.remote_table.rval = 42
+
+-- get data back from server, print
+local_table = slave.remote_table:get()
+print(local_table.rval)&lt;/pre&gt;&lt;/code&gt;
+
+&lt;p&gt;While these examples are trivial, they serve to illustrate a compelling development paradigm that gives one a great deal of flexibility for development and testing with an embedded target.&lt;/p&gt;
+
+&lt;h2&gt;Serializable Lua Types&lt;/h2&gt;
+&lt;p&gt;Most Lua types can be transferred between the client and server states.  The following list indicates which ones can be transferred, and where there are known exceptions:&lt;/p&gt;
+
+&lt;table style=&quot;text-align: left;&quot; class=&quot;table_center&quot;&gt;
+&lt;tbody&gt;
+&lt;tr&gt;
+  &lt;th style=&quot;text-align: left;&quot;&gt;Serializable Types&lt;/th&gt;
+  &lt;th style=&quot;text-align: center;&quot;&gt;Exceptions and Notes&lt;/th&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;numbers&lt;/td&gt;
+  &lt;td&gt;&nbsp;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;strings&lt;/td&gt;
+  &lt;td&gt;&nbsp;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;booleans&lt;/td&gt;
+  &lt;td&gt;&nbsp;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;tables&lt;/td&gt;
+  &lt;td&gt;no circular references&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;functions&lt;/td&gt;
+  &lt;td&gt;no upvalues&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;nil&lt;/td&gt;
+  &lt;td&gt;&nbsp;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;/tbody&gt;
+&lt;/table&gt;
+
+
 $$FOOTER$$
 

Modified: branches/eagle_mmc/doc/en/versionhistory.html
===================================================================
--- branches/eagle_mmc/doc/en/versionhistory.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/en/versionhistory.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -10,20 +10,18 @@
 &lt;th style=&quot;text-align: center;&quot;&gt;Description&lt;/th&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
-  &lt;td align=&quot;center&quot; style=&quot;color: rgb(255, 102, 0);&quot;&gt;##TODO&lt;/td&gt;
-  &lt;td align=&quot;center&quot;&gt;##TODO.11.2009&lt;/td&gt;
-  &lt;td&gt;
-  &lt;ul&gt;
-  &lt;li&gt;Added support for STR-E912 board&lt;/li&gt;
-  &lt;li&gt;Examples extended to support STR-E912 board&lt;/li&gt;
-  &lt;li&gt;Doc/site content enhancements&lt;/li&gt;
-  &lt;li&gt;More PT content&lt;/li&gt;
-  &lt;li&gt;Platform Specific PIO module added to support STR9 goodies&lt;/li&gt;
-  &lt;li&gt;Added the Lua EGC (Emergency Garbage Collection) patch&lt;/li&gt;
-  &lt;li&gt;(Added initial support for generic interrupt handling)&lt;/li&gt;
-  &lt;li&gt;(Added support for NXP)&lt;/li&gt;
-  &lt;li&gt;(##Added support for FAT FS on SD/MMC Cards## {may not come in the
-  next minor release yet})&lt;/li&gt;
+&lt;td align=&quot;center&quot; style=&quot;color: rgb(255, 102, 0);&quot;&gt;0.7&lt;/td&gt;
+&lt;td align=&quot;center&quot;&gt;??.??.20??&lt;/td&gt;
+&lt;td&gt;
+ &lt;ul&gt;
+  &lt;li&gt;Added the &lt;a href=&quot;<A HREF="http://lua-users.org/wiki/EmergencyGarbageCollector">http://lua-users.org/wiki/EmergencyGarbageCollector</A>&quot;&gt;Lua EGC&lt;/a&gt; (Emergency Garbage Collection) patch&lt;/li&gt;
+  &lt;li&gt;Added generic and portable SD/MMC Card FAT File System support&lt;/li&gt;
+  &lt;li&gt;Added &lt;a href=&quot;<A HREF="http://fanplastic.org/2009/05/11/lua-rpc/">http://fanplastic.org/2009/05/11/lua-rpc/</A>&quot;&gt;LuaRPC&lt;/a&gt; support. Remote procedure calls in the embedded world&lt;/li&gt;
+  &lt;li&gt;New eLua shell cat/type command, lists text file contents&lt;/li&gt;
+  &lt;li&gt;Added support for &lt;a href=&quot;<A HREF="http://www.olimex.com/dev/str-e912.html">http://www.olimex.com/dev/str-e912.html</A>&quot;&gt;Olimex STR-E912&lt;/a&gt; board, ST Electronics STR912FW44X MCU&lt;/li&gt;
+  &lt;li&gt;Added support for the &lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/eluademoboard">http://www.giga.puc-rio.br/site/embedded/eluademoboard</A>&quot;&gt;PUC-Rio  eLua&lt;/a&gt; board, NXP LPC2468 MCU&lt;/li&gt;
+  &lt;li&gt;More portuguese content translations&lt;/li&gt;
+  &lt;li&gt;ADC module and doc enhancements&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/td&gt;
 &lt;tr&gt;
@@ -36,6 +34,7 @@
   &lt;li&gt;Documentation available offline&lt;/li&gt;
   &lt;li&gt;Added support for AVR32 CPUs&lt;/li&gt;
   &lt;li&gt;Added support for STM32 Cortex-M3 CPUs&lt;/li&gt;
+  &lt;li&gt;Added support for LM3S9Bxx Cortex-M2 CPUs&lt;/li&gt;
   &lt;li&gt;Added ADC module with support for moving average filters&lt;/li&gt;
   &lt;li&gt;Added support for multiple toolchains&lt;/li&gt;
   &lt;li&gt;Added an ls (or dir) shell command&lt;/li&gt;

Modified: branches/eagle_mmc/doc/images/eLuaLogo.svg
===================================================================
--- branches/eagle_mmc/doc/images/eLuaLogo.svg	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/images/eLuaLogo.svg	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,123 +1,928 @@
 &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;
-&lt;svg id=&quot;svg5414&quot; xmlns:inkscape=&quot;<A HREF="http://www.inkscape.org/namespaces/inkscape">http://www.inkscape.org/namespaces/inkscape</A>&quot; xmlns:rdf=&quot;<A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>&quot; xmlns=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot; sodipodi:docname=&quot;eLuaLogo.svg&quot; xmlns:sodipodi=&quot;<A HREF="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd">http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd</A>&quot; viewBox=&quot;0 0 245 245&quot; sodipodi:version=&quot;0.32&quot; version=&quot;1.0&quot; inkscape:output_extension=&quot;org.inkscape.output.svg.inkscape&quot; xmlns:cc=&quot;<A HREF="http://creativecommons.org/ns#">http://creativecommons.org/ns#</A>&quot; xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink">http://www.w3.org/1999/xlink</A>&quot; inkscape:version=&quot;0.47pre1 r21720&quot; xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;&gt;
-&lt;defs id=&quot;defs5416&quot;&gt;
-&lt;linearGradient id=&quot;linearGradient4949&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,511.47206,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient4971&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,524.47206,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient4977&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,537.47206,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient4987&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,550.47206,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient4991&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,563.47206,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient4995&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,576.47206,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5011&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,589.53242,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5015&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,602.53242,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5019&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,615.53242,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5023&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,628.53242,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5027&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,641.53242,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5031&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,-1,1,0,654.53242,451.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5059&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,595.97374,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5063&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,582.97374,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5067&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,569.97374,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5071&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,556.97374,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5075&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,543.97374,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5079&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,530.97374,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5083&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,517.91338,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5087&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,504.91338,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5091&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,491.91338,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5095&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,478.91338,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5099&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,465.91338,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5103&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(0,1,-1,0,452.91338,703.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5131&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,535.67115)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5135&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,548.67115)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5139&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,561.67115)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5143&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,574.67115)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5147&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,587.67115)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5151&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,600.67115)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5155&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,613.73151)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5159&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,626.73151)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5163&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,639.73151)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5167&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,652.73151)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5171&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,665.73151)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5175&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;translate(680.47206,678.73151)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5247&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,477.11247)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5243&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,490.11247)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5239&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,503.11247)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5235&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,516.11247)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5231&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,529.11247)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5227&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,542.11247)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5223&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,555.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5219&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,568.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5215&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,581.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5211&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,594.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5207&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,607.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient5203&quot; y2=&quot;-29.3&quot; xlink:href=&quot;#linearGradient4941&quot; gradientUnits=&quot;userSpaceOnUse&quot; x2=&quot;-28.4&quot; gradientTransform=&quot;matrix(-1,0,0,-1,428.47206,620.17283)&quot; y1=&quot;-29.3&quot; x1=&quot;-43.6&quot; inkscape:collect=&quot;always&quot;/&gt;
-&lt;linearGradient id=&quot;linearGradient4941&quot;&gt;
-&lt;stop id=&quot;stop4943&quot; stop-color=&quot;#7f7f7f&quot; offset=&quot;0&quot;/&gt;
-&lt;stop id=&quot;stop4951&quot; stop-color=&quot;#7f7f7f&quot; offset=&quot;0.771&quot;/&gt;
-&lt;stop id=&quot;stop4945&quot; stop-color=&quot;#7f7f7f&quot; stop-opacity=&quot;0&quot; offset=&quot;1&quot;/&gt;
-&lt;/linearGradient&gt;
-&lt;/defs&gt;
-&lt;sodipodi:namedview id=&quot;base&quot; inkscape:zoom=&quot;2.8284271&quot; borderopacity=&quot;1.0&quot; inkscape:current-layer=&quot;layer1&quot; inkscape:cx=&quot;91.620417&quot; inkscape:cy=&quot;163.52029&quot; inkscape:window-maximized=&quot;0&quot; showgrid=&quot;false&quot; inkscape:guide-bbox=&quot;true&quot; showguides=&quot;true&quot; bordercolor=&quot;#666666&quot; inkscape:window-x=&quot;0&quot; guidetolerance=&quot;10&quot; objecttolerance=&quot;10&quot; inkscape:window-y=&quot;0&quot; inkscape:window-width=&quot;1280&quot; inkscape:pageopacity=&quot;0.0&quot; inkscape:pageshadow=&quot;2&quot; pagecolor=&quot;#ffffff&quot; gridtolerance=&quot;10000&quot; inkscape:document-units=&quot;px&quot; inkscape:window-height=&quot;752&quot;/&gt;
-&lt;metadata id=&quot;metadata5419&quot;&gt;
-&lt;rdf:RDF&gt;
-&lt;cc:Work rdf:about=&quot;&quot;&gt;
-&lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;
-&lt;dc:type rdf:resource=&quot;<A HREF="http://purl.org/dc/dcmitype/StillImage">http://purl.org/dc/dcmitype/StillImage</A>&quot;/&gt;
-&lt;/cc:Work&gt;
-&lt;/rdf:RDF&gt;
-&lt;/metadata&gt;
-&lt;g id=&quot;layer1&quot; inkscape:label=&quot;Layer 1&quot; inkscape:groupmode=&quot;layer&quot; transform=&quot;translate(-431.29956,-455.34533)&quot;&gt;
-&lt;path id=&quot;path4931&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m479,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient4949)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient4949)&quot;/&gt;
-&lt;path id=&quot;path4957&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m492,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient4971)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient4971)&quot;/&gt;
-&lt;path id=&quot;path4973&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m505,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient4977)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient4977)&quot;/&gt;
-&lt;path id=&quot;path4979&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m518,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient4987)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient4987)&quot;/&gt;
-&lt;path id=&quot;path4981&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m531,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient4991)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient4991)&quot;/&gt;
-&lt;path id=&quot;path4983&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m544,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient4995)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient4995)&quot;/&gt;
-&lt;path id=&quot;path4997&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m557,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5011)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5011)&quot;/&gt;
-&lt;path id=&quot;path4999&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m570,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5015)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5015)&quot;/&gt;
-&lt;path id=&quot;path5001&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m583,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5019)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5019)&quot;/&gt;
-&lt;path id=&quot;path5003&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m596,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5023)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5023)&quot;/&gt;
-&lt;path id=&quot;path5005&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m609,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5027)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5027)&quot;/&gt;
-&lt;path id=&quot;path5007&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m622,495,6.44,0v-10c0-3.74-0.0656-5-3.22-5-3.16,0-3.22,1.19-3.22,5v10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5031)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5031)&quot;/&gt;
-&lt;path id=&quot;path5033&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m628,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5059)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5059)&quot;/&gt;
-&lt;path id=&quot;path5035&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m615,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5063)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5063)&quot;/&gt;
-&lt;path id=&quot;path5037&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m602,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5067)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5067)&quot;/&gt;
-&lt;path id=&quot;path5039&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m589,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5071)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5071)&quot;/&gt;
-&lt;path id=&quot;path5041&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m576,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5075)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5075)&quot;/&gt;
-&lt;path id=&quot;path5043&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m563,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5079)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5079)&quot;/&gt;
-&lt;path id=&quot;path5045&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m550,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5083)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5083)&quot;/&gt;
-&lt;path id=&quot;path5047&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m537,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5087)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5087)&quot;/&gt;
-&lt;path id=&quot;path5049&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m524,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5091)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5091)&quot;/&gt;
-&lt;path id=&quot;path5051&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m511,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5095)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5095)&quot;/&gt;
-&lt;path id=&quot;path5053&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m498,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5099)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5099)&quot;/&gt;
-&lt;path id=&quot;path5055&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m485,660-6.44,0v10c0,3.74,0.0656,5,3.22,5,3.16,0,3.22-1.19,3.22-5v-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5103)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5103)&quot;/&gt;
-&lt;path id=&quot;path5105&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,503,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5131)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5131)&quot;/&gt;
-&lt;path id=&quot;path5107&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,516,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5135)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5135)&quot;/&gt;
-&lt;path id=&quot;path5109&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,529,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5139)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5139)&quot;/&gt;
-&lt;path id=&quot;path5111&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,542,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5143)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5143)&quot;/&gt;
-&lt;path id=&quot;path5113&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,555,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5147)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5147)&quot;/&gt;
-&lt;path id=&quot;path5115&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,568,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5151)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5151)&quot;/&gt;
-&lt;path id=&quot;path5117&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,581,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5155)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5155)&quot;/&gt;
-&lt;path id=&quot;path5119&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,594,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5159)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5159)&quot;/&gt;
-&lt;path id=&quot;path5121&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,607,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5163)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5163)&quot;/&gt;
-&lt;path id=&quot;path5123&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,620,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5167)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5167)&quot;/&gt;
-&lt;path id=&quot;path5125&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,633,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5171)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5171)&quot;/&gt;
-&lt;path id=&quot;path5127&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m637,646,0,6.44h10c3.74,0,5-0.0656,5-3.22,0-3.16-1.19-3.22-5-3.22h-10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5175)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5175)&quot;/&gt;
-&lt;path id=&quot;path5199&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,510,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5247)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5247)&quot;/&gt;
-&lt;path id=&quot;path5197&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,523,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5243)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5243)&quot;/&gt;
-&lt;path id=&quot;path5195&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,536,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5239)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5239)&quot;/&gt;
-&lt;path id=&quot;path5193&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,549,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5235)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5235)&quot;/&gt;
-&lt;path id=&quot;path5191&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,562,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5231)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5231)&quot;/&gt;
-&lt;path id=&quot;path5189&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,575,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5227)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5227)&quot;/&gt;
-&lt;path id=&quot;path5187&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,588,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5223)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5223)&quot;/&gt;
-&lt;path id=&quot;path5185&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,601,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5219)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5219)&quot;/&gt;
-&lt;path id=&quot;path5183&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,614,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5215)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5215)&quot;/&gt;
-&lt;path id=&quot;path5181&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,627,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5211)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5211)&quot;/&gt;
-&lt;path id=&quot;path5179&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,640,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5207)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5207)&quot;/&gt;
-&lt;path id=&quot;path5177&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:none;&quot; d=&quot;m472,653,0-6.44h-10c-3.74,0-5,0.0656-5,3.22,0,3.16,1.19,3.22,5,3.22h10z&quot; fill-rule=&quot;evenodd&quot; sodipodi:nodetypes=&quot;ccsssc&quot; stroke=&quot;url(#linearGradient5203)&quot; stroke-linecap=&quot;butt&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;0.09999997&quot; fill=&quot;url(#linearGradient5203)&quot;/&gt;
-&lt;rect id=&quot;rect2451&quot; stroke-linejoin=&quot;round&quot; style=&quot;stroke-dasharray:none;&quot; fill-rule=&quot;evenodd&quot; stroke-dashoffset=&quot;0&quot; height=&quot;156&quot; width=&quot;154&quot; stroke=&quot;#00007f&quot; stroke-linecap=&quot;round&quot; stroke-miterlimit=&quot;4&quot; y=&quot;499&quot; x=&quot;477&quot; stroke-width=&quot;17.9&quot; fill=&quot;#00007f&quot;/&gt;
-&lt;path id=&quot;path4788&quot; sodipodi:rx=&quot;18.106426&quot; sodipodi:ry=&quot;18.106426&quot; style=&quot;stroke-dasharray:none;&quot; sodipodi:type=&quot;arc&quot; d=&quot;m117-19.1c0,10-8.11,18.1-18.1,18.1-10,0-18.1-8.11-18.1-18.1,0-10,8.11-18.1,18.1-18.1,10,0,18.1,8.11,18.1,18.1z&quot; stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot; transform=&quot;matrix(0.2668429,0,0,0.2668429,598.91761,511.49558)&quot; stroke=&quot;#FFF&quot; stroke-dashoffset=&quot;0&quot; sodipodi:cy=&quot;-19.126507&quot; sodipodi:cx=&quot;98.692772&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;20&quot; fill=&quot;#FFF&quot;/&gt;
-&lt;path id=&quot;path4790&quot; sodipodi:rx=&quot;18.106426&quot; sodipodi:ry=&quot;18.106426&quot; style=&quot;stroke-dasharray:none;&quot; sodipodi:type=&quot;arc&quot; d=&quot;m117-19.1c0,10-8.11,18.1-18.1,18.1-10,0-18.1-8.11-18.1-18.1,0-10,8.11-18.1,18.1-18.1,10,0,18.1,8.11,18.1,18.1z&quot; stroke-linejoin=&quot;round&quot; stroke-linecap=&quot;round&quot; transform=&quot;matrix(0.53368578,0,0,0.53368578,607.62863,481.55287)&quot; stroke=&quot;#00007f&quot; stroke-dashoffset=&quot;0&quot; sodipodi:cy=&quot;-19.126507&quot; sodipodi:cx=&quot;98.692772&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;20&quot; fill=&quot;#00007f&quot;/&gt;
-&lt;path id=&quot;path4887&quot; stroke-linejoin=&quot;miter&quot; style=&quot;stroke-dasharray:9.66, 9.66;&quot; d=&quot;m637,465h-165c-29.6,0-30,30.2-30,30.2v165c0,29.6,25.3,30,25.3,30h170c30.6,0,30-31.7,30-31.7v-163&quot; sodipodi:nodetypes=&quot;cscscscc&quot; stroke-dashoffset=&quot;0&quot; stroke=&quot;#7f7f7f&quot; stroke-linecap=&quot;round&quot; stroke-miterlimit=&quot;4&quot; stroke-width=&quot;3.22000003&quot; fill=&quot;none&quot;/&gt;
-&lt;text id=&quot;text2966&quot; style=&quot;writing-mode:lr-tb;text-anchor:start;text-align:start;&quot; line-height=&quot;100%&quot; font-weight=&quot;normal&quot; xml:space=&quot;preserve&quot; font-size=&quot;64px&quot; font-style=&quot;normal&quot; font-stretch=&quot;normal&quot; font-variant=&quot;normal&quot; y=&quot;595.53284&quot; x=&quot;483.58081&quot; font-family=&quot;Helvetica&quot; sodipodi:linespacing=&quot;100%&quot; fill=&quot;#ffffff&quot;&gt;&lt;tspan id=&quot;tspan2968&quot; sodipodi:role=&quot;line&quot; font-weight=&quot;normal&quot; font-style=&quot;normal&quot; font-stretch=&quot;normal&quot; font-variant=&quot;normal&quot; y=&quot;595.53284&quot; x=&quot;483.58081&quot; font-family=&quot;Helvetica&quot;&gt;eLua&lt;/tspan&gt;
-&lt;/text&gt;
-&lt;/g&gt;
-&lt;/svg&gt;
\ No newline at end of file
+&lt;svg
+   xmlns:dc=&quot;<A HREF="http://purl.org/dc/elements/1.1/">http://purl.org/dc/elements/1.1/</A>&quot;
+   xmlns:cc=&quot;<A HREF="http://creativecommons.org/ns#">http://creativecommons.org/ns#</A>&quot;
+   xmlns:rdf=&quot;<A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>&quot;
+   xmlns:svg=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot;
+   xmlns=&quot;<A HREF="http://www.w3.org/2000/svg">http://www.w3.org/2000/svg</A>&quot;
+   xmlns:xlink=&quot;<A HREF="http://www.w3.org/1999/xlink">http://www.w3.org/1999/xlink</A>&quot;
+   xmlns:sodipodi=&quot;<A HREF="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd">http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd</A>&quot;
+   xmlns:inkscape=&quot;<A HREF="http://www.inkscape.org/namespaces/inkscape">http://www.inkscape.org/namespaces/inkscape</A>&quot;
+   id=&quot;svg5414&quot;
+   sodipodi:docname=&quot;eLuaLogo.svg&quot;
+   viewBox=&quot;0 0 245 245&quot;
+   sodipodi:version=&quot;0.32&quot;
+   version=&quot;1.0&quot;
+   inkscape:output_extension=&quot;org.inkscape.output.svg.inkscape&quot;
+   inkscape:version=&quot;0.47 r22583&quot;
+   width=&quot;100%&quot;
+   height=&quot;100%&quot;&gt;
+  &lt;defs
+     id=&quot;defs5416&quot;&gt;
+    &lt;inkscape:perspective
+       sodipodi:type=&quot;inkscape:persp3d&quot;
+       inkscape:vp_x=&quot;0 : 122.5 : 1&quot;
+       inkscape:vp_y=&quot;0 : 1000 : 0&quot;
+       inkscape:vp_z=&quot;245 : 122.5 : 1&quot;
+       inkscape:persp3d-origin=&quot;122.5 : 81.666667 : 1&quot;
+       id=&quot;perspective2928&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4949&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,512.19594,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4971&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,525.19602,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4977&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,538.1961,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4987&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,551.19616,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4991&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,564.19624,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4995&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,577.19632,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5011&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,590.25674,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5015&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,603.25682,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5019&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,616.2569,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5023&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,629.25696,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5027&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,642.25704,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5031&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,-0.98340352,1.0000056,0,655.25712,452.46587)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5059&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,597.57786,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5063&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,584.57786,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5067&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,571.57786,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5071&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,558.57786,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5075&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,545.57786,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5079&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,532.57786,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5083&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,519.5175,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5087&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,506.5175,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5091&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,493.5175,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5095&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,480.5175,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5099&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,467.5175,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5103&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(0,1,-1,0,454.5175,701.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5131&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,535.35681)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5135&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,548.35681)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5139&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,561.35681)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5143&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,574.35681)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5147&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,587.35681)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5151&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,600.35681)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5155&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,613.41717)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5159&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,626.41717)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5163&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,639.41717)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5167&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,652.41717)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5171&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,665.41717)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5175&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;translate(679.19618,678.41717)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5247&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,475.67813)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5243&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,488.67813)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5239&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,501.67813)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5235&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,514.67813)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5231&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,527.67813)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5227&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,540.67813)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5223&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,553.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5219&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,566.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5215&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,579.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5211&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,592.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5207&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,605.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient5203&quot;
+       y2=&quot;-29.3&quot;
+       xlink:href=&quot;#linearGradient4941&quot;
+       gradientUnits=&quot;userSpaceOnUse&quot;
+       x2=&quot;-28.4&quot;
+       gradientTransform=&quot;matrix(-1,0,0,-1,429.19618,618.73849)&quot;
+       y1=&quot;-29.3&quot;
+       x1=&quot;-43.6&quot;
+       inkscape:collect=&quot;always&quot; /&gt;
+    &lt;linearGradient
+       id=&quot;linearGradient4941&quot;&gt;
+      &lt;stop
+         id=&quot;stop4943&quot;
+         stop-color=&quot;#7f7f7f&quot;
+         offset=&quot;0&quot; /&gt;
+      &lt;stop
+         id=&quot;stop4951&quot;
+         stop-color=&quot;#7f7f7f&quot;
+         offset=&quot;0.771&quot; /&gt;
+      &lt;stop
+         id=&quot;stop4945&quot;
+         stop-color=&quot;#7f7f7f&quot;
+         stop-opacity=&quot;0&quot;
+         offset=&quot;1&quot; /&gt;
+    &lt;/linearGradient&gt;
+  &lt;/defs&gt;
+  &lt;sodipodi:namedview
+     id=&quot;base&quot;
+     inkscape:zoom=&quot;4&quot;
+     borderopacity=&quot;1.0&quot;
+     inkscape:current-layer=&quot;layer1&quot;
+     inkscape:cx=&quot;82.806203&quot;
+     inkscape:cy=&quot;145.38337&quot;
+     inkscape:window-maximized=&quot;0&quot;
+     showgrid=&quot;true&quot;
+     inkscape:guide-bbox=&quot;true&quot;
+     showguides=&quot;true&quot;
+     bordercolor=&quot;#666666&quot;
+     inkscape:window-x=&quot;0&quot;
+     guidetolerance=&quot;10&quot;
+     objecttolerance=&quot;10&quot;
+     inkscape:window-y=&quot;0&quot;
+     inkscape:window-width=&quot;1280&quot;
+     inkscape:pageopacity=&quot;0.0&quot;
+     inkscape:pageshadow=&quot;2&quot;
+     pagecolor=&quot;#ffffff&quot;
+     gridtolerance=&quot;10000&quot;
+     inkscape:document-units=&quot;px&quot;
+     inkscape:window-height=&quot;752&quot;&gt;
+    &lt;inkscape:grid
+       type=&quot;xygrid&quot;
+       id=&quot;grid2929&quot; /&gt;
+  &lt;/sodipodi:namedview&gt;
+  &lt;metadata
+     id=&quot;metadata5419&quot;&gt;
+    &lt;rdf:RDF&gt;
+      &lt;cc:Work
+         rdf:about=&quot;&quot;&gt;
+        &lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;
+        &lt;dc:type
+           rdf:resource=&quot;<A HREF="http://purl.org/dc/dcmitype/StillImage">http://purl.org/dc/dcmitype/StillImage</A>&quot; /&gt;
+      &lt;/cc:Work&gt;
+    &lt;/rdf:RDF&gt;
+  &lt;/metadata&gt;
+  &lt;g
+     id=&quot;layer1&quot;
+     inkscape:label=&quot;Layer 1&quot;
+     inkscape:groupmode=&quot;layer&quot;
+     transform=&quot;translate(-431.29956,-455.34533)&quot;&gt;
+    &lt;path
+       id=&quot;path4931&quot;
+       style=&quot;fill:url(#linearGradient4949);fill-rule:evenodd;stroke:url(#linearGradient4949);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 479.36185,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4957&quot;
+       style=&quot;fill:url(#linearGradient4971);fill-rule:evenodd;stroke:url(#linearGradient4971);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 492.36189,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4973&quot;
+       style=&quot;fill:url(#linearGradient4977);fill-rule:evenodd;stroke:url(#linearGradient4977);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 505.36192,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4979&quot;
+       style=&quot;fill:url(#linearGradient4987);fill-rule:evenodd;stroke:url(#linearGradient4987);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 518.36196,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4981&quot;
+       style=&quot;fill:url(#linearGradient4991);fill-rule:evenodd;stroke:url(#linearGradient4991);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 531.362,495.28283 6.44001,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4983&quot;
+       style=&quot;fill:url(#linearGradient4995);fill-rule:evenodd;stroke:url(#linearGradient4995);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 544.36203,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4997&quot;
+       style=&quot;fill:url(#linearGradient5011);fill-rule:evenodd;stroke:url(#linearGradient5011);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 557.36207,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path4999&quot;
+       style=&quot;fill:url(#linearGradient5015);fill-rule:evenodd;stroke:url(#linearGradient5015);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 570.36211,495.28283 6.44001,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16,0 -3.22,1.18008 -3.22,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5001&quot;
+       style=&quot;fill:url(#linearGradient5019);fill-rule:evenodd;stroke:url(#linearGradient5019);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 583.36214,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5003&quot;
+       style=&quot;fill:url(#linearGradient5023);fill-rule:evenodd;stroke:url(#linearGradient5023);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 596.36218,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5005&quot;
+       style=&quot;fill:url(#linearGradient5027);fill-rule:evenodd;stroke:url(#linearGradient5027);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 609.36221,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5007&quot;
+       style=&quot;fill:url(#linearGradient5031);fill-rule:evenodd;stroke:url(#linearGradient5031);stroke-width:0.09958258;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 622.36225,495.28283 6.44002,0 0,-9.91667 c 0,-3.70883 -0.0656,-4.95833 -3.22001,-4.95833 -3.16001,0 -3.22001,1.18008 -3.22001,4.95833 l 0,9.91667 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5033&quot;
+       style=&quot;fill:url(#linearGradient5059);fill-rule:evenodd;stroke:url(#linearGradient5059);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 628.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5035&quot;
+       style=&quot;fill:url(#linearGradient5063);fill-rule:evenodd;stroke:url(#linearGradient5063);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 615.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5037&quot;
+       style=&quot;fill:url(#linearGradient5067);fill-rule:evenodd;stroke:url(#linearGradient5067);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 602.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5039&quot;
+       style=&quot;fill:url(#linearGradient5071);fill-rule:evenodd;stroke:url(#linearGradient5071);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 589.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5041&quot;
+       style=&quot;fill:url(#linearGradient5075);fill-rule:evenodd;stroke:url(#linearGradient5075);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 576.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5043&quot;
+       style=&quot;fill:url(#linearGradient5079);fill-rule:evenodd;stroke:url(#linearGradient5079);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 563.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5045&quot;
+       style=&quot;fill:url(#linearGradient5083);fill-rule:evenodd;stroke:url(#linearGradient5083);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 550.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5047&quot;
+       style=&quot;fill:url(#linearGradient5087);fill-rule:evenodd;stroke:url(#linearGradient5087);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 537.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5049&quot;
+       style=&quot;fill:url(#linearGradient5091);fill-rule:evenodd;stroke:url(#linearGradient5091);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 524.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5051&quot;
+       style=&quot;fill:url(#linearGradient5095);fill-rule:evenodd;stroke:url(#linearGradient5095);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 511.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5053&quot;
+       style=&quot;fill:url(#linearGradient5099);fill-rule:evenodd;stroke:url(#linearGradient5099);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 498.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5055&quot;
+       style=&quot;fill:url(#linearGradient5103);fill-rule:evenodd;stroke:url(#linearGradient5103);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 485.80206,659.28283 -6.44,0 v 10 c 0,3.74 0.0656,5 3.22,5 3.16,0 3.22,-1.19 3.22,-5 v -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5105&quot;
+       style=&quot;fill:url(#linearGradient5131);fill-rule:evenodd;stroke:url(#linearGradient5131);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,502.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5107&quot;
+       style=&quot;fill:url(#linearGradient5135);fill-rule:evenodd;stroke:url(#linearGradient5135);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,515.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5109&quot;
+       style=&quot;fill:url(#linearGradient5139);fill-rule:evenodd;stroke:url(#linearGradient5139);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,528.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5111&quot;
+       style=&quot;fill:url(#linearGradient5143);fill-rule:evenodd;stroke:url(#linearGradient5143);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,541.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5113&quot;
+       style=&quot;fill:url(#linearGradient5147);fill-rule:evenodd;stroke:url(#linearGradient5147);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,554.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5115&quot;
+       style=&quot;fill:url(#linearGradient5151);fill-rule:evenodd;stroke:url(#linearGradient5151);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,567.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5117&quot;
+       style=&quot;fill:url(#linearGradient5155);fill-rule:evenodd;stroke:url(#linearGradient5155);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,580.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5119&quot;
+       style=&quot;fill:url(#linearGradient5159);fill-rule:evenodd;stroke:url(#linearGradient5159);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,593.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5121&quot;
+       style=&quot;fill:url(#linearGradient5163);fill-rule:evenodd;stroke:url(#linearGradient5163);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,606.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5123&quot;
+       style=&quot;fill:url(#linearGradient5167);fill-rule:evenodd;stroke:url(#linearGradient5167);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,619.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5125&quot;
+       style=&quot;fill:url(#linearGradient5171);fill-rule:evenodd;stroke:url(#linearGradient5171);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,632.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5127&quot;
+       style=&quot;fill:url(#linearGradient5175);fill-rule:evenodd;stroke:url(#linearGradient5175);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 636.36206,645.84283 0,6.44 h 10 c 3.74,0 5,-0.0656 5,-3.22 0,-3.16 -1.19,-3.22 -5,-3.22 h -10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5199&quot;
+       style=&quot;fill:url(#linearGradient5247);fill-rule:evenodd;stroke:url(#linearGradient5247);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,509.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5197&quot;
+       style=&quot;fill:url(#linearGradient5243);fill-rule:evenodd;stroke:url(#linearGradient5243);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,522.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5195&quot;
+       style=&quot;fill:url(#linearGradient5239);fill-rule:evenodd;stroke:url(#linearGradient5239);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,535.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5193&quot;
+       style=&quot;fill:url(#linearGradient5235);fill-rule:evenodd;stroke:url(#linearGradient5235);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,548.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5191&quot;
+       style=&quot;fill:url(#linearGradient5231);fill-rule:evenodd;stroke:url(#linearGradient5231);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,561.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5189&quot;
+       style=&quot;fill:url(#linearGradient5227);fill-rule:evenodd;stroke:url(#linearGradient5227);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,574.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5187&quot;
+       style=&quot;fill:url(#linearGradient5223);fill-rule:evenodd;stroke:url(#linearGradient5223);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,587.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5185&quot;
+       style=&quot;fill:url(#linearGradient5219);fill-rule:evenodd;stroke:url(#linearGradient5219);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,600.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5183&quot;
+       style=&quot;fill:url(#linearGradient5215);fill-rule:evenodd;stroke:url(#linearGradient5215);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,613.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5181&quot;
+       style=&quot;fill:url(#linearGradient5211);fill-rule:evenodd;stroke:url(#linearGradient5211);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,626.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5179&quot;
+       style=&quot;fill:url(#linearGradient5207);fill-rule:evenodd;stroke:url(#linearGradient5207);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,639.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;path
+       id=&quot;path5177&quot;
+       style=&quot;fill:url(#linearGradient5203);fill-rule:evenodd;stroke:url(#linearGradient5203);stroke-width:0.09999997;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none&quot;
+       d=&quot;m 472.36206,652.28283 0,-6.44 h -10 c -3.74,0 -5,0.0656 -5,3.22 0,3.16 1.19,3.22 5,3.22 h 10 z&quot;
+       sodipodi:nodetypes=&quot;ccsssc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;rect
+       id=&quot;rect2451&quot;
+       style=&quot;fill:#00007f;fill-rule:evenodd;stroke:#00007f;stroke-width:17.80715561;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0&quot;
+       height=&quot;154.19284&quot;
+       width=&quot;154.19284&quot;
+       stroke-miterlimit=&quot;4&quot;
+       y=&quot;500.2489&quot;
+       x=&quot;477.20316&quot; /&gt;
+    &lt;path
+       id=&quot;path4788&quot;
+       sodipodi:rx=&quot;18.106426&quot;
+       sodipodi:ry=&quot;18.106426&quot;
+       style=&quot;stroke-dasharray:none;&quot;
+       sodipodi:type=&quot;arc&quot;
+       d=&quot;m 116.7992,-19.126507 c 0,9.9999033 -8.10653,18.1064264 -18.106428,18.1064264 -9.999903,0 -18.106426,-8.1065231 -18.106426,-18.1064264 0,-9.999903 8.106523,-18.106426 18.106426,-18.106426 9.999898,0 18.106428,8.106523 18.106428,18.106426 z&quot;
+       stroke-linejoin=&quot;round&quot;
+       stroke-linecap=&quot;round&quot;
+       transform=&quot;matrix(0.2668429,0,0,0.2668429,598.91761,511.49558)&quot;
+       stroke=&quot;#FFF&quot;
+       stroke-dashoffset=&quot;0&quot;
+       sodipodi:cy=&quot;-19.126507&quot;
+       sodipodi:cx=&quot;98.692772&quot;
+       stroke-miterlimit=&quot;4&quot;
+       stroke-width=&quot;20&quot;
+       fill=&quot;#FFF&quot; /&gt;
+    &lt;path
+       id=&quot;path4790&quot;
+       sodipodi:rx=&quot;18.106426&quot;
+       sodipodi:ry=&quot;18.106426&quot;
+       style=&quot;stroke-dasharray:none;&quot;
+       sodipodi:type=&quot;arc&quot;
+       d=&quot;m 116.7992,-19.126507 c 0,9.9999033 -8.10653,18.1064264 -18.106428,18.1064264 -9.999903,0 -18.106426,-8.1065231 -18.106426,-18.1064264 0,-9.999903 8.106523,-18.106426 18.106426,-18.106426 9.999898,0 18.106428,8.106523 18.106428,18.106426 z&quot;
+       stroke-linejoin=&quot;round&quot;
+       stroke-linecap=&quot;round&quot;
+       transform=&quot;matrix(0.53368578,0,0,0.53368578,607.62863,481.55287)&quot;
+       stroke=&quot;#00007f&quot;
+       stroke-dashoffset=&quot;0&quot;
+       sodipodi:cy=&quot;-19.126507&quot;
+       sodipodi:cx=&quot;98.692772&quot;
+       stroke-miterlimit=&quot;4&quot;
+       stroke-width=&quot;20&quot;
+       fill=&quot;#00007f&quot; /&gt;
+    &lt;path
+       id=&quot;path4887&quot;
+       style=&quot;fill:none;stroke:#7f7f7f;stroke-width:3.21337008;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:9.64010984, 9.64010984;stroke-dashoffset:0&quot;
+       d=&quot;m 636.46118,464.95202 -164.62341,0 c -29.53243,0 -29.93153,30.14457 -29.93153,30.14457 l 0,164.69713 c 0,29.54566 25.24226,29.94493 25.24226,29.94493 l 169.612,0 c 30.53016,0 29.93152,-31.64182 29.93152,-31.64182 l 0,-162.70079&quot;
+       sodipodi:nodetypes=&quot;cscscscc&quot;
+       stroke-miterlimit=&quot;4&quot; /&gt;
+    &lt;text
+       id=&quot;text2966&quot;
+       style=&quot;font-size:64px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:100%;writing-mode:lr-tb;text-anchor:start;fill:#ffffff;font-family:Helvetica&quot;
+       line-height=&quot;100%&quot;
+       font-weight=&quot;normal&quot;
+       xml:space=&quot;preserve&quot;
+       font-size=&quot;64px&quot;
+       font-style=&quot;normal&quot;
+       font-stretch=&quot;normal&quot;
+       font-variant=&quot;normal&quot;
+       y=&quot;595.53284&quot;
+       x=&quot;481.58081&quot;
+       sodipodi:linespacing=&quot;100%&quot;&gt;&lt;tspan
+   id=&quot;tspan2968&quot;
+   sodipodi:role=&quot;line&quot;
+   font-weight=&quot;normal&quot;
+   font-style=&quot;normal&quot;
+   font-stretch=&quot;normal&quot;
+   font-variant=&quot;normal&quot;
+   y=&quot;595.53284&quot;
+   x=&quot;481.58081&quot;
+   style=&quot;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-family:Helvetica&quot;&gt;eLua&lt;/tspan&gt; &lt;/text&gt;
+  &lt;/g&gt;
+&lt;/svg&gt;

Added: branches/eagle_mmc/doc/images/eLua_16x16.ico
===================================================================
--- branches/eagle_mmc/doc/images/eLua_16x16.ico	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/images/eLua_16x16.ico	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1 @@
+
\ No newline at end of file

Modified: branches/eagle_mmc/doc/pt/comunity.html
===================================================================
--- branches/eagle_mmc/doc/pt/comunity.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/pt/comunity.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -7,7 +7,7 @@
 usu&#225;rios n&#227;o inscritos raramente s&#227;o aceitas.&lt;/p&gt;
 &lt;p style=&quot;text-align: left;&quot;&gt;&lt;/p&gt;&lt;p style=&quot;text-align: left;&quot;&gt;Nosso reposit&#243;rio para desenvolvimento do c&#243;digo de eLua encontra-se em um
 Servidor Subversion (SVN). Se voc&#234; desejar se manter informado sobre as atividades do
-desenvolvimento, basta se inscrever tamb&#233;m na nossa &lt;strong&gt;Lista de Atividade do servidor SVN&lt;/strong&gt; em:&lt;a target=&quot;_top&quot; href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">https://lists.berlios.de/mailman/listinfo/elua-svn</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn&lt;/a">https://lists.berlios.de/mailman/listinfo/elua-svn&lt;/a</A>&gt;.&lt;/p&gt;
+desenvolvimento, voc&#234; pode se inscrever tamb&#233;m na nossa &lt;strong&gt;Lista de Atividade do servidor SVN&lt;/strong&gt; em:&lt;a target=&quot;_top&quot; href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">https://lists.berlios.de/mailman/listinfo/elua-svn</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn&lt;/a">https://lists.berlios.de/mailman/listinfo/elua-svn&lt;/a</A>&gt;.&lt;/p&gt;
 &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">https://lists.berlios.de/mailman/listinfo/elua-svn</A>&quot;&gt;&lt;/a&gt;&lt;/p&gt;
 
 &lt;span style=&quot;font-style: italic;&quot;&gt;&lt;a name=&quot;credits&quot;&gt;&lt;/a&gt;&lt;/span&gt;&lt;h3&gt;Forum&lt;/h3&gt;
@@ -28,7 +28,7 @@
  da documenta&#231;&#227;o&lt;/li&gt;
  &lt;li&gt;Fr&#233;deric Thomas - Site hosting, melhorias para LM3S&lt;/li&gt;
  &lt;li&gt;James Snyder - M&#243;dulos ADC, CAN, LuaRPC (&lt;a href=&quot;<A HREF="http://q12.org/lua/index.html">http://q12.org/lua/index.html</A>&quot;&gt;originalmente por Russell Smith&lt;/a&gt;), testes&lt;/li&gt;
- &lt;li&gt;Mike Panetta - Portabiliza&#231;&#227;o para STM32&lt;/li&gt;
+ &lt;li&gt;Mike Panetta - Suporte a STM32&lt;/li&gt;
  &lt;li&gt;Pedro Bittencourt - M&#243;dulo para display RIT OLED para LM3S, &lt;a href=&quot;<A HREF="http://code.google.com/p/vhews/">http://code.google.com/p/vhews/</A>&quot;&gt;VHeHS&lt;/a&gt;, Testes&lt;/li&gt;
  &lt;li&gt;Raul Nunes - Sustentabilidade e o apoio fundamental da &lt;a href=&quot;<A HREF="http://www.puc-rio.br">http://www.puc-rio.br</A>&quot;&gt;PUC-Rio&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;Roberto Ierusalimschy, Luiz Henrique Figueiredo e Waldemar Celles - por &lt;a href=&quot;<A HREF="http://www.lua.org">http://www.lua.org</A>&quot;&gt;Lua&lt;/a&gt; (!!! :)&lt;/li&gt;
@@ -43,7 +43,7 @@
 Alberto Fabiano, Andr&#233; Carregal, &#194;ngelo Santos, Asko Kauppi, Cosmin Filip, 
 Dean Hall, Diego Sueiro, Fabio Pereira, Giovani Balduino, Jesus Alvarez, 
 John Hind, Luiz de Barros, Marcelo T&#237;io, Marco Meggiolaro, Ricardo
-L. Rosa, Robert Jakabosky, Yuri Takhteyev ...
+L. Rosa, Robert Jakabosky, Yuri Takhteyev, ...
 
 &lt;/a&gt;
 $$FOOTER$$

Modified: branches/eagle_mmc/doc/pt/downloads.html
===================================================================
--- branches/eagle_mmc/doc/pt/downloads.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/pt/downloads.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -6,13 +6,24 @@
   &lt;li&gt;download do c&#243;digo-fonte para a gera&#231;&#227;o de &lt;b&gt;eLua&lt;/b&gt;. Voc&#234; pode tanto baixar o c&#243;digo fonte de uma vers&#227;o oficial ou obter
   a vers&#227;o em desenvolvimento do reposit&#243;rio SVN. Baixe o c&#243;digo fonte em vez de uma imagem bin&#225;ria, caso voc&#234; precise fazer ajustes no c&#243;digo fonte para suportar sua placa ou se voc&#234; quiser personalizar a imagem de &lt;b&gt;eLua&lt;/b&gt;, ou ainda se voc&#234; simplesmente quer dar uma olhada no que acontece por tr&#225;s do prompt &lt;i&gt;eLua# &lt;/i&gt; :)&lt;/li&gt;
 &lt;/ul&gt;
-&lt;br /&gt;
-&lt;br /&gt;
 &lt;a name=&quot;binaries&quot; /&gt;&lt;h3&gt;Imagens Bin&#225;rias&lt;/h3&gt;
-&lt;p&gt;Podem ser baixadas imagens bin&#225;rias de &lt;b&gt;eLua&lt;/b&gt; de cada lan&#231;amento oficial. Aqui abordaremos somente a &#250;ltima vers&#227;o oficial de &lt;b&gt;eLua&lt;/b&gt;, mas caso voc&#234; queira baixar uma imagem de uma vers&#227;o mais antiga (embora isso n&#227;o seja aconselh&#225;vel), visite &lt;a href=&quot;dl_old.html&quot;&gt;esta p&#225;gina&lt;/a&gt;. Escolha o arquivo imagem correspondente na tabela abaixo, grave-o em sua placa, ligue um terminal serial (ou ethernet se sua placa aceitar) e aproveite &lt;b&gt;eLua&lt;/b&gt;. Observe que tanto os &lt;b&gt;arquivos bin&#225;rios&lt;/b&gt; quanto a distribui&#231;&#227;o do c&#243;digo fonte de &lt;b&gt;eLua&lt;/b&gt;, incluem alguns programas de exemplos, sendo assim, voc&#234; poder&#225; rodar e jogar (sim, existem jogos tamb&#233;m!:), seguindo as instru&#231;&#245;es na nossa p&#225;gina &lt;a href=&quot;using.html&quot;&gt;Usando eLua&lt;/a&gt;. Os programas de exemplos dispon&#237;veis est&#227;o descritos na nossa &lt;a href=&quot;examples.html&quot;&gt;p&#225;gina de exemplos&lt;/a&gt;.&lt;/p&gt;&lt;br /&gt;
-&lt;p&gt;Se voc&#234; precisa de uma imagem bin&#225;ria personalizada para uma plataforma j&#225; suportada (por exemplo, com um programa de execu&#231;&#227;o autom&#225;tica, com algum c&#243;digo espec&#237;fico criado por voc&#234; j&#225; inclu&#237;do no sistema, com as configura&#231;&#245;es da sua rede IP) e as &lt;a href=&quot;building.html&quot;&gt;instru&#231;&#245;es para a gera&#231;&#227;o eLua&lt;/a&gt; n&#227;o servem para voc&#234;, sinta-se a vontade para &lt;a href=&quot;overview.html#contacts&quot;&gt;escrever-nos&lt;/a&gt; explicando o que voc&#234; precisa exatamente. Assim, tentaremos encontrar algum tempo para gerar uma imagem para voc&#234; e, eventualmente, tamb&#233;m disponibiliz&#225;-la aqui.&lt;/p&gt;&lt;br /&gt;
-&lt;p&gt;Para entender como &#233; feita a forma&#231;&#227;o de um nome de arquivo (por exemplo &lt;i&gt;elua_lualong_lm3s8962.bin&lt;/i&gt;) consulte nossa p&#225;gina &lt;a href=&quot;building.html&quot;&gt;Gerando eLua&lt;/a&gt;.&lt;/p&gt;
-&lt;!-- [NEWVER] --&gt;
+&lt;p&gt;Imagens bin&#225;rias  de &lt;b&gt;eLua&lt;/b&gt; podem ser baixadas para a grava&#231;&#227;o
+direta nas diversas plataformas suportadas. Est&#227;o dispon&#237;veis aqui apenas as
+imagens da &#250;ltima vers&#227;o oficial de &lt;b&gt;eLua&lt;/b&gt;. Caso voc&#234; precise baixar uma imagem de uma vers&#227;o mais antiga visite &lt;a href=&quot;dl_old.html&quot;&gt;esta p&#225;gina&lt;/a&gt;.
+&lt;/p&gt;
+&lt;p&gt;
+Escolha o arquivo correspondente &#224; sua plataforma na tabela abaixo, grave-o em sua placa, ligue um terminal serial (ou ethernet se sua placa aceitar) e aproveite &lt;b&gt;eLua&lt;/b&gt;. 
+Observe que tanto os &lt;b&gt;arquivos bin&#225;rios&lt;/b&gt; quanto a distribui&#231;&#227;o do c&#243;digo fonte de &lt;b&gt;eLua&lt;/b&gt; incluem alguns programas de
+exemplos. Sendo assim, voc&#234; poder&#225; rodar programas e jogar (sim, n&#243;s temos jogos tamb&#233;m! :), seguindo as instru&#231;&#245;es na nossa p&#225;gina &lt;a href=&quot;using.html&quot;&gt;Usando eLua&lt;/a&gt;. 
+Os programas de exemplos dispon&#237;veis est&#227;o descritos na nossa &lt;a href=&quot;examples.html&quot;&gt;p&#225;gina de exemplos&lt;/a&gt;.
+&lt;/p&gt;
+&lt;p&gt;Se voc&#234; precisa de uma imagem bin&#225;ria personalizada para uma plataforma j&#225; suportada (por exemplo, com um programa de execu&#231;&#227;o autom&#225;tica
+(autorun), com algum c&#243;digo espec&#237;fico criado por voc&#234; j&#225; inclu&#237;do no sistema, com as configura&#231;&#245;es da sua rede IP etc...) 
+e as &lt;a href=&quot;building.html&quot;&gt;instru&#231;&#245;es para a gera&#231;&#227;o eLua&lt;/a&gt; n&#227;o foram
+suficientes para voc&#234;, sinta-se a vontade para &lt;a href=&quot;overview.html#contacts&quot;&gt;escrever-nos&lt;/a&gt; explicando o que voc&#234; precisa exatamente. 
+Tentaremos assim encontrar algum tempo para gerar uma imagem para voc&#234; e, eventualmente, tamb&#233;m disponibiliz&#225;-la aqui.
+Para entender como &#233; feita a forma&#231;&#227;o de um nome de arquivo (por exemplo &lt;i&gt;elua_lualong_lm3s8962.bin&lt;/i&gt;) consulte nossa p&#225;gina &lt;a href=&quot;building.html&quot;&gt;Gerando eLua&lt;/a&gt;.
+&lt;/p&gt;
 &lt;table class=&quot;table_center&quot;&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
@@ -32,14 +43,14 @@
 &lt;tr&gt;
 &lt;td&gt;0.6&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104">http://www.atmel.com/dyn/products/Product_card.asp?part_id=4104</A>&quot;&gt;AT91SAM7X512&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;Nenhum&lt;/td&gt;
+&lt;td&gt;None&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x512.bin">http://prdownload.berlios.de/elua/elua0.6_lua_at91sam7x512.bin</A>&quot;&gt;elua0.6_lua_at91sam7x512.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;0.6&lt;/td&gt;
-&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (gen&#233;rico)&lt;/a&gt;&lt;/td&gt;
-&lt;td&gt;PCs/emuladores&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.intel.com">http://www.intel.com</A>&quot;&gt;i386 (generic)&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;PCs/emulators&lt;/td&gt;
 &lt;td&gt;double&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_i386.elf">http://prdownload.berlios.de/elua/elua0.6_lua_i386.elf</A>&quot;&gt;elua0.6_lua_i386.elf&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
@@ -78,13 +89,44 @@
 &lt;td&gt;double&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_str912fw44.bin">http://prdownload.berlios.de/elua/elua0.6_lua_str912fw44.bin</A>&quot;&gt;elua0.6_lua_str912fw44.bin&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.luminarymicro.com/products/LM3S6918.html">http://www.luminarymicro.com/products/LM3S6918.html</A>&quot;&gt;LM3S6918&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.micromint.com/index.php/SBC/eagle-100.html">http://www.micromint.com/index.php/SBC/eagle-100.html</A>&quot;&gt;Micromint Eagle 100&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6918.bin">http://prdownload.berlios.de/elua/elua0.6_lua_lm3s6918.bin</A>&quot;&gt;elua0.6_lua_lm3s918.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/products/product_card.asp?part_id=4117">http://www.atmel.com/dyn/products/product_card.asp?part_id=4117</A>&quot;&gt;AT32UC3A0512&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114">http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4114</A>&quot;&gt;ATEVK1100&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_at32uc3a0512.hex">http://prdownload.berlios.de/elua/elua0.6_lua_at32uc3a0512.hex</A>&quot;&gt;elua0.6_lua_at32uc3a0512.hex&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103RE-110.html">http://www.st.com/mcu/devicedocs-STM32F103RE-110.html</A>&quot;&gt;STM32F103RE&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.futurlec.com/ET-STM32_Stamp.shtml">http://www.futurlec.com/ET-STM32_Stamp.shtml</A>&quot;&gt;ET-STM32 Stamp&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103re.bin">http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103re.bin</A>&quot;&gt;elua0.6_lua_stm32f103re.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+&lt;td&gt;0.6&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html">http://www.st.com/mcu/devicedocs-STM32F103ZE-110.html</A>&quot;&gt;STM32F103ZE&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html">http://www.st.com/mcu/contentid-100-110-STM3210E_EVAL.html</A>&quot;&gt;STM3210E-EVAL&lt;/a&gt;&lt;/td&gt;
+&lt;td&gt;double&lt;/td&gt;
+&lt;td&gt;&lt;a href=&quot;<A HREF="http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103ze.bin">http://prdownload.berlios.de/elua/elua0.6_lua_stm32f103ze.bin</A>&quot;&gt;elua0.6_lua_stm32f103ze.bin&lt;/a&gt;&lt;/td&gt;
+&lt;/tr&gt;
 &lt;/tbody&gt;
 &lt;/table&gt;
-&lt;p&gt;&lt;b&gt;NOTA:&lt;/b&gt; &lt;i&gt;Tipo num&#233;rico de Lua&lt;/i&gt; refere-se ao tipo num&#233;rico do interpretador Lua gerado, ponto-flutuante ou inteiro, como j&#225; explicado na p&#225;gina &lt;a href=&quot;building.html&quot;&gt;Gerando eLua&lt;/a&gt;.&lt;/p&gt;
+&lt;p&gt;&lt;b&gt;NOTA:&lt;/b&gt; &lt;i&gt;Tipo num&#233;rico de Lua&lt;/i&gt; refere-se ao tipo num&#233;rico do interpretador Lua gerado, ponto-flutuante ou inteiro, como explicado na p&#225;gina &lt;a href=&quot;building.html&quot;&gt;Gerando eLua&lt;/a&gt;.&lt;/p&gt;
 &lt;br /&gt;
 &lt;br /&gt;
 &lt;a name=&quot;source&quot; /&gt;&lt;h3&gt;C&#243;digo Fonte&lt;/h3&gt;
-&lt;p&gt;Mas se tudo o que voc&#234; quer, &#233; dar uma espiada no c&#243;digo-fonte de &lt;b&gt;eLua&lt;/b&gt;, ent&#227;o n&#227;o &#233; preciso baix&#225;-lo, veja a &lt;a href=&quot;<A HREF="http://svn.berlios.de/wsvn/elua">http://svn.berlios.de/wsvn/elua</A>&quot;&gt;interface BerliOS WebSVN&lt;/a&gt;. Voc&#234; pode dessa maneira navegar atrav&#233;s do fonte completo de &lt;b&gt;eLua&lt;/b&gt;. Se realmente voc&#234; precisa baixar o c&#243;digo fonte de &lt;b&gt;eLua&lt;/b&gt;, poder&#225; tanto:&lt;/p&gt;
+&lt;p&gt;Se tudo o que voc&#234; quer &#233; dar uma espiada no c&#243;digo-fonte de &lt;b&gt;eLua&lt;/b&gt;
+sem ter que baixa-lo para sua m&#225;quina, voc&#234; pode utilizar a &lt;a href=&quot;<A HREF="http://svn.berlios.de/wsvn/elua">http://svn.berlios.de/wsvn/elua</A>&quot;&gt;interface BerliOS WebSVN&lt;/a&gt;. Voc&#234; pode dessa maneira navegar atrav&#233;s do fonte completo de
+&lt;b&gt;eLua&lt;/b&gt;.&lt;/p&gt;
+Se realmente voc&#234; precisa baixar o c&#243;digo fonte de &lt;b&gt;eLua&lt;/b&gt;, poder&#225; tanto:&lt;/p&gt;
 &lt;ul&gt;
   &lt;li&gt;Baixar o c&#243;digo-fonte de uma vers&#227;o oficial&lt;/li&gt;
   &lt;li&gt;Baixar o c&#243;digo-fonte do reposit&#243;rio SVN no modo s&#243; de leitura (modo an&#244;nimo)&lt;/li&gt;
@@ -116,17 +158,20 @@
 &lt;br /&gt;
 &lt;br /&gt;
 &lt;a name=&quot;svndev&quot; /&gt;&lt;h2&gt;Reposit&#243;rio p&#250;blico SVN (modo de grava&#231;&#227;o com login de autentica&#231;&#227;o, para desenvolvedores)&lt;/h2&gt;
-&lt;p&gt;Siga os passos abaixo, caso voc&#234; precise de acesso de grava&#231;&#227;o para o reposit&#243;rio &lt;b&gt;eLua&lt;/b&gt;:&lt;/p&gt;
+&lt;p&gt;Se voc&#234; deseja contribuir com c&#243;digo para o projeto, siga os passos abaixo para receber
+autoriza&#231;&#227;o de grava&#231;&#227;o no reposit&#243;rio oficial de &lt;b&gt;eLua&lt;/b&gt;:&lt;/p&gt;
 &lt;ul&gt;
-  &lt;li&gt;Crie uma conta de acesso ao &lt;a href=&quot;<A HREF="http://developer.berlios.de/">http://developer.berlios.de/</A>&quot;&gt;developer.berlios.de&lt;/a&gt;
-  caso voc&#234; planeje contribuir com c&#243;digo para o projeto.&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;overview.html#contacts&quot;&gt;Entre em contato conosco&lt;/a&gt; para identificar o seu ID e lhe daremos acesso de grava&#231;&#227;o
-  (commit) ao reposit&#243;rio subversion.&lt;/li&gt;
+  &lt;li&gt;Crie uma conta de acesso ao &lt;a href=&quot;<A HREF="http://developer.berlios.de/">http://developer.berlios.de/</A>&quot;&gt;developer.berlios.de&lt;/a&gt;&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;overview.html#contacts&quot;&gt;Entre em contato conosco&lt;/a&gt;, informando o ID
+  criado e lhe daremos acesso de grava&#231;&#227;o (commit) ao reposit&#243;rio subversion.&lt;/li&gt;
 &lt;/ul&gt;
-&lt;p&gt;Ent&#227;o, fa&#231;a uma verifica&#231;&#227;o no reposit&#243;rio:&lt;/p&gt;
+&lt;p&gt;Como o acesso autenticado ao reposit&#243;rio oficial de &lt;b&gt;eLua&lt;/b&gt; &#233; feito
+atrav&#233;s de forma segura em protocolo ssh, voc&#234; precisa criar uma vari&#225;vel de ambiente com seu login name criado no BerliOS:&lt;/p&gt;
 &lt;pre&gt;$ export SVN_SSH='ssh -l &lt;yourberliosid&gt;'
 $ svn checkout svn+<A HREF="ssh://svn.berlios.de/svnroot/repos/elua/trunk&lt;/pre">ssh://svn.berlios.de/svnroot/repos/elua/trunk&lt;/pre</A>&gt;
-&lt;p&gt;Uma v&#234;z feito, o reposit&#243;rio poder&#225; ser facilmente atualizado com:&lt;/p&gt;
+&lt;p&gt;Uma v&#234;z feito isto, o reposit&#243;rio poder&#225; ser facilmente atualizado com:&lt;/p&gt;
 &lt;pre&gt;$ svn update&lt;/pre&gt;
+&lt;p&gt;e seu acesso de grava&#231;&#227;o estar&#225; autenticado com:
+&lt;pre&gt;$ svn commit&lt;/pre&gt;
 $$FOOTER$$
 

Modified: branches/eagle_mmc/doc/pt/examples.html
===================================================================
--- branches/eagle_mmc/doc/pt/examples.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/pt/examples.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,9 +1,11 @@
 $$HEADER$$
-&lt;h3&gt;Exemplos de c&#243;digo Lua&lt;/h3&gt;Distribui&#231;&#245;es eLua trazem &#243;timos e interessantes (claro! tem jogos tamb&#233;m! :) exemplos de programas em Lua.
-Eles est&#227;o inclu&#237;dos tamb&#233;m na distribui&#231;&#227;o que vem com os c&#243;digos fontes, no subdiret&#243;rio /romfs. &lt;br&gt;Programas Lua para eLua s&#227;o mostrados e comentados aqui tamb&#233;m. &lt;br&gt;Como j&#225; foi dito, voc&#234; pode rod&#225;-los a partir do sistema de arquivos de eLua ou pode usar o shell de eLua e envi&#225;-los atrav&#233;s do XMODEM, como or you can use the eLua shell and send them via XMODEM, as
-descrito &lt;a href=&quot;using.html#shell&quot;&gt;aqui&lt;/a&gt;.&lt;br&gt;&lt;br&gt;
+&lt;h3&gt;Exemplos de c&#243;digo Lua&lt;/h3&gt;Distribui&#231;&#245;es eLua trazem &#243;timos e interessantes exemplos de programas em Lua
+(Sim ! Temos jogos tamb&#233;m ! :).
+Eles tamb&#233;m est&#227;o inclu&#237;dos na distribui&#231;&#227;o que vem com os c&#243;digos fontes, no subdiret&#243;rio /romfs. &lt;br&gt;Programas Lua para eLua s&#227;o mostrados e comentados aqui tamb&#233;m. &lt;br&gt;
+Como j&#225; foi dito, voc&#234; pode rod&#225;-los a partir do sistema de arquivos de eLua ou pode usar o shell de eLua e envi&#225;-los atrav&#233;s do XMODEM
+para seus kits, como descrito &lt;a href=&quot;using.html#shell&quot;&gt;aqui&lt;/a&gt;.&lt;br&gt;&lt;br&gt;
 
-&lt;h3&gt;&lt;a name=&quot;hello&quot;&gt;&lt;/a&gt;hello.lua: o ob&#237;quo &quot;Hello, World!&quot;&lt;/h3&gt;
+&lt;h3&gt;&lt;a name=&quot;hello&quot;&gt;&lt;/a&gt;hello.lua: &quot;Hello, World!&quot;&lt;/h3&gt;
 
 &lt;p&gt;&lt;strong&gt;Roda em:&nbsp;&lt;/strong&gt;&lt;br&gt;Todas as arquiteturas&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;/strong&gt;
 
@@ -18,7 +20,8 @@
 mais sobre os m&#243;dulos &quot;platform&quot; na distribui&#231;&#227;o do c&#243;digo fonte 
 (docs/platform_modules.txt). O programa mostrar&#225; o nome da plataforma, o nome da CPU, o nome da placa e o clock da CPU e ent&#227;o finaliza e volta para o shell.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;C&#243;digo fonte comentado:&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;-- Usa o m&#243;dulo pd para ter acesso aos dados da plataforma e mostr&#225;-lo no Terminal &lt;/span&gt;&lt;br&gt;&lt;span&gt;print( &quot;Estou usando a platforma &quot; .. pd.platform() ) &nbsp;&lt;/span&gt;&lt;br&gt;&lt;span&gt;print( &quot;A CPU &#233; uma &quot; .. pd.cpu() )&lt;/span&gt;&lt;br&gt;&lt;span&gt;&lt;span&gt;print( &quot;A placa &#233; uma &quot; .. pd.board(&lt;/span&gt;) )&lt;/span&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
 
-&lt;h3&gt;&lt;a name=&quot;led&quot;&gt;&lt;/a&gt;led.lua: o velho LED que pisca, jeito novo de fazer com eLua&lt;/h3&gt;
+&lt;h3&gt;&lt;a name=&quot;led&quot;&gt;&lt;/a&gt;led.lua: O Hello World do mundo embedded ! :) O velho LED que pisca,
+agora via eLua&lt;/h3&gt;
 
 &lt;p&gt;&lt;strong&gt;Roda em: &lt;/strong&gt;&lt;br&gt;Todas as arquiteturas exceto i386&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Descri&#231;&#227;o:&lt;br&gt;&lt;/strong&gt;&lt;strong&gt;&lt;/strong&gt;
 Agora temos que fazer algo com &quot;cara&quot; de embarcado: piscar um LED. O c&#243;digo a seguir ilustra alguns recursos interessantes de eLua:&lt;/p&gt;

Modified: branches/eagle_mmc/doc/pt/news.html
===================================================================
--- branches/eagle_mmc/doc/pt/news.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/pt/news.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,5 +1,23 @@
 $$HEADER$$
 &lt;h3&gt;eLua Project News&lt;/h3&gt;
+
+&lt;h2&gt;24 de Dezembro de 2009&lt;/h2&gt;
+&lt;p&gt;Lan&#231;ada a vers&#227;o 0.7 de &lt;strong&gt;eLua&lt;/strong&gt;. As principais caracter&#237;sticas 
+est&#227;o descritas a seguir. Para uma lista mais completa das
+novidades, por favor consulte nossa p&#225;gina de &lt;a href=&quot;versionhistory.html&quot;&gt;Hist&#243;rico das Vers&#245;es:&lt;/a&gt;
+&lt;/p&gt;
+&lt;ul&gt;
+  &lt;li&gt;Adicionado o patch Lua EGC (Emergency Garbage Collection)&lt;/li&gt;
+  &lt;li&gt;Novo FAT File System para SD/MMC Cards, gen&#233;rico e port&#225;til.&lt;/li&gt;
+  &lt;li&gt;Suporte &#224; LuaRPC. Remote Procedure Calls no mundo embedded.&lt;/li&gt;
+  &lt;li&gt;Novo comando para o shell de eLua, cat/type, lista o conte&#250;do de arquivos de texto&lt;/li&gt;
+  &lt;li&gt;Suporte ao kit Olimex STR-E912, com MCU ST Electronics STR912FW44X&lt;/li&gt;
+  &lt;li&gt;Suporte ao kit PUC-Rio eLua Demo Board, com MCU NXP LPC2468&lt;/li&gt;
+  &lt;li&gt;Mais conte&#250;do traduzido para Portugu&#234;s&lt;/li&gt;
+  &lt;li&gt;M&#243;dulo ADC e sua doc melhorados&lt;/li&gt;
+&lt;/ul&gt;
+
+
 &lt;h2&gt;06 de Outubro de 2009&lt;/h2&gt;
 &lt;p&gt;A vers&#227;o 0.6 de &lt;strong&gt;eLua&lt;/strong&gt; foi lan&#231;ada. As principais
 caracter&#237;sticas est&#227;o descritas a seguir. Para uma lista mais completa das

Modified: branches/eagle_mmc/doc/pt/status.html
===================================================================
--- branches/eagle_mmc/doc/pt/status.html	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/doc/pt/status.html	2009-12-24 00:45:27 UTC (rev 610)
@@ -88,18 +88,41 @@
 &lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;ARM966E-S&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;str9&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.hitex.com/index.php?id=383">http://www.hitex.com/index.php?id=383</A>&quot;&gt;STR9-comStick&lt;/a&gt;&lt;/td&gt;
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR912FAW44-101.html">http://www.st.com/mcu/devicedocs-STR912FAW44-101.html</A>&quot;&gt;STR912FAW44&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;ARM966E-S&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;STR&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/str-e912.html">http://www.olimex.com/dev/str-e912.html</A>&quot;&gt;STR-E912&lt;/a&gt;&lt;/td&gt;
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html">http://www.standardics.nxp.com/microcontrollers/to/pip/LPC2880FET180.html</A>&quot;&gt;LPC2888&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;ARM7TDMI&lt;/td&gt;
-  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;lpc288x&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC288x&lt;/td&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.olimex.com/dev/lpc-h2888.html">http://www.olimex.com/dev/lpc-h2888.html</A>&quot;&gt;LPC-H2888&lt;/a&gt;&lt;/td&gt;  
   &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
+  &lt;td&gt;&lt;a
+  href=&quot;<A HREF="http://www.nxp.com/#/pip/pip=[pip=LPC2468_4">http://www.nxp.com/#/pip/pip=[pip=LPC2468_4</A>]|pp=[t=pip,i=LPC2468_4]&quot;&gt;LPC2468&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;ARM7TDMI&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC24xx&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.giga.puc-rio.br/site/embedded/eluademoboard">http://www.giga.puc-rio.br/site/embedded/eluademoboard</A>&quot;&gt;PUC-Rio Demo Board&lt;/a&gt;&lt;/td&gt;  
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
+  &lt;td&gt;&lt;a
+  href=&quot;<A HREF="http://www.nxp.com/#/pip/pip=[pip=LPC1768_66_65_64_2">http://www.nxp.com/#/pip/pip=[pip=LPC1768_66_65_64_2</A>]|pp=[t=pip,i=LPC1768_66_65_64_2]&quot;&gt;LPC1768&lt;/a&gt;&lt;/td&gt;
+  &lt;td&gt;Cortex-M3&lt;/td&gt;
+  &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;LPC17xx&lt;/td&gt;
+  &lt;td&gt;&lt;a href=&quot;<A HREF="http://hackaday.com/2009/11/21/review-mbed-nxp-lpc1768-microcontroller/">http://hackaday.com/2009/11/21/review-mbed-nxp-lpc1768-microcontroller/</A>&quot;&gt;mbed&lt;/a&gt;&lt;/td&gt;  
+  &lt;td style=&quot;text-align: center;&quot;&gt;&lt;img src=&quot;images/stat_ok.png&quot; alt=&quot;Status: OK&quot; /&gt;&lt;/td&gt;
+&lt;/tr&gt;
+&lt;tr&gt;
   &lt;td&gt;&lt;a href=&quot;<A HREF="http://www.st.com/mcu/devicedocs-STR711FR2.html">http://www.st.com/mcu/devicedocs-STR711FR2.html</A>&quot;&gt;STR711FR2&lt;/a&gt;&lt;/td&gt;
   &lt;td&gt;ARM7TDMI&lt;/td&gt;
   &lt;td style=&quot;color: rgb(255, 102, 0);&quot;&gt;str7&lt;/td&gt;

Modified: branches/eagle_mmc/inc/luarpc_rpc.h
===================================================================
--- branches/eagle_mmc/inc/luarpc_rpc.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/inc/luarpc_rpc.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,7 +1,7 @@
 #include &quot;cexcept.h&quot;
 #include &lt;stdint.h&gt;
 
-#ifdef LUA_REMOTE
+#ifdef LUA_RPC
 /* signed and unsigned 8, 16 and 32 bit types */
 typedef uint8_t u8;
 typedef uint16_t u16;
@@ -104,6 +104,7 @@
 struct _Transport 
 {
   int fd;      /* INVALID_TRANSPORT if socket is closed */
+  unsigned tmr_id;
   u8     loc_little: 1, // Local is little endian?
          loc_armflt: 1, // local float representation is arm float?
          loc_intnum: 1, // Local is integer only?

Modified: branches/eagle_mmc/inc/platform.h
===================================================================
--- branches/eagle_mmc/inc/platform.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/inc/platform.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -72,6 +72,13 @@
 // Maximum length for any CAN message
 #define PLATFORM_CAN_MAXLEN                   8
 
+// eLua CAN ID types
+enum
+{
+  ELUA_CAN_ID_STD = 0,
+  ELUA_CAN_ID_EXT
+};
+
 int platform_can_exists( unsigned id );
 u32 platform_can_setup( unsigned id, u32 clock );
 void platform_can_send( unsigned id, u32 canid, u8 idtype, u8 len, const u8 *data );

Modified: branches/eagle_mmc/inc/version.h
===================================================================
--- branches/eagle_mmc/inc/version.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/inc/version.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -3,7 +3,7 @@
 #ifndef __VERSION_H__
 #define __VERSION_H__
 
-#define     ELUA_VERSION          0.6
-#define     ELUA_STR_VERSION      &quot;0.6&quot;
+#define     ELUA_VERSION          0.7
+#define     ELUA_STR_VERSION      &quot;0.7&quot;
 
 #endif

Added: branches/eagle_mmc/luasrcdiet.lua
===================================================================
--- branches/eagle_mmc/luasrcdiet.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/luasrcdiet.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,3725 @@
+#!/usr/bin/env lua
+
+package.preload['llex'] = (function (...)
+--[[--------------------------------------------------------------------
+
+  llex.lua: Lua 5.1 lexical analyzer in Lua
+  This file is part of LuaSrcDiet, based on Yueliang material.
+
+  Copyright (c) 2008 Kein-Hong Man &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">khman at users.sf.net</A>&gt;
+  The COPYRIGHT file describes the conditions
+  under which this software may be distributed.
+
+  See the ChangeLog for more information.
+
+----------------------------------------------------------------------]]
+
+--[[--------------------------------------------------------------------
+-- NOTES:
+-- * This is a version of the native 5.1.x lexer from Yueliang 0.4.0,
+--   with significant modifications to handle LuaSrcDiet's needs:
+--   (1) llex.error is an optional error function handler
+--   (2) seminfo for strings include their delimiters and no
+--       translation operations are performed on them
+-- * ADDED shbang handling has been added to support executable scripts
+-- * NO localized decimal point replacement magic
+-- * NO limit to number of lines
+-- * NO support for compatible long strings (LUA_COMPAT_LSTR)
+-- * Please read technotes.txt for more technical details.
+----------------------------------------------------------------------]]
+
+local base = _G
+local string = string
+module &quot;llex&quot;
+
+local find = string.find
+local match = string.match
+local sub = string.sub
+
+----------------------------------------------------------------------
+-- initialize keyword list, variables
+----------------------------------------------------------------------
+
+local kw = {}
+for v in string.gmatch([[
+and break do else elseif end false for function if in
+local nil not or repeat return then true until while]], &quot;%S+&quot;) do
+  kw[v] = true
+end
+
+-- NOTE: see init() for module variables (externally visible):
+--       tok, seminfo, tokln
+
+local z,                -- source stream
+      sourceid,         -- name of source
+      I,                -- position of lexer
+      buff,             -- buffer for strings
+      ln                -- line number
+
+----------------------------------------------------------------------
+-- add information to token listing
+----------------------------------------------------------------------
+
+local function addtoken(token, info)
+  local i = #tok + 1
+  tok[i] = token
+  seminfo[i] = info
+  tokln[i] = ln
+end
+
+----------------------------------------------------------------------
+-- handles line number incrementation and end-of-line characters
+----------------------------------------------------------------------
+
+local function inclinenumber(i, is_tok)
+  local sub = sub
+  local old = sub(z, i, i)
+  i = i + 1  -- skip '\n' or '\r'
+  local c = sub(z, i, i)
+  if (c == &quot;\n&quot; or c == &quot;\r&quot;) and (c ~= old) then
+    i = i + 1  -- skip '\n\r' or '\r\n'
+    old = old..c
+  end
+  if is_tok then addtoken(&quot;TK_EOL&quot;, old) end
+  ln = ln + 1
+  I = i
+  return i
+end
+
+----------------------------------------------------------------------
+-- initialize lexer for given source _z and source name _sourceid
+----------------------------------------------------------------------
+
+function init(_z, _sourceid)
+  z = _z                        -- source
+  sourceid = _sourceid          -- name of source
+  I = 1                         -- lexer's position in source
+  ln = 1                        -- line number
+  tok = {}                      -- lexed token list*
+  seminfo = {}                  -- lexed semantic information list*
+  tokln = {}                    -- line numbers for messages*
+                                -- (*) externally visible thru' module
+  --------------------------------------------------------------------
+  -- initial processing (shbang handling)
+  --------------------------------------------------------------------
+  local p, _, q, r = find(z, &quot;^(#[^\r\n]*)(\r?\n?)&quot;)
+  if p then                             -- skip first line
+    I = I + #q
+    addtoken(&quot;TK_COMMENT&quot;, q)
+    if #r &gt; 0 then inclinenumber(I, true) end
+  end
+end
+
+----------------------------------------------------------------------
+-- returns a chunk name or id, no truncation for long names
+----------------------------------------------------------------------
+
+function chunkid()
+  if sourceid and match(sourceid, &quot;^[=@]&quot;) then
+    return sub(sourceid, 2)  -- remove first char
+  end
+  return &quot;[string]&quot;
+end
+
+----------------------------------------------------------------------
+-- formats error message and throws error
+-- * a simplified version, does not report what token was responsible
+----------------------------------------------------------------------
+
+function errorline(s, line)
+  local e = error or base.error
+  e(string.format(&quot;%s:%d: %s&quot;, chunkid(), line or ln, s))
+end
+local errorline = errorline
+
+------------------------------------------------------------------------
+-- count separators (&quot;=&quot;) in a long string delimiter
+------------------------------------------------------------------------
+
+local function skip_sep(i)
+  local sub = sub
+  local s = sub(z, i, i)
+  i = i + 1
+  local count = #match(z, &quot;=*&quot;, i)  -- note, take the length
+  i = i + count
+  I = i
+  return (sub(z, i, i) == s) and count or (-count) - 1
+end
+
+----------------------------------------------------------------------
+-- reads a long string or long comment
+----------------------------------------------------------------------
+
+local function read_long_string(is_str, sep)
+  local i = I + 1  -- skip 2nd '['
+  local sub = sub
+  local c = sub(z, i, i)
+  if c == &quot;\r&quot; or c == &quot;\n&quot; then  -- string starts with a newline?
+    i = inclinenumber(i)  -- skip it
+  end
+  local j = i
+  while true do
+    local p, q, r = find(z, &quot;([\r\n%]])&quot;, i) -- (long range)
+    if not p then
+      errorline(is_str and &quot;unfinished long string&quot; or
+                &quot;unfinished long comment&quot;)
+    end
+    i = p
+    if r == &quot;]&quot; then                    -- delimiter test
+      if skip_sep(i) == sep then
+        buff = sub(z, buff, I)
+        I = I + 1  -- skip 2nd ']'
+        return buff
+      end
+      i = I
+    else                                -- newline
+      buff = buff..&quot;\n&quot;
+      i = inclinenumber(i)
+    end
+  end--while
+end
+
+----------------------------------------------------------------------
+-- reads a string
+----------------------------------------------------------------------
+
+local function read_string(del)
+  local i = I
+  local find = find
+  local sub = sub
+  while true do
+    local p, q, r = find(z, &quot;([\n\r\\\&quot;\'])&quot;, i) -- (long range)
+    if p then
+      if r == &quot;\n&quot; or r == &quot;\r&quot; then
+        errorline(&quot;unfinished string&quot;)
+      end
+      i = p
+      if r == &quot;\\&quot; then                         -- handle escapes
+        i = i + 1
+        r = sub(z, i, i)
+        if r == &quot;&quot; then break end -- (EOZ error)
+        p = find(&quot;abfnrtv\n\r&quot;, r, 1, true)
+        ------------------------------------------------------
+        if p then                               -- special escapes
+          if p &gt; 7 then
+            i = inclinenumber(i)
+          else
+            i = i + 1
+          end
+        ------------------------------------------------------
+        elseif find(r, &quot;%D&quot;) then               -- other non-digits
+          i = i + 1
+        ------------------------------------------------------
+        else                                    -- \xxx sequence
+          local p, q, s = find(z, &quot;^(%d%d?%d?)&quot;, i)
+          i = q + 1
+          if s + 1 &gt; 256 then -- UCHAR_MAX
+            errorline(&quot;escape sequence too large&quot;)
+          end
+        ------------------------------------------------------
+        end--if p
+      else
+        i = i + 1
+        if r == del then                        -- ending delimiter
+          I = i
+          return sub(z, buff, i - 1)            -- return string
+        end
+      end--if r
+    else
+      break -- (error)
+    end--if p
+  end--while
+  errorline(&quot;unfinished string&quot;)
+end
+
+------------------------------------------------------------------------
+-- main lexer function
+------------------------------------------------------------------------
+
+function llex()
+  local find = find
+  local match = match
+  while true do--outer
+    local i = I
+    -- inner loop allows break to be used to nicely section tests
+    while true do--inner
+      ----------------------------------------------------------------
+      local p, _, r = find(z, &quot;^([_%a][_%w]*)&quot;, i)
+      if p then
+        I = i + #r
+        if kw[r] then
+          addtoken(&quot;TK_KEYWORD&quot;, r)             -- reserved word (keyword)
+        else
+          addtoken(&quot;TK_NAME&quot;, r)                -- identifier
+        end
+        break -- (continue)
+      end
+      ----------------------------------------------------------------
+      local p, _, r = find(z, &quot;^(%.?)%d&quot;, i)
+      if p then                                 -- numeral
+        if r == &quot;.&quot; then i = i + 1 end
+        local _, q, r = find(z, &quot;^%d*[%.%d]*([eE]?)&quot;, i)
+        i = q + 1
+        if #r == 1 then                         -- optional exponent
+          if match(z, &quot;^[%+%-]&quot;, i) then        -- optional sign
+            i = i + 1
+          end
+        end
+        local _, q = find(z, &quot;^[_%w]*&quot;, i)
+        I = q + 1
+        local v = sub(z, p, q)                  -- string equivalent
+        if not base.tonumber(v) then            -- handles hex test also
+          errorline(&quot;malformed number&quot;)
+        end
+        addtoken(&quot;TK_NUMBER&quot;, v)
+        break -- (continue)
+      end
+      ----------------------------------------------------------------
+      local p, q, r, t = find(z, &quot;^((%s)[ \t\v\f]*)&quot;, i)
+      if p then
+        if t == &quot;\n&quot; or t == &quot;\r&quot; then          -- newline
+          inclinenumber(i, true)
+        else
+          I = q + 1                             -- whitespace
+          addtoken(&quot;TK_SPACE&quot;, r)
+        end
+        break -- (continue)
+      end
+      ----------------------------------------------------------------
+      local r = match(z, &quot;^%p&quot;, i)
+      if r then
+        buff = i
+        local p = find(&quot;-[\&quot;\'.=&lt;&gt;~&quot;, r, 1, true)
+        if p then
+          -- two-level if block for punctuation/symbols
+          --------------------------------------------------------
+          if p &lt;= 2 then
+            if p == 1 then                      -- minus
+              local c = match(z, &quot;^%-%-(%[?)&quot;, i)
+              if c then
+                i = i + 2
+                local sep = -1
+                if c == &quot;[&quot; then
+                  sep = skip_sep(i)
+                end
+                if sep &gt;= 0 then                -- long comment
+                  addtoken(&quot;TK_LCOMMENT&quot;, read_long_string(false, sep))
+                else                            -- short comment
+                  I = find(z, &quot;[\n\r]&quot;, i) or (#z + 1)
+                  addtoken(&quot;TK_COMMENT&quot;, sub(z, buff, I - 1))
+                end
+                break -- (continue)
+              end
+              -- (fall through for &quot;-&quot;)
+            else                                -- [ or long string
+              local sep = skip_sep(i)
+              if sep &gt;= 0 then
+                addtoken(&quot;TK_LSTRING&quot;, read_long_string(true, sep))
+              elseif sep == -1 then
+                addtoken(&quot;TK_OP&quot;, &quot;[&quot;)
+              else
+                errorline(&quot;invalid long string delimiter&quot;)
+              end
+              break -- (continue)
+            end
+          --------------------------------------------------------
+          elseif p &lt;= 5 then
+            if p &lt; 5 then                       -- strings
+              I = i + 1
+              addtoken(&quot;TK_STRING&quot;, read_string(r))
+              break -- (continue)
+            end
+            r = match(z, &quot;^%.%.?%.?&quot;, i)        -- .|..|... dots
+            -- (fall through)
+          --------------------------------------------------------
+          else                                  -- relational
+            r = match(z, &quot;^%p=?&quot;, i)
+            -- (fall through)
+          end
+        end
+        I = i + #r
+        addtoken(&quot;TK_OP&quot;, r)  -- for other symbols, fall through
+        break -- (continue)
+      end
+      ----------------------------------------------------------------
+      local r = sub(z, i, i)
+      if r ~= &quot;&quot; then
+        I = i + 1
+        addtoken(&quot;TK_OP&quot;, r)                    -- other single-char tokens
+        break
+      end
+      addtoken(&quot;TK_EOS&quot;, &quot;&quot;)                    -- end of stream,
+      return                                    -- exit here
+      ----------------------------------------------------------------
+    end--while inner
+  end--while outer
+end
+
+return base.getfenv()
+end)
+package.preload['lparser'] = (function (...)
+--[[--------------------------------------------------------------------
+
+  lparser.lua: Lua 5.1 parser in Lua
+  This file is part of LuaSrcDiet, based on Yueliang material.
+
+  Copyright (c) 2008 Kein-Hong Man &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">khman at users.sf.net</A>&gt;
+  The COPYRIGHT file describes the conditions
+  under which this software may be distributed.
+
+  See the ChangeLog for more information.
+
+----------------------------------------------------------------------]]
+
+--[[--------------------------------------------------------------------
+-- NOTES:
+-- * This is a version of the native 5.1.x parser from Yueliang 0.4.0,
+--   with significant modifications to handle LuaSrcDiet's needs:
+--   (1) needs pre-built token tables instead of a module.method
+--   (2) lparser.error is an optional error handler (from llex)
+--   (3) not full parsing, currently fakes raw/unlexed constants
+--   (4) parser() returns globalinfo, localinfo tables
+-- * Please read technotes.txt for more technical details.
+-- * NO support for 'arg' vararg functions (LUA_COMPAT_VARARG)
+-- * A lot of the parser is unused, but might later be useful for
+--   full-on parsing and analysis for a few measly bytes saved.
+----------------------------------------------------------------------]]
+
+local base = _G
+local string = string
+module &quot;lparser&quot;
+local _G = base.getfenv()
+
+--[[--------------------------------------------------------------------
+-- variable and data structure initialization
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- initialization: main variables
+----------------------------------------------------------------------
+
+local toklist,                  -- grammar-only token tables (token table,
+      seminfolist,              -- semantic information table, line number
+      toklnlist,                -- table, cross-reference table)
+      xreflist,
+      tpos,                     -- token position
+
+      line,                     -- start line # for error messages
+      lastln,                   -- last line # for ambiguous syntax chk
+      tok, seminfo, ln, xref,   -- token, semantic info, line
+      nameref,                  -- proper position of &lt;name&gt; token
+      fs,                       -- current function state
+      top_fs,                   -- top-level function state
+
+      globalinfo,               -- global variable information table
+      globallookup,             -- global variable name lookup table
+      localinfo,                -- local variable information table
+      ilocalinfo,               -- inactive locals (prior to activation)
+      ilocalrefs                -- corresponding references to activate
+
+-- forward references for local functions
+local explist1, expr, block, exp1, body, chunk
+
+----------------------------------------------------------------------
+-- initialization: data structures
+----------------------------------------------------------------------
+
+local gmatch = string.gmatch
+
+local block_follow = {}         -- lookahead check in chunk(), returnstat()
+for v in gmatch(&quot;else elseif end until &lt;eof&gt;&quot;, &quot;%S+&quot;) do
+  block_follow[v] = true
+end
+
+local stat_call = {}            -- lookup for calls in stat()
+for v in gmatch(&quot;if while do for repeat function local return break&quot;, &quot;%S+&quot;) do
+  stat_call[v] = v..&quot;_stat&quot;
+end
+
+local binopr_left = {}          -- binary operators, left priority
+local binopr_right = {}         -- binary operators, right priority
+for op, lt, rt in gmatch([[
+{+ 6 6}{- 6 6}{* 7 7}{/ 7 7}{% 7 7}
+{^ 10 9}{.. 5 4}
+{~= 3 3}{== 3 3}
+{&lt; 3 3}{&lt;= 3 3}{&gt; 3 3}{&gt;= 3 3}
+{and 2 2}{or 1 1}
+]], &quot;{(%S+)%s(%d+)%s(%d+)}&quot;) do
+  binopr_left[op] = lt + 0
+  binopr_right[op] = rt + 0
+end
+
+local unopr = { [&quot;not&quot;] = true, [&quot;-&quot;] = true,
+                [&quot;#&quot;] = true, } -- unary operators
+local UNARY_PRIORITY = 8        -- priority for unary operators
+
+--[[--------------------------------------------------------------------
+-- support functions
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- formats error message and throws error (duplicated from llex)
+-- * a simplified version, does not report what token was responsible
+----------------------------------------------------------------------
+
+local function errorline(s, line)
+  local e = error or base.error
+  e(string.format(&quot;(source):%d: %s&quot;, line or ln, s))
+end
+
+----------------------------------------------------------------------
+-- handles incoming token, semantic information pairs
+-- * NOTE: 'nextt' is named 'next' originally
+----------------------------------------------------------------------
+
+-- reads in next token
+local function nextt()
+  lastln = toklnlist[tpos]
+  tok, seminfo, ln, xref
+    = toklist[tpos], seminfolist[tpos], toklnlist[tpos], xreflist[tpos]
+  tpos = tpos + 1
+end
+
+-- peek at next token (single lookahead for table constructor)
+local function lookahead()
+  return toklist[tpos]
+end
+
+----------------------------------------------------------------------
+-- throws a syntax error, or if token expected is not there
+----------------------------------------------------------------------
+
+local function syntaxerror(msg)
+  local tok = tok
+  if tok ~= &quot;&lt;number&gt;&quot; and tok ~= &quot;&lt;string&gt;&quot; then
+    if tok == &quot;&lt;name&gt;&quot; then tok = seminfo end
+    tok = &quot;'&quot;..tok..&quot;'&quot;
+  end
+  errorline(msg..&quot; near &quot;..tok)
+end
+
+local function error_expected(token)
+  syntaxerror(&quot;'&quot;..token..&quot;' expected&quot;)
+end
+
+----------------------------------------------------------------------
+-- tests for a token, returns outcome
+-- * return value changed to boolean
+----------------------------------------------------------------------
+
+local function testnext(c)
+  if tok == c then nextt(); return true end
+end
+
+----------------------------------------------------------------------
+-- check for existence of a token, throws error if not found
+----------------------------------------------------------------------
+
+local function check(c)
+  if tok ~= c then error_expected(c) end
+end
+
+----------------------------------------------------------------------
+-- verify existence of a token, then skip it
+----------------------------------------------------------------------
+
+local function checknext(c)
+  check(c); nextt()
+end
+
+----------------------------------------------------------------------
+-- throws error if condition not matched
+----------------------------------------------------------------------
+
+local function check_condition(c, msg)
+  if not c then syntaxerror(msg) end
+end
+
+----------------------------------------------------------------------
+-- verifies token conditions are met or else throw error
+----------------------------------------------------------------------
+
+local function check_match(what, who, where)
+  if not testnext(what) then
+    if where == ln then
+      error_expected(what)
+    else
+      syntaxerror(&quot;'&quot;..what..&quot;' expected (to close '&quot;..who..&quot;' at line &quot;..where..&quot;)&quot;)
+    end
+  end
+end
+
+----------------------------------------------------------------------
+-- expect that token is a name, return the name
+----------------------------------------------------------------------
+
+local function str_checkname()
+  check(&quot;&lt;name&gt;&quot;)
+  local ts = seminfo
+  nameref = xref
+  nextt()
+  return ts
+end
+
+----------------------------------------------------------------------
+-- adds given string s in string pool, sets e as VK
+----------------------------------------------------------------------
+
+local function codestring(e, s)
+  e.k = &quot;VK&quot;
+end
+
+----------------------------------------------------------------------
+-- consume a name token, adds it to string pool
+----------------------------------------------------------------------
+
+local function checkname(e)
+  codestring(e, str_checkname())
+end
+
+--[[--------------------------------------------------------------------
+-- variable (global|local|upvalue) handling
+-- * to track locals and globals, we can extend Yueliang's minimal
+--   variable management code with little trouble
+-- * entry point is singlevar() for variable lookups
+-- * lookup tables (bl.locallist) are maintained awkwardly in the basic
+--   block data structures, PLUS the function data structure (this is
+--   an inelegant hack, since bl is nil for the top level of a function)
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- register a local variable, create local variable object, set in
+-- to-activate variable list
+-- * used in new_localvarliteral(), parlist(), fornum(), forlist(),
+--   localfunc(), localstat()
+----------------------------------------------------------------------
+
+local function new_localvar(name, special)
+  local bl = fs.bl
+  local locallist
+  -- locate locallist in current block object or function root object
+  if bl then
+    locallist = bl.locallist
+  else
+    locallist = fs.locallist
+  end
+  -- build local variable information object and set localinfo
+  local id = #localinfo + 1
+  localinfo[id] = {             -- new local variable object
+    name = name,                -- local variable name
+    xref = { nameref },         -- xref, first value is declaration
+    decl = nameref,             -- location of declaration, = xref[1]
+  }
+  if special then               -- &quot;self&quot; must be not be changed
+    localinfo[id].isself = true
+  end
+  -- this can override a local with the same name in the same scope
+  -- but first, keep it inactive until it gets activated
+  local i = #ilocalinfo + 1
+  ilocalinfo[i] = id
+  ilocalrefs[i] = locallist
+end
+
+----------------------------------------------------------------------
+-- actually activate the variables so that they are visible
+-- * remember Lua semantics, e.g. RHS is evaluated first, then LHS
+-- * used in parlist(), forbody(), localfunc(), localstat(), body()
+----------------------------------------------------------------------
+
+local function adjustlocalvars(nvars)
+  local sz = #ilocalinfo
+  -- i goes from left to right, in order of local allocation, because
+  -- of something like: local a,a,a = 1,2,3 which gives a = 3
+  while nvars &gt; 0 do
+    nvars = nvars - 1
+    local i = sz - nvars
+    local id = ilocalinfo[i]            -- local's id
+    local obj = localinfo[id]
+    local name = obj.name               -- name of local
+    obj.act = xref                      -- set activation location
+    ilocalinfo[i] = nil
+    local locallist = ilocalrefs[i]     -- ref to lookup table to update
+    ilocalrefs[i] = nil
+    local existing = locallist[name]    -- if existing, remove old first!
+    if existing then                    -- do not overlap, set special
+      obj = localinfo[existing]         -- form of rem, as -id
+      obj.rem = -id
+    end
+    locallist[name] = id                -- activate, now visible to Lua
+  end
+end
+
+----------------------------------------------------------------------
+-- remove (deactivate) variables in current scope (before scope exits)
+-- * zap entire locallist tables since we are not allocating registers
+-- * used in leaveblock(), close_func()
+----------------------------------------------------------------------
+
+local function removevars()
+  local bl = fs.bl
+  local locallist
+  -- locate locallist in current block object or function root object
+  if bl then
+    locallist = bl.locallist
+  else
+    locallist = fs.locallist
+  end
+  -- enumerate the local list at current scope and deactivate 'em
+  for name, id in base.pairs(locallist) do
+    local obj = localinfo[id]
+    obj.rem = xref                      -- set deactivation location
+  end
+end
+
+----------------------------------------------------------------------
+-- creates a new local variable given a name
+-- * skips internal locals (those starting with '('), so internal
+--   locals never needs a corresponding adjustlocalvars() call
+-- * special is true for &quot;self&quot; which must not be optimized
+-- * used in fornum(), forlist(), parlist(), body()
+----------------------------------------------------------------------
+
+local function new_localvarliteral(name, special)
+  if string.sub(name, 1, 1) == &quot;(&quot; then  -- can skip internal locals
+    return
+  end
+  new_localvar(name, special)
+end
+
+----------------------------------------------------------------------
+-- search the local variable namespace of the given fs for a match
+-- * returns localinfo index
+-- * used only in singlevaraux()
+----------------------------------------------------------------------
+
+local function searchvar(fs, n)
+  local bl = fs.bl
+  local locallist
+  if bl then
+    locallist = bl.locallist
+    while locallist do
+      if locallist[n] then return locallist[n] end  -- found
+      bl = bl.prev
+      locallist = bl and bl.locallist
+    end
+  end
+  locallist = fs.locallist
+  return locallist[n] or -1  -- found or not found (-1)
+end
+
+----------------------------------------------------------------------
+-- handle locals, globals and upvalues and related processing
+-- * search mechanism is recursive, calls itself to search parents
+-- * used only in singlevar()
+----------------------------------------------------------------------
+
+local function singlevaraux(fs, n, var)
+  if fs == nil then  -- no more levels?
+    var.k = &quot;VGLOBAL&quot;  -- default is global variable
+    return &quot;VGLOBAL&quot;
+  else
+    local v = searchvar(fs, n)  -- look up at current level
+    if v &gt;= 0 then
+      var.k = &quot;VLOCAL&quot;
+      var.id = v
+      --  codegen may need to deal with upvalue here
+      return &quot;VLOCAL&quot;
+    else  -- not found at current level; try upper one
+      if singlevaraux(fs.prev, n, var) == &quot;VGLOBAL&quot; then
+        return &quot;VGLOBAL&quot;
+      end
+      -- else was LOCAL or UPVAL, handle here
+      var.k = &quot;VUPVAL&quot;  -- upvalue in this level
+      return &quot;VUPVAL&quot;
+    end--if v
+  end--if fs
+end
+
+----------------------------------------------------------------------
+-- consume a name token, creates a variable (global|local|upvalue)
+-- * used in prefixexp(), funcname()
+----------------------------------------------------------------------
+
+local function singlevar(v)
+  local name = str_checkname()
+  singlevaraux(fs, name, v)
+  ------------------------------------------------------------------
+  -- variable tracking
+  ------------------------------------------------------------------
+  if v.k == &quot;VGLOBAL&quot; then
+    -- if global being accessed, keep track of it by creating an object
+    local id = globallookup[name]
+    if not id then
+      id = #globalinfo + 1
+      globalinfo[id] = {                -- new global variable object
+        name = name,                    -- global variable name
+        xref = { nameref },             -- xref, first value is declaration
+      }
+      globallookup[name] = id           -- remember it
+    else
+      local obj = globalinfo[id].xref
+      obj[#obj + 1] = nameref           -- add xref
+    end
+  else
+    -- local/upvalue is being accessed, keep track of it
+    local id = v.id
+    local obj = localinfo[id].xref
+    obj[#obj + 1] = nameref             -- add xref
+  end
+end
+
+--[[--------------------------------------------------------------------
+-- state management functions with open/close pairs
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- enters a code unit, initializes elements
+----------------------------------------------------------------------
+
+local function enterblock(isbreakable)
+  local bl = {}  -- per-block state
+  bl.isbreakable = isbreakable
+  bl.prev = fs.bl
+  bl.locallist = {}
+  fs.bl = bl
+end
+
+----------------------------------------------------------------------
+-- leaves a code unit, close any upvalues
+----------------------------------------------------------------------
+
+local function leaveblock()
+  local bl = fs.bl
+  removevars()
+  fs.bl = bl.prev
+end
+
+----------------------------------------------------------------------
+-- opening of a function
+-- * top_fs is only for anchoring the top fs, so that parser() can
+--   return it to the caller function along with useful output
+-- * used in parser() and body()
+----------------------------------------------------------------------
+
+local function open_func()
+  local new_fs  -- per-function state
+  if not fs then  -- top_fs is created early
+    new_fs = top_fs
+  else
+    new_fs = {}
+  end
+  new_fs.prev = fs  -- linked list of function states
+  new_fs.bl = nil
+  new_fs.locallist = {}
+  fs = new_fs
+end
+
+----------------------------------------------------------------------
+-- closing of a function
+-- * used in parser() and body()
+----------------------------------------------------------------------
+
+local function close_func()
+  removevars()
+  fs = fs.prev
+end
+
+--[[--------------------------------------------------------------------
+-- other parsing functions
+-- * for table constructor, parameter list, argument list
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- parse a function name suffix, for function call specifications
+-- * used in primaryexp(), funcname()
+----------------------------------------------------------------------
+
+local function field(v)
+  -- field -&gt; ['.' | ':'] NAME
+  local key = {}
+  nextt()  -- skip the dot or colon
+  checkname(key)
+  v.k = &quot;VINDEXED&quot;
+end
+
+----------------------------------------------------------------------
+-- parse a table indexing suffix, for constructors, expressions
+-- * used in recfield(), primaryexp()
+----------------------------------------------------------------------
+
+local function yindex(v)
+  -- index -&gt; '[' expr ']'
+  nextt()  -- skip the '['
+  expr(v)
+  checknext(&quot;]&quot;)
+end
+
+----------------------------------------------------------------------
+-- parse a table record (hash) field
+-- * used in constructor()
+----------------------------------------------------------------------
+
+local function recfield(cc)
+  -- recfield -&gt; (NAME | '['exp1']') = exp1
+  local key, val = {}, {}
+  if tok == &quot;&lt;name&gt;&quot; then
+    checkname(key)
+  else-- tok == '['
+    yindex(key)
+  end
+  checknext(&quot;=&quot;)
+  expr(val)
+end
+
+----------------------------------------------------------------------
+-- emit a set list instruction if enough elements (LFIELDS_PER_FLUSH)
+-- * note: retained in this skeleton because it modifies cc.v.k
+-- * used in constructor()
+----------------------------------------------------------------------
+
+local function closelistfield(cc)
+  if cc.v.k == &quot;VVOID&quot; then return end  -- there is no list item
+  cc.v.k = &quot;VVOID&quot;
+end
+
+----------------------------------------------------------------------
+-- parse a table list (array) field
+-- * used in constructor()
+----------------------------------------------------------------------
+
+local function listfield(cc)
+  expr(cc.v)
+end
+
+----------------------------------------------------------------------
+-- parse a table constructor
+-- * used in funcargs(), simpleexp()
+----------------------------------------------------------------------
+
+local function constructor(t)
+  -- constructor -&gt; '{' [ field { fieldsep field } [ fieldsep ] ] '}'
+  -- field -&gt; recfield | listfield
+  -- fieldsep -&gt; ',' | ';'
+  local line = ln
+  local cc = {}
+  cc.v = {}
+  cc.t = t
+  t.k = &quot;VRELOCABLE&quot;
+  cc.v.k = &quot;VVOID&quot;
+  checknext(&quot;{&quot;)
+  repeat
+    if tok == &quot;}&quot; then break end
+    -- closelistfield(cc) here
+    local c = tok
+    if c == &quot;&lt;name&gt;&quot; then  -- may be listfields or recfields
+      if lookahead() ~= &quot;=&quot; then  -- look ahead: expression?
+        listfield(cc)
+      else
+        recfield(cc)
+      end
+    elseif c == &quot;[&quot; then  -- constructor_item -&gt; recfield
+      recfield(cc)
+    else  -- constructor_part -&gt; listfield
+      listfield(cc)
+    end
+  until not testnext(&quot;,&quot;) and not testnext(&quot;;&quot;)
+  check_match(&quot;}&quot;, &quot;{&quot;, line)
+  -- lastlistfield(cc) here
+end
+
+----------------------------------------------------------------------
+-- parse the arguments (parameters) of a function declaration
+-- * used in body()
+----------------------------------------------------------------------
+
+local function parlist()
+  -- parlist -&gt; [ param { ',' param } ]
+  local nparams = 0
+  if tok ~= &quot;)&quot; then  -- is 'parlist' not empty?
+    repeat
+      local c = tok
+      if c == &quot;&lt;name&gt;&quot; then  -- param -&gt; NAME
+        new_localvar(str_checkname())
+        nparams = nparams + 1
+      elseif c == &quot;...&quot; then
+        nextt()
+        fs.is_vararg = true
+      else
+        syntaxerror(&quot;&lt;name&gt; or '...' expected&quot;)
+      end
+    until fs.is_vararg or not testnext(&quot;,&quot;)
+  end--if
+  adjustlocalvars(nparams)
+end
+
+----------------------------------------------------------------------
+-- parse the parameters of a function call
+-- * contrast with parlist(), used in function declarations
+-- * used in primaryexp()
+----------------------------------------------------------------------
+
+local function funcargs(f)
+  local args = {}
+  local line = ln
+  local c = tok
+  if c == &quot;(&quot; then  -- funcargs -&gt; '(' [ explist1 ] ')'
+    if line ~= lastln then
+      syntaxerror(&quot;ambiguous syntax (function call x new statement)&quot;)
+    end
+    nextt()
+    if tok == &quot;)&quot; then  -- arg list is empty?
+      args.k = &quot;VVOID&quot;
+    else
+      explist1(args)
+    end
+    check_match(&quot;)&quot;, &quot;(&quot;, line)
+  elseif c == &quot;{&quot; then  -- funcargs -&gt; constructor
+    constructor(args)
+  elseif c == &quot;&lt;string&gt;&quot; then  -- funcargs -&gt; STRING
+    codestring(args, seminfo)
+    nextt()  -- must use 'seminfo' before 'next'
+  else
+    syntaxerror(&quot;function arguments expected&quot;)
+    return
+  end--if c
+  f.k = &quot;VCALL&quot;
+end
+
+--[[--------------------------------------------------------------------
+-- mostly expression functions
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- parses an expression in parentheses or a single variable
+-- * used in primaryexp()
+----------------------------------------------------------------------
+
+local function prefixexp(v)
+  -- prefixexp -&gt; NAME | '(' expr ')'
+  local c = tok
+  if c == &quot;(&quot; then
+    local line = ln
+    nextt()
+    expr(v)
+    check_match(&quot;)&quot;, &quot;(&quot;, line)
+  elseif c == &quot;&lt;name&gt;&quot; then
+    singlevar(v)
+  else
+    syntaxerror(&quot;unexpected symbol&quot;)
+  end--if c
+end
+
+----------------------------------------------------------------------
+-- parses a prefixexp (an expression in parentheses or a single
+-- variable) or a function call specification
+-- * used in simpleexp(), assignment(), expr_stat()
+----------------------------------------------------------------------
+
+local function primaryexp(v)
+  -- primaryexp -&gt;
+  --    prefixexp { '.' NAME | '[' exp ']' | ':' NAME funcargs | funcargs }
+  prefixexp(v)
+  while true do
+    local c = tok
+    if c == &quot;.&quot; then  -- field
+      field(v)
+    elseif c == &quot;[&quot; then  -- '[' exp1 ']'
+      local key = {}
+      yindex(key)
+    elseif c == &quot;:&quot; then  -- ':' NAME funcargs
+      local key = {}
+      nextt()
+      checkname(key)
+      funcargs(v)
+    elseif c == &quot;(&quot; or c == &quot;&lt;string&gt;&quot; or c == &quot;{&quot; then  -- funcargs
+      funcargs(v)
+    else
+      return
+    end--if c
+  end--while
+end
+
+----------------------------------------------------------------------
+-- parses general expression types, constants handled here
+-- * used in subexpr()
+----------------------------------------------------------------------
+
+local function simpleexp(v)
+  -- simpleexp -&gt; NUMBER | STRING | NIL | TRUE | FALSE | ... |
+  --              constructor | FUNCTION body | primaryexp
+  local c = tok
+  if c == &quot;&lt;number&gt;&quot; then
+    v.k = &quot;VKNUM&quot;
+  elseif c == &quot;&lt;string&gt;&quot; then
+    codestring(v, seminfo)
+  elseif c == &quot;nil&quot; then
+    v.k = &quot;VNIL&quot;
+  elseif c == &quot;true&quot; then
+    v.k = &quot;VTRUE&quot;
+  elseif c == &quot;false&quot; then
+    v.k = &quot;VFALSE&quot;
+  elseif c == &quot;...&quot; then  -- vararg
+    check_condition(fs.is_vararg == true,
+                    &quot;cannot use '...' outside a vararg function&quot;);
+    v.k = &quot;VVARARG&quot;
+  elseif c == &quot;{&quot; then  -- constructor
+    constructor(v)
+    return
+  elseif c == &quot;function&quot; then
+    nextt()
+    body(v, false, ln)
+    return
+  else
+    primaryexp(v)
+    return
+  end--if c
+  nextt()
+end
+
+------------------------------------------------------------------------
+-- Parse subexpressions. Includes handling of unary operators and binary
+-- operators. A subexpr is given the rhs priority level of the operator
+-- immediately left of it, if any (limit is -1 if none,) and if a binop
+-- is found, limit is compared with the lhs priority level of the binop
+-- in order to determine which executes first.
+-- * recursively called
+-- * used in expr()
+------------------------------------------------------------------------
+
+local function subexpr(v, limit)
+  -- subexpr -&gt; (simpleexp | unop subexpr) { binop subexpr }
+  --   * where 'binop' is any binary operator with a priority
+  --     higher than 'limit'
+  local op = tok
+  local uop = unopr[op]
+  if uop then
+    nextt()
+    subexpr(v, UNARY_PRIORITY)
+  else
+    simpleexp(v)
+  end
+  -- expand while operators have priorities higher than 'limit'
+  op = tok
+  local binop = binopr_left[op]
+  while binop and binop &gt; limit do
+    local v2 = {}
+    nextt()
+    -- read sub-expression with higher priority
+    local nextop = subexpr(v2, binopr_right[op])
+    op = nextop
+    binop = binopr_left[op]
+  end
+  return op  -- return first untreated operator
+end
+
+----------------------------------------------------------------------
+-- Expression parsing starts here. Function subexpr is entered with the
+-- left operator (which is non-existent) priority of -1, which is lower
+-- than all actual operators. Expr information is returned in parm v.
+-- * used in cond(), explist1(), index(), recfield(), listfield(),
+--   prefixexp(), while_stat(), exp1()
+----------------------------------------------------------------------
+
+-- this is a forward-referenced local
+function expr(v)
+  -- expr -&gt; subexpr
+  subexpr(v, 0)
+end
+
+--[[--------------------------------------------------------------------
+-- third level parsing functions
+----------------------------------------------------------------------]]
+
+------------------------------------------------------------------------
+-- parse a variable assignment sequence
+-- * recursively called
+-- * used in expr_stat()
+------------------------------------------------------------------------
+
+local function assignment(v)
+  local e = {}
+  local c = v.v.k
+  check_condition(c == &quot;VLOCAL&quot; or c == &quot;VUPVAL&quot; or c == &quot;VGLOBAL&quot;
+                  or c == &quot;VINDEXED&quot;, &quot;syntax error&quot;)
+  if testnext(&quot;,&quot;) then  -- assignment -&gt; ',' primaryexp assignment
+    local nv = {}  -- expdesc
+    nv.v = {}
+    primaryexp(nv.v)
+    -- lparser.c deals with some register usage conflict here
+    assignment(nv)
+  else  -- assignment -&gt; '=' explist1
+    checknext(&quot;=&quot;)
+    explist1(e)
+    return  -- avoid default
+  end
+  e.k = &quot;VNONRELOC&quot;
+end
+
+----------------------------------------------------------------------
+-- parse a for loop body for both versions of the for loop
+-- * used in fornum(), forlist()
+----------------------------------------------------------------------
+
+local function forbody(nvars, isnum)
+  -- forbody -&gt; DO block
+  checknext(&quot;do&quot;)
+  enterblock(false)  -- scope for declared variables
+  adjustlocalvars(nvars)
+  block()
+  leaveblock()  -- end of scope for declared variables
+end
+
+----------------------------------------------------------------------
+-- parse a numerical for loop, calls forbody()
+-- * used in for_stat()
+----------------------------------------------------------------------
+
+local function fornum(varname)
+  -- fornum -&gt; NAME = exp1, exp1 [, exp1] DO body
+  local line = line
+  new_localvarliteral(&quot;(for index)&quot;)
+  new_localvarliteral(&quot;(for limit)&quot;)
+  new_localvarliteral(&quot;(for step)&quot;)
+  new_localvar(varname)
+  checknext(&quot;=&quot;)
+  exp1()  -- initial value
+  checknext(&quot;,&quot;)
+  exp1()  -- limit
+  if testnext(&quot;,&quot;) then
+    exp1()  -- optional step
+  else
+    -- default step = 1
+  end
+  forbody(1, true)
+end
+
+----------------------------------------------------------------------
+-- parse a generic for loop, calls forbody()
+-- * used in for_stat()
+----------------------------------------------------------------------
+
+local function forlist(indexname)
+  -- forlist -&gt; NAME {, NAME} IN explist1 DO body
+  local e = {}
+  -- create control variables
+  new_localvarliteral(&quot;(for generator)&quot;)
+  new_localvarliteral(&quot;(for state)&quot;)
+  new_localvarliteral(&quot;(for control)&quot;)
+  -- create declared variables
+  new_localvar(indexname)
+  local nvars = 1
+  while testnext(&quot;,&quot;) do
+    new_localvar(str_checkname())
+    nvars = nvars + 1
+  end
+  checknext(&quot;in&quot;)
+  local line = line
+  explist1(e)
+  forbody(nvars, false)
+end
+
+----------------------------------------------------------------------
+-- parse a function name specification
+-- * used in func_stat()
+----------------------------------------------------------------------
+
+local function funcname(v)
+  -- funcname -&gt; NAME {field} [':' NAME]
+  local needself = false
+  singlevar(v)
+  while tok == &quot;.&quot; do
+    field(v)
+  end
+  if tok == &quot;:&quot; then
+    needself = true
+    field(v)
+  end
+  return needself
+end
+
+----------------------------------------------------------------------
+-- parse the single expressions needed in numerical for loops
+-- * used in fornum()
+----------------------------------------------------------------------
+
+-- this is a forward-referenced local
+function exp1()
+  -- exp1 -&gt; expr
+  local e = {}
+  expr(e)
+end
+
+----------------------------------------------------------------------
+-- parse condition in a repeat statement or an if control structure
+-- * used in repeat_stat(), test_then_block()
+----------------------------------------------------------------------
+
+local function cond()
+  -- cond -&gt; expr
+  local v = {}
+  expr(v)  -- read condition
+end
+
+----------------------------------------------------------------------
+-- parse part of an if control structure, including the condition
+-- * used in if_stat()
+----------------------------------------------------------------------
+
+local function test_then_block()
+  -- test_then_block -&gt; [IF | ELSEIF] cond THEN block
+  nextt()  -- skip IF or ELSEIF
+  cond()
+  checknext(&quot;then&quot;)
+  block()  -- 'then' part
+end
+
+----------------------------------------------------------------------
+-- parse a local function statement
+-- * used in local_stat()
+----------------------------------------------------------------------
+
+local function localfunc()
+  -- localfunc -&gt; NAME body
+  local v, b = {}
+  new_localvar(str_checkname())
+  v.k = &quot;VLOCAL&quot;
+  adjustlocalvars(1)
+  body(b, false, ln)
+end
+
+----------------------------------------------------------------------
+-- parse a local variable declaration statement
+-- * used in local_stat()
+----------------------------------------------------------------------
+
+local function localstat()
+  -- localstat -&gt; NAME {',' NAME} ['=' explist1]
+  local nvars = 0
+  local e = {}
+  repeat
+    new_localvar(str_checkname())
+    nvars = nvars + 1
+  until not testnext(&quot;,&quot;)
+  if testnext(&quot;=&quot;) then
+    explist1(e)
+  else
+    e.k = &quot;VVOID&quot;
+  end
+  adjustlocalvars(nvars)
+end
+
+----------------------------------------------------------------------
+-- parse a list of comma-separated expressions
+-- * used in return_stat(), localstat(), funcargs(), assignment(),
+--   forlist()
+----------------------------------------------------------------------
+
+-- this is a forward-referenced local
+function explist1(e)
+  -- explist1 -&gt; expr { ',' expr }
+  expr(e)
+  while testnext(&quot;,&quot;) do
+    expr(e)
+  end
+end
+
+----------------------------------------------------------------------
+-- parse function declaration body
+-- * used in simpleexp(), localfunc(), func_stat()
+----------------------------------------------------------------------
+
+-- this is a forward-referenced local
+function body(e, needself, line)
+  -- body -&gt;  '(' parlist ')' chunk END
+  open_func()
+  checknext(&quot;(&quot;)
+  if needself then
+    new_localvarliteral(&quot;self&quot;, true)
+    adjustlocalvars(1)
+  end
+  parlist()
+  checknext(&quot;)&quot;)
+  chunk()
+  check_match(&quot;end&quot;, &quot;function&quot;, line)
+  close_func()
+end
+
+----------------------------------------------------------------------
+-- parse a code block or unit
+-- * used in do_stat(), while_stat(), forbody(), test_then_block(),
+--   if_stat()
+----------------------------------------------------------------------
+
+-- this is a forward-referenced local
+function block()
+  -- block -&gt; chunk
+  enterblock(false)
+  chunk()
+  leaveblock()
+end
+
+--[[--------------------------------------------------------------------
+-- second level parsing functions, all with '_stat' suffix
+-- * since they are called via a table lookup, they cannot be local
+--   functions (a lookup table of local functions might be smaller...)
+-- * stat() -&gt; *_stat()
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- initial parsing for a for loop, calls fornum() or forlist()
+-- * removed 'line' parameter (used to set debug information only)
+-- * used in stat()
+----------------------------------------------------------------------
+
+function for_stat()
+  -- stat -&gt; for_stat -&gt; FOR (fornum | forlist) END
+  local line = line
+  enterblock(true)  -- scope for loop and control variables
+  nextt()  -- skip 'for'
+  local varname = str_checkname()  -- first variable name
+  local c = tok
+  if c == &quot;=&quot; then
+    fornum(varname)
+  elseif c == &quot;,&quot; or c == &quot;in&quot; then
+    forlist(varname)
+  else
+    syntaxerror(&quot;'=' or 'in' expected&quot;)
+  end
+  check_match(&quot;end&quot;, &quot;for&quot;, line)
+  leaveblock()  -- loop scope (`break' jumps to this point)
+end
+
+----------------------------------------------------------------------
+-- parse a while-do control structure, body processed by block()
+-- * used in stat()
+----------------------------------------------------------------------
+
+function while_stat()
+  -- stat -&gt; while_stat -&gt; WHILE cond DO block END
+  local line = line
+  nextt()  -- skip WHILE
+  cond()  -- parse condition
+  enterblock(true)
+  checknext(&quot;do&quot;)
+  block()
+  check_match(&quot;end&quot;, &quot;while&quot;, line)
+  leaveblock()
+end
+
+----------------------------------------------------------------------
+-- parse a repeat-until control structure, body parsed by chunk()
+-- * originally, repeatstat() calls breakstat() too if there is an
+--   upvalue in the scope block; nothing is actually lexed, it is
+--   actually the common code in breakstat() for closing of upvalues
+-- * used in stat()
+----------------------------------------------------------------------
+
+function repeat_stat()
+  -- stat -&gt; repeat_stat -&gt; REPEAT block UNTIL cond
+  local line = line
+  enterblock(true)  -- loop block
+  enterblock(false)  -- scope block
+  nextt()  -- skip REPEAT
+  chunk()
+  check_match(&quot;until&quot;, &quot;repeat&quot;, line)
+  cond()
+  -- close upvalues at scope level below
+  leaveblock()  -- finish scope
+  leaveblock()  -- finish loop
+end
+
+----------------------------------------------------------------------
+-- parse an if control structure
+-- * used in stat()
+----------------------------------------------------------------------
+
+function if_stat()
+  -- stat -&gt; if_stat -&gt; IF cond THEN block
+  --                    {ELSEIF cond THEN block} [ELSE block] END
+  local line = line
+  local v = {}
+  test_then_block()  -- IF cond THEN block
+  while tok == &quot;elseif&quot; do
+    test_then_block()  -- ELSEIF cond THEN block
+  end
+  if tok == &quot;else&quot; then
+    nextt()  -- skip ELSE
+    block()  -- 'else' part
+  end
+  check_match(&quot;end&quot;, &quot;if&quot;, line)
+end
+
+----------------------------------------------------------------------
+-- parse a return statement
+-- * used in stat()
+----------------------------------------------------------------------
+
+function return_stat()
+  -- stat -&gt; return_stat -&gt; RETURN explist
+  local e = {}
+  nextt()  -- skip RETURN
+  local c = tok
+  if block_follow[c] or c == &quot;;&quot; then
+    -- return no values
+  else
+    explist1(e)  -- optional return values
+  end
+end
+
+----------------------------------------------------------------------
+-- parse a break statement
+-- * used in stat()
+----------------------------------------------------------------------
+
+function break_stat()
+  -- stat -&gt; break_stat -&gt; BREAK
+  local bl = fs.bl
+  nextt()  -- skip BREAK
+  while bl and not bl.isbreakable do -- find a breakable block
+    bl = bl.prev
+  end
+  if not bl then
+    syntaxerror(&quot;no loop to break&quot;)
+  end
+end
+
+----------------------------------------------------------------------
+-- parse a function call with no returns or an assignment statement
+-- * the struct with .prev is used for name searching in lparse.c,
+--   so it is retained for now; present in assignment() also
+-- * used in stat()
+----------------------------------------------------------------------
+
+function expr_stat()
+  -- stat -&gt; expr_stat -&gt; func | assignment
+  local v = {}
+  v.v = {}
+  primaryexp(v.v)
+  if v.v.k == &quot;VCALL&quot; then  -- stat -&gt; func
+    -- call statement uses no results
+  else  -- stat -&gt; assignment
+    v.prev = nil
+    assignment(v)
+  end
+end
+
+----------------------------------------------------------------------
+-- parse a function statement
+-- * used in stat()
+----------------------------------------------------------------------
+
+function function_stat()
+  -- stat -&gt; function_stat -&gt; FUNCTION funcname body
+  local line = line
+  local v, b = {}, {}
+  nextt()  -- skip FUNCTION
+  local needself = funcname(v)
+  body(b, needself, line)
+end
+
+----------------------------------------------------------------------
+-- parse a simple block enclosed by a DO..END pair
+-- * used in stat()
+----------------------------------------------------------------------
+
+function do_stat()
+  -- stat -&gt; do_stat -&gt; DO block END
+  local line = line
+  nextt()  -- skip DO
+  block()
+  check_match(&quot;end&quot;, &quot;do&quot;, line)
+end
+
+----------------------------------------------------------------------
+-- parse a statement starting with LOCAL
+-- * used in stat()
+----------------------------------------------------------------------
+
+function local_stat()
+  -- stat -&gt; local_stat -&gt; LOCAL FUNCTION localfunc
+  --                    -&gt; LOCAL localstat
+  nextt()  -- skip LOCAL
+  if testnext(&quot;function&quot;) then  -- local function?
+    localfunc()
+  else
+    localstat()
+  end
+end
+
+--[[--------------------------------------------------------------------
+-- main functions, top level parsing functions
+-- * accessible functions are: init(lexer), parser()
+-- * [entry] -&gt; parser() -&gt; chunk() -&gt; stat()
+----------------------------------------------------------------------]]
+
+----------------------------------------------------------------------
+-- initial parsing for statements, calls '_stat' suffixed functions
+-- * used in chunk()
+----------------------------------------------------------------------
+
+local function stat()
+  -- stat -&gt; if_stat while_stat do_stat for_stat repeat_stat
+  --         function_stat local_stat return_stat break_stat
+  --         expr_stat
+  line = ln  -- may be needed for error messages
+  local c = tok
+  local fn = stat_call[c]
+  -- handles: if while do for repeat function local return break
+  if fn then
+    _G[fn]()
+    -- return or break must be last statement
+    if c == &quot;return&quot; or c == &quot;break&quot; then return true end
+  else
+    expr_stat()
+  end
+  return false
+end
+
+----------------------------------------------------------------------
+-- parse a chunk, which consists of a bunch of statements
+-- * used in parser(), body(), block(), repeat_stat()
+----------------------------------------------------------------------
+
+-- this is a forward-referenced local
+function chunk()
+  -- chunk -&gt; { stat [';'] }
+  local islast = false
+  while not islast and not block_follow[tok] do
+    islast = stat()
+    testnext(&quot;;&quot;)
+  end
+end
+
+----------------------------------------------------------------------
+-- performs parsing, returns parsed data structure
+----------------------------------------------------------------------
+
+function parser()
+  open_func()
+  fs.is_vararg = true  -- main func. is always vararg
+  nextt()  -- read first token
+  chunk()
+  check(&quot;&lt;eof&gt;&quot;)
+  close_func()
+  return globalinfo, localinfo
+end
+
+----------------------------------------------------------------------
+-- initialization function
+----------------------------------------------------------------------
+
+function init(tokorig, seminfoorig, toklnorig)
+  tpos = 1                      -- token position
+  top_fs = {}                   -- reset top level function state
+  ------------------------------------------------------------------
+  -- set up grammar-only token tables; impedance-matching...
+  -- note that constants returned by the lexer is source-level, so
+  -- for now, fake(!) constant tokens (TK_NUMBER|TK_STRING|TK_LSTRING)
+  ------------------------------------------------------------------
+  local j = 1
+  toklist, seminfolist, toklnlist, xreflist = {}, {}, {}, {}
+  for i = 1, #tokorig do
+    local tok = tokorig[i]
+    local yep = true
+    if tok == &quot;TK_KEYWORD&quot; or tok == &quot;TK_OP&quot; then
+      tok = seminfoorig[i]
+    elseif tok == &quot;TK_NAME&quot; then
+      tok = &quot;&lt;name&gt;&quot;
+      seminfolist[j] = seminfoorig[i]
+    elseif tok == &quot;TK_NUMBER&quot; then
+      tok = &quot;&lt;number&gt;&quot;
+      seminfolist[j] = 0  -- fake!
+    elseif tok == &quot;TK_STRING&quot; or tok == &quot;TK_LSTRING&quot; then
+      tok = &quot;&lt;string&gt;&quot;
+      seminfolist[j] = &quot;&quot;  -- fake!
+    elseif tok == &quot;TK_EOS&quot; then
+      tok = &quot;&lt;eof&gt;&quot;
+    else
+      -- non-grammar tokens; ignore them
+      yep = false
+    end
+    if yep then  -- set rest of the information
+      toklist[j] = tok
+      toklnlist[j] = toklnorig[i]
+      xreflist[j] = i
+      j = j + 1
+    end
+  end--for
+  ------------------------------------------------------------------
+  -- initialize data structures for variable tracking
+  ------------------------------------------------------------------
+  globalinfo, globallookup, localinfo = {}, {}, {}
+  ilocalinfo, ilocalrefs = {}, {}
+end
+
+return _G
+end)
+package.preload['optlex'] = (function (...)
+--[[--------------------------------------------------------------------
+
+  optlex.lua: does lexer-based optimizations
+  This file is part of LuaSrcDiet.
+
+  Copyright (c) 2008 Kein-Hong Man &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">khman at users.sf.net</A>&gt;
+  The COPYRIGHT file describes the conditions
+  under which this software may be distributed.
+
+  See the ChangeLog for more information.
+
+----------------------------------------------------------------------]]
+
+--[[--------------------------------------------------------------------
+-- NOTES:
+-- * For more lexer-based optimization ideas, see the TODO items or
+--   look at technotes.txt.
+-- * TODO: general string delimiter conversion optimizer
+-- * TODO: (numbers) warn if overly significant digit
+----------------------------------------------------------------------]]
+
+local base = _G
+local string = string
+module &quot;optlex&quot;
+local match = string.match
+local sub = string.sub
+local find = string.find
+local rep = string.rep
+local print
+
+------------------------------------------------------------------------
+-- variables and data structures
+------------------------------------------------------------------------
+
+-- error function, can override by setting own function into module
+error = base.error
+
+warn = {}                       -- table for warning flags
+
+local stoks, sinfos, stoklns    -- source lists
+
+local is_realtoken = {          -- significant (grammar) tokens
+  TK_KEYWORD = true,
+  TK_NAME = true,
+  TK_NUMBER = true,
+  TK_STRING = true,
+  TK_LSTRING = true,
+  TK_OP = true,
+  TK_EOS = true,
+}
+local is_faketoken = {          -- whitespace (non-grammar) tokens
+  TK_COMMENT = true,
+  TK_LCOMMENT = true,
+  TK_EOL = true,
+  TK_SPACE = true,
+}
+
+local opt_details               -- for extra information
+
+------------------------------------------------------------------------
+-- true if current token is at the start of a line
+-- * skips over deleted tokens via recursion
+------------------------------------------------------------------------
+
+local function atlinestart(i)
+  local tok = stoks[i - 1]
+  if i &lt;= 1 or tok == &quot;TK_EOL&quot; then
+    return true
+  elseif tok == &quot;&quot; then
+    return atlinestart(i - 1)
+  end
+  return false
+end
+
+------------------------------------------------------------------------
+-- true if current token is at the end of a line
+-- * skips over deleted tokens via recursion
+------------------------------------------------------------------------
+
+local function atlineend(i)
+  local tok = stoks[i + 1]
+  if i &gt;= #stoks or tok == &quot;TK_EOL&quot; or tok == &quot;TK_EOS&quot; then
+    return true
+  elseif tok == &quot;&quot; then
+    return atlineend(i + 1)
+  end
+  return false
+end
+
+------------------------------------------------------------------------
+-- counts comment EOLs inside a long comment
+-- * in order to keep line numbering, EOLs need to be reinserted
+------------------------------------------------------------------------
+
+local function commenteols(lcomment)
+  local sep = #match(lcomment, &quot;^%-%-%[=*%[&quot;)
+  local z = sub(lcomment, sep + 1, -(sep - 1))  -- remove delims
+  local i, c = 1, 0
+  while true do
+    local p, q, r, s = find(z, &quot;([\r\n])([\r\n]?)&quot;, i)
+    if not p then break end     -- if no matches, done
+    i = p + 1
+    c = c + 1
+    if #s &gt; 0 and r ~= s then   -- skip CRLF or LFCR
+      i = i + 1
+    end
+  end
+  return c
+end
+
+------------------------------------------------------------------------
+-- compares two tokens (i, j) and returns the whitespace required
+-- * important! see technotes.txt for more information
+-- * only two grammar/real tokens are being considered
+-- * if &quot;&quot;, no separation is needed
+-- * if &quot; &quot;, then at least one whitespace (or EOL) is required
+------------------------------------------------------------------------
+
+local function checkpair(i, j)
+  local match = match
+  local t1, t2 = stoks[i], stoks[j]
+  --------------------------------------------------------------------
+  if t1 == &quot;TK_STRING&quot; or t1 == &quot;TK_LSTRING&quot; or
+     t2 == &quot;TK_STRING&quot; or t2 == &quot;TK_LSTRING&quot; then
+    return &quot;&quot;
+  --------------------------------------------------------------------
+  elseif t1 == &quot;TK_OP&quot; or t2 == &quot;TK_OP&quot; then
+    if (t1 == &quot;TK_OP&quot; and (t2 == &quot;TK_KEYWORD&quot; or t2 == &quot;TK_NAME&quot;)) or
+       (t2 == &quot;TK_OP&quot; and (t1 == &quot;TK_KEYWORD&quot; or t1 == &quot;TK_NAME&quot;)) then
+      return &quot;&quot;
+    end
+    if t1 == &quot;TK_OP&quot; and t2 == &quot;TK_OP&quot; then
+      -- for TK_OP/TK_OP pairs, see notes in technotes.txt
+      local op, op2 = sinfos[i], sinfos[j]
+      if (match(op, &quot;^%.%.?$&quot;) and match(op2, &quot;^%.&quot;)) or
+         (match(op, &quot;^[~=&lt;&gt;]$&quot;) and op2 == &quot;=&quot;) or
+         (op == &quot;[&quot; and (op2 == &quot;[&quot; or op2 == &quot;=&quot;)) then
+        return &quot; &quot;
+      end
+      return &quot;&quot;
+    end
+    -- &quot;TK_OP&quot; + &quot;TK_NUMBER&quot; case
+    local op = sinfos[i]
+    if t2 == &quot;TK_OP&quot; then op = sinfos[j] end
+    if match(op, &quot;^%.%.?%.?$&quot;) then
+      return &quot; &quot;
+    end
+    return &quot;&quot;
+  --------------------------------------------------------------------
+  else-- &quot;TK_KEYWORD&quot; | &quot;TK_NAME&quot; | &quot;TK_NUMBER&quot; then
+    return &quot; &quot;
+  --------------------------------------------------------------------
+  end
+end
+
+------------------------------------------------------------------------
+-- repack tokens, removing deletions caused by optimization process
+------------------------------------------------------------------------
+
+local function repack_tokens()
+  local dtoks, dinfos, dtoklns = {}, {}, {}
+  local j = 1
+  for i = 1, #stoks do
+    local tok = stoks[i]
+    if tok ~= &quot;&quot; then
+      dtoks[j], dinfos[j], dtoklns[j] = tok, sinfos[i], stoklns[i]
+      j = j + 1
+    end
+  end
+  stoks, sinfos, stoklns = dtoks, dinfos, dtoklns
+end
+
+------------------------------------------------------------------------
+-- number optimization
+-- * optimization using string formatting functions is one way of doing
+--   this, but here, we consider all cases and handle them separately
+--   (possibly an idiotic approach...)
+-- * scientific notation being generated is not in canonical form, this
+--   may or may not be a bad thing, feedback welcome
+-- * note: intermediate portions need to fit into a normal number range
+-- * optimizations can be divided based on number patterns:
+-- * hexadecimal:
+--   (1) no need to remove leading zeros, just skip to (2)
+--   (2) convert to integer if size equal or smaller
+--       * change if equal size -&gt; lose the 'x' to reduce entropy
+--   (3) number is then processed as an integer
+--   (4) note: does not make 0[xX] consistent
+-- * integer:
+--   (1) note: includes anything with trailing &quot;.&quot;, &quot;.0&quot;, ...
+--   (2) remove useless fractional part, if present, e.g. 123.000
+--   (3) remove leading zeros, e.g. 000123
+--   (4) switch to scientific if shorter, e.g. 123000 -&gt; 123e3
+-- * with fraction:
+--   (1) split into digits dot digits
+--   (2) if no integer portion, take as zero (can omit later)
+--   (3) handle degenerate .000 case, after which the fractional part
+--       must be non-zero (if zero, it's matched as an integer)
+--   (4) remove trailing zeros for fractional portion
+--   (5) p.q where p &gt; 0 and q &gt; 0 cannot be shortened any more
+--   (6) otherwise p == 0 and the form is .q, e.g. .000123
+--   (7) if scientific shorter, convert, e.g. .000123 -&gt; 123e-6
+-- * scientific:
+--   (1) split into (digits dot digits) [eE] ([+-] digits)
+--   (2) if significand has &quot;.&quot;, shift it out so it becomes an integer
+--   (3) if significand is zero, just use zero
+--   (4) remove leading zeros for significand
+--   (5) shift out trailing zeros for significand
+--   (6) examine exponent and determine which format is best:
+--       integer, with fraction, scientific
+------------------------------------------------------------------------
+
+local function do_number(i)
+  local before = sinfos[i]      -- 'before'
+  local z = before              -- working representation
+  local y                       -- 'after', if better
+  --------------------------------------------------------------------
+  if match(z, &quot;^0[xX]&quot;) then            -- hexadecimal number
+    local v = base.tostring(base.tonumber(z))
+    if #v &lt;= #z then
+      z = v  -- change to integer, AND continue
+    else
+      return  -- no change; stick to hex
+    end
+  end
+  --------------------------------------------------------------------
+  if match(z, &quot;^%d+%.?0*$&quot;) then        -- integer or has useless frac
+    z = match(z, &quot;^(%d+)%.?0*$&quot;)  -- int portion only
+    if z + 0 &gt; 0 then
+      z = match(z, &quot;^0*([1-9]%d*)$&quot;)  -- remove leading zeros
+      local v = #match(z, &quot;0*$&quot;)
+      local nv = base.tostring(v)
+      if v &gt; #nv + 1 then  -- scientific is shorter
+        z = sub(z, 1, #z - v)..&quot;e&quot;..nv
+      end
+      y = z
+    else
+      y = &quot;0&quot;  -- basic zero
+    end
+  --------------------------------------------------------------------
+  elseif not match(z, &quot;[eE]&quot;) then      -- number with fraction part
+    local p, q = match(z, &quot;^(%d*)%.(%d+)$&quot;)  -- split
+    if p == &quot;&quot; then p = 0 end  -- int part zero
+    if q + 0 == 0 and p == 0 then
+      y = &quot;0&quot;  -- degenerate .000 case
+    else
+      -- now, q &gt; 0 holds and p is a number
+      local v = #match(q, &quot;0*$&quot;)  -- remove trailing zeros
+      if v &gt; 0 then
+        q = sub(q, 1, #q - v)
+      end
+      -- if p &gt; 0, nothing else we can do to simplify p.q case
+      if p + 0 &gt; 0 then
+        y = p..&quot;.&quot;..q
+      else
+        y = &quot;.&quot;..q  -- tentative, e.g. .000123
+        local v = #match(q, &quot;^0*&quot;)  -- # leading spaces
+        local w = #q - v            -- # significant digits
+        local nv = base.tostring(#q)
+        -- e.g. compare 123e-6 versus .000123
+        if w + 2 + #nv &lt; 1 + #q then
+          y = sub(q, -w)..&quot;e-&quot;..nv
+        end
+      end
+    end
+  --------------------------------------------------------------------
+  else                                  -- scientific number
+    local sig, ex = match(z, &quot;^([^eE]+)[eE]([%+%-]?%d+)$&quot;)
+    ex = base.tonumber(ex)
+    -- if got &quot;.&quot;, shift out fractional portion of significand
+    local p, q = match(sig, &quot;^(%d*)%.(%d*)$&quot;)
+    if p then
+      ex = ex - #q
+      sig = p..q
+    end
+    if sig + 0 == 0 then
+      y = &quot;0&quot;  -- basic zero
+    else
+      local v = #match(sig, &quot;^0*&quot;)  -- remove leading zeros
+      sig = sub(sig, v + 1)
+      v = #match(sig, &quot;0*$&quot;) -- shift out trailing zeros
+      if v &gt; 0 then
+        sig = sub(sig, 1, #sig - v)
+        ex = ex + v
+      end
+      -- examine exponent and determine which format is best
+      local nex = base.tostring(ex)
+      if ex == 0 then  -- it's just an integer
+        y = sig
+      elseif ex &gt; 0 and (ex &lt;= 1 + #nex) then  -- a number
+        y = sig..rep(&quot;0&quot;, ex)
+      elseif ex &lt; 0 and (ex &gt;= -#sig) then  -- fraction, e.g. .123
+        v = #sig + ex
+        y = sub(sig, 1, v)..&quot;.&quot;..sub(sig, v + 1)
+      elseif ex &lt; 0 and (#nex &gt;= -ex - #sig) then
+        -- e.g. compare 1234e-5 versus .01234
+        -- gives: #sig + 1 + #nex &gt;= 1 + (-ex - #sig) + #sig
+        --     -&gt; #nex &gt;= -ex - #sig
+        v = -ex - #sig
+        y = &quot;.&quot;..rep(&quot;0&quot;, v)..sig
+      else  -- non-canonical scientific representation
+        y = sig..&quot;e&quot;..ex
+      end
+    end--if sig
+  end
+  --------------------------------------------------------------------
+  if y and y ~= sinfos[i] then
+    if opt_details then
+      print(&quot;&lt;number&gt; (line &quot;..stoklns[i]..&quot;) &quot;..sinfos[i]..&quot; -&gt; &quot;..y)
+      opt_details = opt_details + 1
+    end
+    sinfos[i] = y
+  end
+end
+
+------------------------------------------------------------------------
+-- string optimization
+-- * note: works on well-formed strings only!
+-- * optimizations on characters can be summarized as follows:
+--   \a\b\f\n\r\t\v -- no change
+--   \\ -- no change
+--   \&quot;\' -- depends on delim, other can remove \
+--   \[\] -- remove \
+--   \&lt;char&gt; -- general escape, remove \
+--   \&lt;eol&gt; -- normalize the EOL only
+--   \ddd -- if \a\b\f\n\r\t\v, change to latter
+--           if other &lt; ascii 32, keep ddd but zap leading zeros
+--           if &gt;= ascii 32, translate it into the literal, then also
+--                           do escapes for \\,\&quot;,\' cases
+--   &lt;other&gt; -- no change
+-- * switch delimiters if string becomes shorter
+------------------------------------------------------------------------
+
+local function do_string(I)
+  local info = sinfos[I]
+  local delim = sub(info, 1, 1)                 -- delimiter used
+  local ndelim = (delim == &quot;'&quot;) and '&quot;' or &quot;'&quot;  -- opposite &quot; &lt;-&gt; '
+  local z = sub(info, 2, -2)                    -- actual string
+  local i = 1
+  local c_delim, c_ndelim = 0, 0                -- &quot;/' counts
+  --------------------------------------------------------------------
+  while i &lt;= #z do
+    local c = sub(z, i, i)
+    ----------------------------------------------------------------
+    if c == &quot;\\&quot; then                   -- escaped stuff
+      local j = i + 1
+      local d = sub(z, j, j)
+      local p = find(&quot;abfnrtv\\\n\r\&quot;\'0123456789&quot;, d, 1, true)
+      ------------------------------------------------------------
+      if not p then                     -- \&lt;char&gt; -- remove \
+        z = sub(z, 1, i - 1)..sub(z, j)
+        i = i + 1
+      ------------------------------------------------------------
+      elseif p &lt;= 8 then                -- \a\b\f\n\r\t\v\\
+        i = i + 2                       -- no change
+      ------------------------------------------------------------
+      elseif p &lt;= 10 then               -- \&lt;eol&gt; -- normalize EOL
+        local eol = sub(z, j, j + 1)
+        if eol == &quot;\r\n&quot; or eol == &quot;\n\r&quot; then
+          z = sub(z, 1, i)..&quot;\n&quot;..sub(z, j + 2)
+        elseif p == 10 then  -- \r case
+          z = sub(z, 1, i)..&quot;\n&quot;..sub(z, j + 1)
+        end
+        i = i + 2
+      ------------------------------------------------------------
+      elseif p &lt;= 12 then               -- \&quot;\' -- remove \ for ndelim
+        if d == delim then
+          c_delim = c_delim + 1
+          i = i + 2
+        else
+          c_ndelim = c_ndelim + 1
+          z = sub(z, 1, i - 1)..sub(z, j)
+          i = i + 1
+        end
+      ------------------------------------------------------------
+      else                              -- \ddd -- various steps
+        local s = match(z, &quot;^(%d%d?%d?)&quot;, j)
+        j = i + 1 + #s                  -- skip to location
+        local cv = s + 0
+        local cc = string.char(cv)
+        local p = find(&quot;\a\b\f\n\r\t\v&quot;, cc, 1, true)
+        if p then                       -- special escapes
+          s = &quot;\\&quot;..sub(&quot;abfnrtv&quot;, p, p)
+        elseif cv &lt; 32 then             -- normalized \ddd
+          s = &quot;\\&quot;..cv
+        elseif cc == delim then         -- \&lt;delim&gt;
+          s = &quot;\\&quot;..cc
+          c_delim = c_delim + 1
+        elseif cc == &quot;\\&quot; then          -- \\
+          s = &quot;\\\\&quot;
+        else                            -- literal character
+          s = cc
+          if cc == ndelim then
+            c_ndelim = c_ndelim + 1
+          end
+        end
+        z = sub(z, 1, i - 1)..s..sub(z, j)
+        i = i + #s
+      ------------------------------------------------------------
+      end--if p
+    ----------------------------------------------------------------
+    else-- c ~= &quot;\\&quot;                    -- &lt;other&gt; -- no change
+      i = i + 1
+      if c == ndelim then  -- count ndelim, for switching delimiters
+        c_ndelim = c_ndelim + 1
+      end
+    ----------------------------------------------------------------
+    end--if c
+  end--while
+  --------------------------------------------------------------------
+  -- switching delimiters, a long-winded derivation:
+  -- (1) delim takes 2+2*c_delim bytes, ndelim takes c_ndelim bytes
+  -- (2) delim becomes c_delim bytes, ndelim becomes 2+2*c_ndelim bytes
+  -- simplifying the condition (1)&gt;(2) --&gt; c_delim &gt; c_ndelim
+  if c_delim &gt; c_ndelim then
+    i = 1
+    while i &lt;= #z do
+      local p, q, r = find(z, &quot;([\'\&quot;])&quot;, i)
+      if not p then break end
+      if r == delim then                -- \&lt;delim&gt; -&gt; &lt;delim&gt;
+        z = sub(z, 1, p - 2)..sub(z, p)
+        i = p
+      else-- r == ndelim                -- &lt;ndelim&gt; -&gt; \&lt;ndelim&gt;
+        z = sub(z, 1, p - 1)..&quot;\\&quot;..sub(z, p)
+        i = p + 2
+      end
+    end--while
+    delim = ndelim  -- actually change delimiters
+  end
+  --------------------------------------------------------------------
+  z = delim..z..delim
+  if z ~= sinfos[I] then
+    if opt_details then
+      print(&quot;&lt;string&gt; (line &quot;..stoklns[I]..&quot;) &quot;..sinfos[I]..&quot; -&gt; &quot;..z)
+      opt_details = opt_details + 1
+    end
+    sinfos[I] = z
+  end
+end
+
+------------------------------------------------------------------------
+-- long string optimization
+-- * note: warning flagged if trailing whitespace found, not trimmed
+-- * remove first optional newline
+-- * normalize embedded newlines
+-- * reduce '=' separators in delimiters if possible
+------------------------------------------------------------------------
+
+local function do_lstring(I)
+  local info = sinfos[I]
+  local delim1 = match(info, &quot;^%[=*%[&quot;)  -- cut out delimiters
+  local sep = #delim1
+  local delim2 = sub(info, -sep, -1)
+  local z = sub(info, sep + 1, -(sep + 1))  -- lstring without delims
+  local y = &quot;&quot;
+  local i = 1
+  --------------------------------------------------------------------
+  while true do
+    local p, q, r, s = find(z, &quot;([\r\n])([\r\n]?)&quot;, i)
+    -- deal with a single line
+    local ln
+    if not p then
+      ln = sub(z, i)
+    elseif p &gt;= i then
+      ln = sub(z, i, p - 1)
+    end
+    if ln ~= &quot;&quot; then
+      -- flag a warning if there are trailing spaces, won't optimize!
+      if match(ln, &quot;%s+$&quot;) then
+        warn.lstring = &quot;trailing whitespace in long string near line &quot;..stoklns[I]
+      end
+      y = y..ln
+    end
+    if not p then  -- done if no more EOLs
+      break
+    end
+    -- deal with line endings, normalize them
+    i = p + 1
+    if p then
+      if #s &gt; 0 and r ~= s then  -- skip CRLF or LFCR
+        i = i + 1
+      end
+      -- skip first newline, which can be safely deleted
+      if not(i == 1 and i == p) then
+        y = y..&quot;\n&quot;
+      end
+    end
+  end--while
+  --------------------------------------------------------------------
+  -- handle possible deletion of one or more '=' separators
+  if sep &gt;= 3 then
+    local chk, okay = sep - 1
+    -- loop to test ending delimiter with less of '=' down to zero
+    while chk &gt;= 2 do
+      local delim = &quot;%]&quot;..rep(&quot;=&quot;, chk - 2)..&quot;%]&quot;
+      if not match(y, delim) then okay = chk end
+      chk = chk - 1
+    end
+    if okay then  -- change delimiters
+      sep = rep(&quot;=&quot;, okay - 2)
+      delim1, delim2 = &quot;[&quot;..sep..&quot;[&quot;, &quot;]&quot;..sep..&quot;]&quot;
+    end
+  end
+  --------------------------------------------------------------------
+  sinfos[I] = delim1..y..delim2
+end
+
+------------------------------------------------------------------------
+-- long comment optimization
+-- * note: does not remove first optional newline
+-- * trim trailing whitespace
+-- * normalize embedded newlines
+-- * reduce '=' separators in delimiters if possible
+------------------------------------------------------------------------
+
+local function do_lcomment(I)
+  local info = sinfos[I]
+  local delim1 = match(info, &quot;^%-%-%[=*%[&quot;)  -- cut out delimiters
+  local sep = #delim1
+  local delim2 = sub(info, -sep, -1)
+  local z = sub(info, sep + 1, -(sep - 1))  -- comment without delims
+  local y = &quot;&quot;
+  local i = 1
+  --------------------------------------------------------------------
+  while true do
+    local p, q, r, s = find(z, &quot;([\r\n])([\r\n]?)&quot;, i)
+    -- deal with a single line, extract and check trailing whitespace
+    local ln
+    if not p then
+      ln = sub(z, i)
+    elseif p &gt;= i then
+      ln = sub(z, i, p - 1)
+    end
+    if ln ~= &quot;&quot; then
+      -- trim trailing whitespace if non-empty line
+      local ws = match(ln, &quot;%s*$&quot;)
+      if #ws &gt; 0 then ln = sub(ln, 1, -(ws + 1)) end
+      y = y..ln
+    end
+    if not p then  -- done if no more EOLs
+      break
+    end
+    -- deal with line endings, normalize them
+    i = p + 1
+    if p then
+      if #s &gt; 0 and r ~= s then  -- skip CRLF or LFCR
+        i = i + 1
+      end
+      y = y..&quot;\n&quot;
+    end
+  end--while
+  --------------------------------------------------------------------
+  -- handle possible deletion of one or more '=' separators
+  sep = sep - 2
+  if sep &gt;= 3 then
+    local chk, okay = sep - 1
+    -- loop to test ending delimiter with less of '=' down to zero
+    while chk &gt;= 2 do
+      local delim = &quot;%]&quot;..rep(&quot;=&quot;, chk - 2)..&quot;%]&quot;
+      if not match(y, delim) then okay = chk end
+      chk = chk - 1
+    end
+    if okay then  -- change delimiters
+      sep = rep(&quot;=&quot;, okay - 2)
+      delim1, delim2 = &quot;--[&quot;..sep..&quot;[&quot;, &quot;]&quot;..sep..&quot;]&quot;
+    end
+  end
+  --------------------------------------------------------------------
+  sinfos[I] = delim1..y..delim2
+end
+
+------------------------------------------------------------------------
+-- short comment optimization
+-- * trim trailing whitespace
+------------------------------------------------------------------------
+
+local function do_comment(i)
+  local info = sinfos[i]
+  local ws = match(info, &quot;%s*$&quot;)        -- just look from end of string
+  if #ws &gt; 0 then
+    info = sub(info, 1, -(ws + 1))      -- trim trailing whitespace
+  end
+  sinfos[i] = info
+end
+
+------------------------------------------------------------------------
+-- returns true if string found in long comment
+-- * this is a feature to keep copyright or license texts
+------------------------------------------------------------------------
+
+local function keep_lcomment(opt_keep, info)
+  if not opt_keep then return false end  -- option not set
+  local delim1 = match(info, &quot;^%-%-%[=*%[&quot;)  -- cut out delimiters
+  local sep = #delim1
+  local delim2 = sub(info, -sep, -1)
+  local z = sub(info, sep + 1, -(sep - 1))  -- comment without delims
+  if find(z, opt_keep, 1, true) then  -- try to match
+    return true
+  end
+end
+
+------------------------------------------------------------------------
+-- main entry point
+-- * currently, lexer processing has 2 passes
+-- * processing is done on a line-oriented basis, which is easier to
+--   grok due to the next point...
+-- * since there are various options that can be enabled or disabled,
+--   processing is a little messy or convoluted
+------------------------------------------------------------------------
+
+function optimize(option, toklist, semlist, toklnlist)
+  --------------------------------------------------------------------
+  -- set option flags
+  --------------------------------------------------------------------
+  local opt_comments = option[&quot;opt-comments&quot;]
+  local opt_whitespace = option[&quot;opt-whitespace&quot;]
+  local opt_emptylines = option[&quot;opt-emptylines&quot;]
+  local opt_eols = option[&quot;opt-eols&quot;]
+  local opt_strings = option[&quot;opt-strings&quot;]
+  local opt_numbers = option[&quot;opt-numbers&quot;]
+  local opt_keep = option.KEEP
+  opt_details = option.DETAILS and 0  -- upvalues for details display
+  print = print or base.print
+  if opt_eols then  -- forced settings, otherwise won't work properly
+    opt_comments = true
+    opt_whitespace = true
+    opt_emptylines = true
+  end
+  --------------------------------------------------------------------
+  -- variable initialization
+  --------------------------------------------------------------------
+  stoks, sinfos, stoklns                -- set source lists
+    = toklist, semlist, toklnlist
+  local i = 1                           -- token position
+  local tok, info                       -- current token
+  local prev    -- position of last grammar token
+                -- on same line (for TK_SPACE stuff)
+  --------------------------------------------------------------------
+  -- changes a token, info pair
+  --------------------------------------------------------------------
+  local function settoken(tok, info, I)
+    I = I or i
+    stoks[I] = tok or &quot;&quot;
+    sinfos[I] = info or &quot;&quot;
+  end
+  --------------------------------------------------------------------
+  -- processing loop (PASS 1)
+  --------------------------------------------------------------------
+  while true do
+    tok, info = stoks[i], sinfos[i]
+    ----------------------------------------------------------------
+    local atstart = atlinestart(i)      -- set line begin flag
+    if atstart then prev = nil end
+    ----------------------------------------------------------------
+    if tok == &quot;TK_EOS&quot; then             -- end of stream/pass
+      break
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_KEYWORD&quot; or       -- keywords, identifiers,
+           tok == &quot;TK_NAME&quot; or          -- operators
+           tok == &quot;TK_OP&quot; then
+      -- TK_KEYWORD and TK_OP can't be optimized without a big
+      -- optimization framework; it would be more of an optimizing
+      -- compiler, not a source code compressor
+      -- TK_NAME that are locals needs parser to analyze/optimize
+      prev = i
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_NUMBER&quot; then      -- numbers
+      if opt_numbers then
+        do_number(i)  -- optimize
+      end
+      prev = i
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_STRING&quot; or        -- strings, long strings
+           tok == &quot;TK_LSTRING&quot; then
+      if opt_strings then
+        if tok == &quot;TK_STRING&quot; then
+          do_string(i)  -- optimize
+        else
+          do_lstring(i)  -- optimize
+        end
+      end
+      prev = i
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_COMMENT&quot; then     -- short comments
+      if opt_comments then
+        if i == 1 and sub(info, 1, 1) == &quot;#&quot; then
+          -- keep shbang comment, trim whitespace
+          do_comment(i)
+        else
+          -- safe to delete, as a TK_EOL (or TK_EOS) always follows
+          settoken()  -- remove entirely
+        end
+      elseif opt_whitespace then        -- trim whitespace only
+        do_comment(i)
+      end
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_LCOMMENT&quot; then    -- long comments
+      if keep_lcomment(opt_keep, info) then
+        ------------------------------------------------------------
+        -- if --keep, we keep a long comment if &lt;msg&gt; is found;
+        -- this is a feature to keep copyright or license texts
+        if opt_whitespace then          -- trim whitespace only
+          do_lcomment(i)
+        end
+        prev = i
+      elseif opt_comments then
+        local eols = commenteols(info)
+        ------------------------------------------------------------
+        -- prepare opt_emptylines case first, if a disposable token
+        -- follows, current one is safe to dump, else keep a space;
+        -- it is implied that the operation is safe for '-', because
+        -- current is a TK_LCOMMENT, and must be separate from a '-'
+        if is_faketoken[stoks[i + 1]] then
+          settoken()  -- remove entirely
+          tok = &quot;&quot;
+        else
+          settoken(&quot;TK_SPACE&quot;, &quot; &quot;)
+        end
+        ------------------------------------------------------------
+        -- if there are embedded EOLs to keep and opt_emptylines is
+        -- disabled, then switch the token into one or more EOLs
+        if not opt_emptylines and eols &gt; 0 then
+          settoken(&quot;TK_EOL&quot;, rep(&quot;\n&quot;, eols))
+        end
+        ------------------------------------------------------------
+        -- if optimizing whitespaces, force reinterpretation of the
+        -- token to give a chance for the space to be optimized away
+        if opt_whitespace and tok ~= &quot;&quot; then
+          i = i - 1  -- to reinterpret
+        end
+        ------------------------------------------------------------
+      else                              -- disabled case
+        if opt_whitespace then          -- trim whitespace only
+          do_lcomment(i)
+        end
+        prev = i
+      end
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_EOL&quot; then         -- line endings
+      if atstart and opt_emptylines then
+        settoken()  -- remove entirely
+      elseif info == &quot;\r\n&quot; or info == &quot;\n\r&quot; then
+        -- normalize the rest of the EOLs for CRLF/LFCR only
+        -- (note that TK_LCOMMENT can change into several EOLs)
+        settoken(&quot;TK_EOL&quot;, &quot;\n&quot;)
+      end
+    ----------------------------------------------------------------
+    elseif tok == &quot;TK_SPACE&quot; then       -- whitespace
+      if opt_whitespace then
+        if atstart or atlineend(i) then
+          -- delete leading and trailing whitespace
+          settoken()  -- remove entirely
+        else
+          ------------------------------------------------------------
+          -- at this point, since leading whitespace have been removed,
+          -- there should be a either a real token or a TK_LCOMMENT
+          -- prior to hitting this whitespace; the TK_LCOMMENT case
+          -- only happens if opt_comments is disabled; so prev ~= nil
+          local ptok = stoks[prev]
+          if ptok == &quot;TK_LCOMMENT&quot; then
+            -- previous TK_LCOMMENT can abut with anything
+            settoken()  -- remove entirely
+          else
+            -- prev must be a grammar token; consecutive TK_SPACE
+            -- tokens is impossible when optimizing whitespace
+            local ntok = stoks[i + 1]
+            if is_faketoken[ntok] then
+              -- handle special case where a '-' cannot abut with
+              -- either a short comment or a long comment
+              if (ntok == &quot;TK_COMMENT&quot; or ntok == &quot;TK_LCOMMENT&quot;) and
+                 ptok == &quot;TK_OP&quot; and sinfos[prev] == &quot;-&quot; then
+                -- keep token
+              else
+                settoken()  -- remove entirely
+              end
+            else--is_realtoken
+              -- check a pair of grammar tokens, if can abut, then
+              -- delete space token entirely, otherwise keep one space
+              local s = checkpair(prev, i + 1)
+              if s == &quot;&quot; then
+                settoken()  -- remove entirely
+              else
+                settoken(&quot;TK_SPACE&quot;, &quot; &quot;)
+              end
+            end
+          end
+          ------------------------------------------------------------
+        end
+      end
+    ----------------------------------------------------------------
+    else
+      error(&quot;unidentified token encountered&quot;)
+    end
+    ----------------------------------------------------------------
+    i = i + 1
+  end--while
+  repack_tokens()
+  --------------------------------------------------------------------
+  -- processing loop (PASS 2)
+  --------------------------------------------------------------------
+  if opt_eols then
+    i = 1
+    -- aggressive EOL removal only works with most non-grammar tokens
+    -- optimized away because it is a rather simple scheme -- basically
+    -- it just checks 'real' token pairs around EOLs
+    if stoks[1] == &quot;TK_COMMENT&quot; then
+      -- first comment still existing must be shbang, skip whole line
+      i = 3
+    end
+    while true do
+      tok, info = stoks[i], sinfos[i]
+      --------------------------------------------------------------
+      if tok == &quot;TK_EOS&quot; then           -- end of stream/pass
+        break
+      --------------------------------------------------------------
+      elseif tok == &quot;TK_EOL&quot; then       -- consider each TK_EOL
+        local t1, t2 = stoks[i - 1], stoks[i + 1]
+        if is_realtoken[t1] and is_realtoken[t2] then  -- sanity check
+          local s = checkpair(i - 1, i + 1)
+          if s == &quot;&quot; then
+            settoken()  -- remove entirely
+          end
+        end
+      end--if tok
+      --------------------------------------------------------------
+      i = i + 1
+    end--while
+    repack_tokens()
+  end
+  --------------------------------------------------------------------
+  if opt_details and opt_details &gt; 0 then print() end -- spacing
+  return stoks, sinfos, stoklns
+end
+end)
+package.preload['optparser'] = (function (...)
+--[[--------------------------------------------------------------------
+
+  optparser.lua: does parser-based optimizations
+  This file is part of LuaSrcDiet.
+
+  Copyright (c) 2008 Kein-Hong Man &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">khman at users.sf.net</A>&gt;
+  The COPYRIGHT file describes the conditions
+  under which this software may be distributed.
+
+  See the ChangeLog for more information.
+
+----------------------------------------------------------------------]]
+
+--[[--------------------------------------------------------------------
+-- NOTES:
+-- * For more parser-based optimization ideas, see the TODO items or
+--   look at technotes.txt.
+-- * The processing load is quite significant, but since this is an
+--   off-line text processor, I believe we can wait a few seconds.
+-- * TODO: might process &quot;local a,a,a&quot; wrongly... need tests!
+-- * TODO: remove position handling if overlapped locals (rem &lt; 0)
+--   needs more study, to check behaviour
+-- * TODO: there are probably better ways to do allocation, e.g. by
+--   choosing better methods to sort and pick locals...
+-- * TODO: we don't need 53*63 two-letter identifiers; we can make
+--   do with significantly less depending on how many that are really
+--   needed and improve entropy; e.g. 13 needed -&gt; choose 4*4 instead
+----------------------------------------------------------------------]]
+
+local base = _G
+local string = string
+local table = table
+module &quot;optparser&quot;
+
+----------------------------------------------------------------------
+-- Letter frequencies for reducing symbol entropy (fixed version)
+-- * Might help a wee bit when the output file is compressed
+-- * See Wikipedia: <A HREF="http://en.wikipedia.org/wiki/Letter_frequencies">http://en.wikipedia.org/wiki/Letter_frequencies</A>
+-- * We use letter frequencies according to a Linotype keyboard, plus
+--   the underscore, and both lower case and upper case letters.
+-- * The arrangement below (LC, underscore, %d, UC) is arbitrary.
+-- * This is certainly not optimal, but is quick-and-dirty and the
+--   process has no significant overhead
+----------------------------------------------------------------------
+
+local LETTERS = &quot;etaoinshrdlucmfwypvbgkqjxz_ETAOINSHRDLUCMFWYPVBGKQJXZ&quot;
+local ALPHANUM = &quot;etaoinshrdlucmfwypvbgkqjxz_0123456789ETAOINSHRDLUCMFWYPVBGKQJXZ&quot;
+
+-- names or identifiers that must be skipped
+-- * the first two lines are for keywords
+local SKIP_NAME = {}
+for v in string.gmatch([[
+and break do else elseif end false for function if in
+local nil not or repeat return then true until while
+self]], &quot;%S+&quot;) do
+  SKIP_NAME[v] = true
+end
+
+------------------------------------------------------------------------
+-- variables and data structures
+------------------------------------------------------------------------
+
+local toklist, seminfolist,             -- token lists
+      globalinfo, localinfo,            -- variable information tables
+      globaluniq, localuniq,            -- unique name tables
+      var_new,                          -- index of new variable names
+      varlist                           -- list of output variables
+
+----------------------------------------------------------------------
+-- preprocess information table to get lists of unique names
+----------------------------------------------------------------------
+
+local function preprocess(infotable)
+  local uniqtable = {}
+  for i = 1, #infotable do              -- enumerate info table
+    local obj = infotable[i]
+    local name = obj.name
+    --------------------------------------------------------------------
+    if not uniqtable[name] then         -- not found, start an entry
+      uniqtable[name] = {
+        decl = 0, token = 0, size = 0,
+      }
+    end
+    --------------------------------------------------------------------
+    local uniq = uniqtable[name]        -- count declarations, tokens, size
+    uniq.decl = uniq.decl + 1
+    local xref = obj.xref
+    local xcount = #xref
+    uniq.token = uniq.token + xcount
+    uniq.size = uniq.size + xcount * #name
+    --------------------------------------------------------------------
+    if obj.decl then            -- if local table, create first,last pairs
+      obj.id = i
+      obj.xcount = xcount
+      if xcount &gt; 1 then        -- if ==1, means local never accessed
+        obj.first = xref[2]
+        obj.last = xref[xcount]
+      end
+    --------------------------------------------------------------------
+    else                        -- if global table, add a back ref
+      uniq.id = i
+    end
+    --------------------------------------------------------------------
+  end--for
+  return uniqtable
+end
+
+----------------------------------------------------------------------
+-- calculate actual symbol frequencies, in order to reduce entropy
+-- * this may help further reduce the size of compressed sources
+-- * note that since parsing optimizations is put before lexing
+--   optimizations, the frequency table is not exact!
+-- * yes, this will miss --keep block comments too...
+----------------------------------------------------------------------
+
+local function recalc_for_entropy(option)
+  local byte = string.byte
+  local char = string.char
+  -- table of token classes to accept in calculating symbol frequency
+  local ACCEPT = {
+    TK_KEYWORD = true, TK_NAME = true, TK_NUMBER = true,
+    TK_STRING = true, TK_LSTRING = true,
+  }
+  if not option[&quot;opt-comments&quot;] then
+    ACCEPT.TK_COMMENT = true
+    ACCEPT.TK_LCOMMENT = true
+  end
+  --------------------------------------------------------------------
+  -- create a new table and remove any original locals by filtering
+  --------------------------------------------------------------------
+  local filtered = {}
+  for i = 1, #toklist do
+    filtered[i] = seminfolist[i]
+  end
+  for i = 1, #localinfo do              -- enumerate local info table
+    local obj = localinfo[i]
+    local xref = obj.xref
+    for j = 1, obj.xcount do
+      local p = xref[j]
+      filtered[p] = &quot;&quot;                  -- remove locals
+    end
+  end
+  --------------------------------------------------------------------
+  local freq = {}                       -- reset symbol frequency table
+  for i = 0, 255 do freq[i] = 0 end
+  for i = 1, #toklist do                -- gather symbol frequency
+    local tok, info = toklist[i], filtered[i]
+    if ACCEPT[tok] then
+      for j = 1, #info do
+        local c = byte(info, j)
+        freq[c] = freq[c] + 1
+      end
+    end--if
+  end--for
+  --------------------------------------------------------------------
+  -- function to re-sort symbols according to actual frequencies
+  --------------------------------------------------------------------
+  local function resort(symbols)
+    local symlist = {}
+    for i = 1, #symbols do              -- prepare table to sort
+      local c = byte(symbols, i)
+      symlist[i] = { c = c, freq = freq[c], }
+    end
+    table.sort(symlist,                 -- sort selected symbols
+      function(v1, v2)
+        return v1.freq &gt; v2.freq
+      end
+    )
+    local charlist = {}                 -- reconstitute the string
+    for i = 1, #symlist do
+      charlist[i] = char(symlist[i].c)
+    end
+    return table.concat(charlist)
+  end
+  --------------------------------------------------------------------
+  LETTERS = resort(LETTERS)             -- change letter arrangement
+  ALPHANUM = resort(ALPHANUM)
+end
+
+----------------------------------------------------------------------
+-- returns a string containing a new local variable name to use, and
+-- a flag indicating whether it collides with a global variable
+-- * trapping keywords and other names like 'self' is done elsewhere
+----------------------------------------------------------------------
+
+local function new_var_name()
+  local var
+  local cletters, calphanum = #LETTERS, #ALPHANUM
+  local v = var_new
+  if v &lt; cletters then                  -- single char
+    v = v + 1
+    var = string.sub(LETTERS, v, v)
+  else                                  -- longer names
+    local range, sz = cletters, 1       -- calculate # chars fit
+    repeat
+      v = v - range
+      range = range * calphanum
+      sz = sz + 1
+    until range &gt; v
+    local n = v % cletters              -- left side cycles faster
+    v = (v - n) / cletters              -- do first char first
+    n = n + 1
+    var = string.sub(LETTERS, n, n)
+    while sz &gt; 1 do
+      local m = v % calphanum
+      v = (v - m) / calphanum
+      m = m + 1
+      var = var..string.sub(ALPHANUM, m, m)
+      sz = sz - 1
+    end
+  end
+  var_new = var_new + 1
+  return var, globaluniq[var] ~= nil
+end
+
+----------------------------------------------------------------------
+-- calculate and print some statistics
+-- * probably better in main source, put here for now
+----------------------------------------------------------------------
+
+local function stats_summary(globaluniq, localuniq, afteruniq, option)
+  local print = print or base.print
+  local fmt = string.format
+  local opt_details = option.DETAILS
+  local uniq_g , uniq_li, uniq_lo, uniq_ti, uniq_to,  -- stats needed
+        decl_g, decl_li, decl_lo, decl_ti, decl_to,
+        token_g, token_li, token_lo, token_ti, token_to,
+        size_g, size_li, size_lo, size_ti, size_to
+    = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
+      0, 0, 0, 0, 0, 0, 0, 0, 0, 0
+  local function avg(c, l)              -- safe average function
+    if c == 0 then return 0 end
+    return l / c
+  end
+  --------------------------------------------------------------------
+  -- collect statistics (note: globals do not have declarations!)
+  --------------------------------------------------------------------
+  for name, uniq in base.pairs(globaluniq) do
+    uniq_g = uniq_g + 1
+    token_g = token_g + uniq.token
+    size_g = size_g + uniq.size
+  end
+  for name, uniq in base.pairs(localuniq) do
+    uniq_li = uniq_li + 1
+    decl_li = decl_li + uniq.decl
+    token_li = token_li + uniq.token
+    size_li = size_li + uniq.size
+  end
+  for name, uniq in base.pairs(afteruniq) do
+    uniq_lo = uniq_lo + 1
+    decl_lo = decl_lo + uniq.decl
+    token_lo = token_lo + uniq.token
+    size_lo = size_lo + uniq.size
+  end
+  uniq_ti = uniq_g + uniq_li
+  decl_ti = decl_g + decl_li
+  token_ti = token_g + token_li
+  size_ti = size_g + size_li
+  uniq_to = uniq_g + uniq_lo
+  decl_to = decl_g + decl_lo
+  token_to = token_g + token_lo
+  size_to = size_g + size_lo
+  --------------------------------------------------------------------
+  -- detailed stats: global list
+  --------------------------------------------------------------------
+  if opt_details then
+    local sorted = {} -- sort table of unique global names by size
+    for name, uniq in base.pairs(globaluniq) do
+      uniq.name = name
+      sorted[#sorted + 1] = uniq
+    end
+    table.sort(sorted,
+      function(v1, v2)
+        return v1.size &gt; v2.size
+      end
+    )
+    local tabf1, tabf2 = &quot;%8s%8s%10s  %s&quot;, &quot;%8d%8d%10.2f  %s&quot;
+    local hl = string.rep(&quot;-&quot;, 44)
+    print(&quot;*** global variable list (sorted by size) ***\n&quot;..hl)
+    print(fmt(tabf1, &quot;Token&quot;,  &quot;Input&quot;, &quot;Input&quot;, &quot;Global&quot;))
+    print(fmt(tabf1, &quot;Count&quot;, &quot;Bytes&quot;, &quot;Average&quot;, &quot;Name&quot;))
+    print(hl)
+    for i = 1, #sorted do
+      local uniq = sorted[i]
+      print(fmt(tabf2, uniq.token, uniq.size, avg(uniq.token, uniq.size), uniq.name))
+    end
+    print(hl)
+    print(fmt(tabf2, token_g, size_g, avg(token_g, size_g), &quot;TOTAL&quot;))
+    print(hl..&quot;\n&quot;)
+  --------------------------------------------------------------------
+  -- detailed stats: local list
+  --------------------------------------------------------------------
+    local tabf1, tabf2 = &quot;%8s%8s%8s%10s%8s%10s  %s&quot;, &quot;%8d%8d%8d%10.2f%8d%10.2f  %s&quot;
+    local hl = string.rep(&quot;-&quot;, 70)
+    print(&quot;*** local variable list (sorted by allocation order) ***\n&quot;..hl)
+    print(fmt(tabf1, &quot;Decl.&quot;, &quot;Token&quot;,  &quot;Input&quot;, &quot;Input&quot;, &quot;Output&quot;, &quot;Output&quot;, &quot;Global&quot;))
+    print(fmt(tabf1, &quot;Count&quot;, &quot;Count&quot;, &quot;Bytes&quot;, &quot;Average&quot;, &quot;Bytes&quot;, &quot;Average&quot;, &quot;Name&quot;))
+    print(hl)
+    for i = 1, #varlist do  -- iterate according to order assigned
+      local name = varlist[i]
+      local uniq = afteruniq[name]
+      local old_t, old_s = 0, 0
+      for j = 1, #localinfo do  -- find corresponding old names and calculate
+        local obj = localinfo[j]
+        if obj.name == name then
+          old_t = old_t + obj.xcount
+          old_s = old_s + obj.xcount * #obj.oldname
+        end
+      end
+      print(fmt(tabf2, uniq.decl, uniq.token, old_s, avg(old_t, old_s),
+                uniq.size, avg(uniq.token, uniq.size), name))
+    end
+    print(hl)
+    print(fmt(tabf2, decl_lo, token_lo, size_li, avg(token_li, size_li),
+              size_lo, avg(token_lo, size_lo), &quot;TOTAL&quot;))
+    print(hl..&quot;\n&quot;)
+  end--if opt_details
+  --------------------------------------------------------------------
+  -- display output
+  --------------------------------------------------------------------
+  local tabf1, tabf2 = &quot;%-16s%8s%8s%8s%8s%10s&quot;, &quot;%-16s%8d%8d%8d%8d%10.2f&quot;
+  local hl = string.rep(&quot;-&quot;, 58)
+  print(&quot;*** local variable optimization summary ***\n&quot;..hl)
+  print(fmt(tabf1, &quot;Variable&quot;,  &quot;Unique&quot;, &quot;Decl.&quot;, &quot;Token&quot;, &quot;Size&quot;, &quot;Average&quot;))
+  print(fmt(tabf1, &quot;Types&quot;, &quot;Names&quot;, &quot;Count&quot;, &quot;Count&quot;, &quot;Bytes&quot;, &quot;Bytes&quot;))
+  print(hl)
+  print(fmt(tabf2, &quot;Global&quot;, uniq_g, decl_g, token_g, size_g, avg(token_g, size_g)))
+  print(hl)
+  print(fmt(tabf2, &quot;Local (in)&quot;, uniq_li, decl_li, token_li, size_li, avg(token_li, size_li)))
+  print(fmt(tabf2, &quot;TOTAL (in)&quot;, uniq_ti, decl_ti, token_ti, size_ti, avg(token_ti, size_ti)))
+  print(hl)
+  print(fmt(tabf2, &quot;Local (out)&quot;, uniq_lo, decl_lo, token_lo, size_lo, avg(token_lo, size_lo)))
+  print(fmt(tabf2, &quot;TOTAL (out)&quot;, uniq_to, decl_to, token_to, size_to, avg(token_to, size_to)))
+  print(hl..&quot;\n&quot;)
+end
+
+----------------------------------------------------------------------
+-- main entry point
+-- * does only local variable optimization for now
+----------------------------------------------------------------------
+
+function optimize(option, _toklist, _seminfolist, _globalinfo, _localinfo)
+  -- set tables
+  toklist, seminfolist, globalinfo, localinfo
+    = _toklist, _seminfolist, _globalinfo, _localinfo
+  var_new = 0                           -- reset variable name allocator
+  varlist = {}
+  ------------------------------------------------------------------
+  -- preprocess global/local tables, handle entropy reduction
+  ------------------------------------------------------------------
+  globaluniq = preprocess(globalinfo)
+  localuniq = preprocess(localinfo)
+  if option[&quot;opt-entropy&quot;] then         -- for entropy improvement
+    recalc_for_entropy(option)
+  end
+  ------------------------------------------------------------------
+  -- build initial declared object table, then sort according to
+  -- token count, this might help assign more tokens to more common
+  -- variable names such as 'e' thus possibly reducing entropy
+  -- * an object knows its localinfo index via its 'id' field
+  -- * special handling for &quot;self&quot; special local (parameter) here
+  ------------------------------------------------------------------
+  local object = {}
+  for i = 1, #localinfo do
+    object[i] = localinfo[i]
+  end
+  table.sort(object,                    -- sort largest first
+    function(v1, v2)
+      return v1.xcount &gt; v2.xcount
+    end
+  )
+  ------------------------------------------------------------------
+  -- the special &quot;self&quot; function parameters must be preserved
+  -- * the allocator below will never use &quot;self&quot;, so it is safe to
+  --   keep those implicit declarations as-is
+  ------------------------------------------------------------------
+  local temp, j, gotself = {}, 1, false
+  for i = 1, #object do
+    local obj = object[i]
+    if not obj.isself then
+      temp[j] = obj
+      j = j + 1
+    else
+      gotself = true
+    end
+  end
+  object = temp
+  ------------------------------------------------------------------
+  -- a simple first-come first-served heuristic name allocator,
+  -- note that this is in no way optimal...
+  -- * each object is a local variable declaration plus existence
+  -- * the aim is to assign short names to as many tokens as possible,
+  --   so the following tries to maximize name reuse
+  -- * note that we preserve sort order
+  ------------------------------------------------------------------
+  local nobject = #object
+  while nobject &gt; 0 do
+    local varname, gcollide
+    repeat
+      varname, gcollide = new_var_name()  -- collect a variable name
+    until not SKIP_NAME[varname]          -- skip all special names
+    varlist[#varlist + 1] = varname       -- keep a list
+    local oleft = nobject
+    ------------------------------------------------------------------
+    -- if variable name collides with an existing global, the name
+    -- cannot be used by a local when the name is accessed as a global
+    -- during which the local is alive (between 'act' to 'rem'), so
+    -- we drop objects that collides with the corresponding global
+    ------------------------------------------------------------------
+    if gcollide then
+      -- find the xref table of the global
+      local gref = globalinfo[globaluniq[varname].id].xref
+      local ngref = #gref
+      -- enumerate for all current objects; all are valid at this point
+      for i = 1, nobject do
+        local obj = object[i]
+        local act, rem = obj.act, obj.rem  -- 'live' range of local
+        -- if rem &lt; 0, it is a -id to a local that had the same name
+        -- so follow rem to extend it; does this make sense?
+        while rem &lt; 0 do
+          rem = localinfo[-rem].rem
+        end
+        local drop
+        for j = 1, ngref do
+          local p = gref[j]
+          if p &gt;= act and p &lt;= rem then drop = true end  -- in range?
+        end
+        if drop then
+          obj.skip = true
+          oleft = oleft - 1
+        end
+      end--for
+    end--if gcollide
+    ------------------------------------------------------------------
+    -- now the first unassigned local (since it's sorted) will be the
+    -- one with the most tokens to rename, so we set this one and then
+    -- eliminate all others that collides, then any locals that left
+    -- can then reuse the same variable name; this is repeated until
+    -- all local declaration that can use this name is assigned
+    -- * the criteria for local-local reuse/collision is:
+    --   A is the local with a name already assigned
+    --   B is the unassigned local under consideration
+    --   =&gt; anytime A is accessed, it cannot be when B is 'live'
+    --   =&gt; to speed up things, we have first/last accesses noted
+    ------------------------------------------------------------------
+    while oleft &gt; 0 do
+      local i = 1
+      while object[i].skip do  -- scan for first object
+        i = i + 1
+      end
+      ------------------------------------------------------------------
+      -- first object is free for assignment of the variable name
+      -- [first,last] gives the access range for collision checking
+      ------------------------------------------------------------------
+      oleft = oleft - 1
+      local obja = object[i]
+      i = i + 1
+      obja.newname = varname
+      obja.skip = true
+      obja.done = true
+      local first, last = obja.first, obja.last
+      local xref = obja.xref
+      ------------------------------------------------------------------
+      -- then, scan all the rest and drop those colliding
+      -- if A was never accessed then it'll never collide with anything
+      -- otherwise trivial skip if:
+      -- * B was activated after A's last access (last &lt; act)
+      -- * B was removed before A's first access (first &gt; rem)
+      -- if not, see detailed skip below...
+      ------------------------------------------------------------------
+      if first and oleft &gt; 0 then  -- must have at least 1 access
+        local scanleft = oleft
+        while scanleft &gt; 0 do
+          while object[i].skip do  -- next valid object
+            i = i + 1
+          end
+          scanleft = scanleft - 1
+          local objb = object[i]
+          i = i + 1
+          local act, rem = objb.act, objb.rem  -- live range of B
+          -- if rem &lt; 0, extend range of rem thru' following local
+          while rem &lt; 0 do
+            rem = localinfo[-rem].rem
+          end
+          --------------------------------------------------------
+          if not(last &lt; act or first &gt; rem) then  -- possible collision
+            --------------------------------------------------------
+            -- B is activated later than A or at the same statement,
+            -- this means for no collision, A cannot be accessed when B
+            -- is alive, since B overrides A (or is a peer)
+            --------------------------------------------------------
+            if act &gt;= obja.act then
+              for j = 1, obja.xcount do  -- ... then check every access
+                local p = xref[j]
+                if p &gt;= act and p &lt;= rem then  -- A accessed when B live!
+                  oleft = oleft - 1
+                  objb.skip = true
+                  break
+                end
+              end--for
+            --------------------------------------------------------
+            -- A is activated later than B, this means for no collision,
+            -- A's access is okay since it overrides B, but B's last
+            -- access need to be earlier than A's activation time
+            --------------------------------------------------------
+            else
+              if objb.last and objb.last &gt;= obja.act then
+                oleft = oleft - 1
+                objb.skip = true
+              end
+            end
+          end
+          --------------------------------------------------------
+          if oleft == 0 then break end
+        end
+      end--if first
+      ------------------------------------------------------------------
+    end--while
+    ------------------------------------------------------------------
+    -- after assigning all possible locals to one variable name, the
+    -- unassigned locals/objects have the skip field reset and the table
+    -- is compacted, to hopefully reduce iteration time
+    ------------------------------------------------------------------
+    local temp, j = {}, 1
+    for i = 1, nobject do
+      local obj = object[i]
+      if not obj.done then
+        obj.skip = false
+        temp[j] = obj
+        j = j + 1
+      end
+    end
+    object = temp  -- new compacted object table
+    nobject = #object  -- objects left to process
+    ------------------------------------------------------------------
+  end--while
+  ------------------------------------------------------------------
+  -- after assigning all locals with new variable names, we can
+  -- patch in the new names, and reprocess to get 'after' stats
+  ------------------------------------------------------------------
+  for i = 1, #localinfo do  -- enumerate all locals
+    local obj = localinfo[i]
+    local xref = obj.xref
+    if obj.newname then                 -- if got new name, patch it in
+      for j = 1, obj.xcount do
+        local p = xref[j]               -- xrefs indexes the token list
+        seminfolist[p] = obj.newname
+      end
+      obj.name, obj.oldname             -- adjust names
+        = obj.newname, obj.name
+    else
+      obj.oldname = obj.name            -- for cases like 'self'
+    end
+  end
+  ------------------------------------------------------------------
+  -- deal with statistics output
+  ------------------------------------------------------------------
+  if gotself then  -- add 'self' to end of list
+    varlist[#varlist + 1] = &quot;self&quot;
+  end
+  local afteruniq = preprocess(localinfo)
+  stats_summary(globaluniq, localuniq, afteruniq, option)
+  ------------------------------------------------------------------
+end
+end)
+--[[--------------------------------------------------------------------
+
+  LuaSrcDiet
+  Compresses Lua source code by removing unnecessary characters.
+  For Lua 5.1.x source code.
+
+  Copyright (c) 2008 Kein-Hong Man &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">khman at users.sf.net</A>&gt;
+  The COPYRIGHT file describes the conditions
+  under which this software may be distributed.
+
+  See the ChangeLog for more information.
+
+----------------------------------------------------------------------]]
+
+--[[--------------------------------------------------------------------
+-- NOTES:
+-- * Remember to update version and date information below (MSG_TITLE)
+-- * TODO: to implement pcall() to properly handle lexer etc. errors
+-- * TODO: verify token stream or double-check binary chunk?
+-- * TODO: need some automatic testing for a semblance of sanity
+-- * TODO: the plugin module is highly experimental and unstable
+----------------------------------------------------------------------]]
+
+-- standard libraries, functions
+local string = string
+local math = math
+local table = table
+local require = require
+local print = print
+local sub = string.sub
+local gmatch = string.gmatch
+
+-- support modules
+local llex = require &quot;llex&quot;
+local lparser = require &quot;lparser&quot;
+local optlex = require &quot;optlex&quot;
+local optparser = require &quot;optparser&quot;
+local plugin
+
+--[[--------------------------------------------------------------------
+-- messages and textual data
+----------------------------------------------------------------------]]
+
+local MSG_TITLE = [[
+LuaSrcDiet: Puts your Lua 5.1 source code on a diet
+Version 0.11.2 (20080608)  Copyright (c) 2005-2008 Kein-Hong Man
+The COPYRIGHT file describes the conditions under which this
+software may be distributed.
+]]
+
+local MSG_USAGE = [[
+usage: LuaSrcDiet [options] [filenames]
+
+example:
+  &gt;LuaSrcDiet myscript.lua -o myscript_.lua
+
+options:
+  -v, --version       prints version information
+  -h, --help          prints usage information
+  -o &lt;file&gt;           specify file name to write output
+  -s &lt;suffix&gt;         suffix for output files (default '_')
+  --keep &lt;msg&gt;        keep block comment with &lt;msg&gt; inside
+  --plugin &lt;module&gt;   run &lt;module&gt; in plugin/ directory
+  -                   stop handling arguments
+
+  (optimization levels)
+  --none              all optimizations off (normalizes EOLs only)
+  --basic             lexer-based optimizations only
+  --maximum           maximize reduction of source
+
+  (informational)
+  --quiet             process files quietly
+  --read-only         read file and print token stats only
+  --dump-lexer        dump raw tokens from lexer to stdout
+  --dump-parser       dump variable tracking tables from parser
+  --details           extra info (strings, numbers, locals)
+
+features (to disable, insert 'no' prefix like --noopt-comments):
+%s
+default settings:
+%s]]
+
+------------------------------------------------------------------------
+-- optimization options, for ease of switching on and off
+-- * positive to enable optimization, negative (no) to disable
+-- * these options should follow --opt-* and --noopt-* style for now
+------------------------------------------------------------------------
+
+local OPTION = [[
+--opt-comments,'remove comments and block comments'
+--opt-whitespace,'remove whitespace excluding EOLs'
+--opt-emptylines,'remove empty lines'
+--opt-eols,'all above, plus remove unnecessary EOLs'
+--opt-strings,'optimize strings and long strings'
+--opt-numbers,'optimize numbers'
+--opt-locals,'optimize local variable names'
+--opt-entropy,'tries to reduce symbol entropy of locals'
+]]
+
+-- preset configuration
+local DEFAULT_CONFIG = [[
+  --opt-comments --opt-whitespace --opt-emptylines
+  --opt-numbers --opt-locals
+]]
+-- override configurations: MUST explicitly enable/disable everything
+local BASIC_CONFIG = [[
+  --opt-comments --opt-whitespace --opt-emptylines
+  --noopt-eols --noopt-strings --noopt-numbers
+  --noopt-locals
+]]
+local MAXIMUM_CONFIG = [[
+  --opt-comments --opt-whitespace --opt-emptylines
+  --opt-eols --opt-strings --opt-numbers
+  --opt-locals --opt-entropy
+]]
+local NONE_CONFIG = [[
+  --noopt-comments --noopt-whitespace --noopt-emptylines
+  --noopt-eols --noopt-strings --noopt-numbers
+  --noopt-locals
+]]
+
+local DEFAULT_SUFFIX = &quot;_&quot;      -- default suffix for file renaming
+local PLUGIN_SUFFIX = &quot;plugin/&quot; -- relative location of plugins
+
+--[[--------------------------------------------------------------------
+-- startup and initialize option list handling
+----------------------------------------------------------------------]]
+
+-- simple error message handler; change to error if traceback wanted
+local function die(msg)
+  print(&quot;LuaSrcDiet: &quot;..msg); os.exit()
+end
+--die = error--DEBUG
+
+if not string.match(_VERSION, &quot;5.1&quot;, 1, 1) then  -- sanity check
+  die(&quot;requires Lua 5.1 to run&quot;)
+end
+
+------------------------------------------------------------------------
+-- prepares text for list of optimizations, prepare lookup table
+------------------------------------------------------------------------
+
+local MSG_OPTIONS = &quot;&quot;
+do
+  local WIDTH = 24
+  local o = {}
+  for op, desc in gmatch(OPTION, &quot;%s*([^,]+),'([^']+)'&quot;) do
+    local msg = &quot;  &quot;..op
+    msg = msg..string.rep(&quot; &quot;, WIDTH - #msg)..desc..&quot;\n&quot;
+    MSG_OPTIONS = MSG_OPTIONS..msg
+    o[op] = true
+    o[&quot;--no&quot;..sub(op, 3)] = true
+  end
+  OPTION = o  -- replace OPTION with lookup table
+end
+
+MSG_USAGE = string.format(MSG_USAGE, MSG_OPTIONS, DEFAULT_CONFIG)
+
+------------------------------------------------------------------------
+-- global variable initialization, option set handling
+------------------------------------------------------------------------
+
+local suffix = DEFAULT_SUFFIX           -- file suffix
+local option = {}                       -- program options
+local stat_c, stat_l                    -- statistics tables
+
+-- function to set option lookup table based on a text list of options
+-- note: additional forced settings for --opt-eols is done in optlex.lua
+local function set_options(CONFIG)
+  for op in gmatch(CONFIG, &quot;(%-%-%S+)&quot;) do
+    if sub(op, 3, 4) == &quot;no&quot; and        -- handle negative options
+       OPTION[&quot;--&quot;..sub(op, 5)] then
+      option[sub(op, 5)] = false
+    else
+      option[sub(op, 3)] = true
+    end
+  end
+end
+
+--[[--------------------------------------------------------------------
+-- support functions
+----------------------------------------------------------------------]]
+
+-- list of token types, parser-significant types are up to TTYPE_GRAMMAR
+-- while the rest are not used by parsers; arranged for stats display
+local TTYPES = {
+  &quot;TK_KEYWORD&quot;, &quot;TK_NAME&quot;, &quot;TK_NUMBER&quot;,         -- grammar
+  &quot;TK_STRING&quot;, &quot;TK_LSTRING&quot;, &quot;TK_OP&quot;,
+  &quot;TK_EOS&quot;,
+  &quot;TK_COMMENT&quot;, &quot;TK_LCOMMENT&quot;,                  -- non-grammar
+  &quot;TK_EOL&quot;, &quot;TK_SPACE&quot;,
+}
+local TTYPE_GRAMMAR = 7
+
+local EOLTYPES = {                      -- EOL names for token dump
+  [&quot;\n&quot;] = &quot;LF&quot;, [&quot;\r&quot;] = &quot;CR&quot;,
+  [&quot;\n\r&quot;] = &quot;LFCR&quot;, [&quot;\r\n&quot;] = &quot;CRLF&quot;,
+}
+
+------------------------------------------------------------------------
+-- read source code from file
+------------------------------------------------------------------------
+
+local function load_file(fname)
+  local INF = io.open(fname, &quot;rb&quot;)
+  if not INF then die(&quot;cannot open \&quot;&quot;..fname..&quot;\&quot; for reading&quot;) end
+  local dat = INF:read(&quot;*a&quot;)
+  if not dat then die(&quot;cannot read from \&quot;&quot;..fname..&quot;\&quot;&quot;) end
+  INF:close()
+  return dat
+end
+
+------------------------------------------------------------------------
+-- save source code to file
+------------------------------------------------------------------------
+
+local function save_file(fname, dat)
+  local OUTF = io.open(fname, &quot;wb&quot;)
+  if not OUTF then die(&quot;cannot open \&quot;&quot;..fname..&quot;\&quot; for writing&quot;) end
+  local status = OUTF:write(dat)
+  if not status then die(&quot;cannot write to \&quot;&quot;..fname..&quot;\&quot;&quot;) end
+  OUTF:close()
+end
+
+------------------------------------------------------------------------
+-- functions to deal with statistics
+------------------------------------------------------------------------
+
+-- initialize statistics table
+local function stat_init()
+  stat_c, stat_l = {}, {}
+  for i = 1, #TTYPES do
+    local ttype = TTYPES[i]
+    stat_c[ttype], stat_l[ttype] = 0, 0
+  end
+end
+
+-- add a token to statistics table
+local function stat_add(tok, seminfo)
+  stat_c[tok] = stat_c[tok] + 1
+  stat_l[tok] = stat_l[tok] + #seminfo
+end
+
+-- do totals for statistics table, return average table
+local function stat_calc()
+  local function avg(c, l)                      -- safe average function
+    if c == 0 then return 0 end
+    return l / c
+  end
+  local stat_a = {}
+  local c, l = 0, 0
+  for i = 1, TTYPE_GRAMMAR do                   -- total grammar tokens
+    local ttype = TTYPES[i]
+    c = c + stat_c[ttype]; l = l + stat_l[ttype]
+  end
+  stat_c.TOTAL_TOK, stat_l.TOTAL_TOK = c, l
+  stat_a.TOTAL_TOK = avg(c, l)
+  c, l = 0, 0
+  for i = 1, #TTYPES do                         -- total all tokens
+    local ttype = TTYPES[i]
+    c = c + stat_c[ttype]; l = l + stat_l[ttype]
+    stat_a[ttype] = avg(stat_c[ttype], stat_l[ttype])
+  end
+  stat_c.TOTAL_ALL, stat_l.TOTAL_ALL = c, l
+  stat_a.TOTAL_ALL = avg(c, l)
+  return stat_a
+end
+
+--[[--------------------------------------------------------------------
+-- main tasks
+----------------------------------------------------------------------]]
+
+------------------------------------------------------------------------
+-- a simple token dumper, minimal translation of seminfo data
+------------------------------------------------------------------------
+
+local function dump_tokens(srcfl)
+  --------------------------------------------------------------------
+  -- load file and process source input into tokens
+  --------------------------------------------------------------------
+  local z = load_file(srcfl)
+  llex.init(z)
+  llex.llex()
+  local toklist, seminfolist = llex.tok, llex.seminfo
+  --------------------------------------------------------------------
+  -- display output
+  --------------------------------------------------------------------
+  for i = 1, #toklist do
+    local tok, seminfo = toklist[i], seminfolist[i]
+    if tok == &quot;TK_OP&quot; and string.byte(seminfo) &lt; 32 then
+      seminfo = &quot;(&quot;.. string.byte(seminfo)..&quot;)&quot;
+    elseif tok == &quot;TK_EOL&quot; then
+      seminfo = EOLTYPES[seminfo]
+    else
+      seminfo = &quot;'&quot;..seminfo..&quot;'&quot;
+    end
+    print(tok..&quot; &quot;..seminfo)
+  end--for
+end
+
+----------------------------------------------------------------------
+-- parser dump; dump globalinfo and localinfo tables
+----------------------------------------------------------------------
+
+local function dump_parser(srcfl)
+  local print = print
+  --------------------------------------------------------------------
+  -- load file and process source input into tokens
+  --------------------------------------------------------------------
+  local z = load_file(srcfl)
+  llex.init(z)
+  llex.llex()
+  local toklist, seminfolist, toklnlist
+    = llex.tok, llex.seminfo, llex.tokln
+  --------------------------------------------------------------------
+  -- do parser optimization here
+  --------------------------------------------------------------------
+  lparser.init(toklist, seminfolist, toklnlist)
+  local globalinfo, localinfo = lparser.parser()
+  --------------------------------------------------------------------
+  -- display output
+  --------------------------------------------------------------------
+  local hl = string.rep(&quot;-&quot;, 72)
+  print(&quot;*** Local/Global Variable Tracker Tables ***&quot;)
+  print(hl..&quot;\n GLOBALS\n&quot;..hl)
+  -- global tables have a list of xref numbers only
+  for i = 1, #globalinfo do
+    local obj = globalinfo[i]
+    local msg = &quot;(&quot;..i..&quot;) '&quot;..obj.name..&quot;' -&gt; &quot;
+    local xref = obj.xref
+    for j = 1, #xref do msg = msg..xref[j]..&quot; &quot; end
+    print(msg)
+  end
+  -- local tables have xref numbers and a few other special
+  -- numbers that are specially named: decl (declaration xref),
+  -- act (activation xref), rem (removal xref)
+  print(hl..&quot;\n LOCALS (decl=declared act=activated rem=removed)\n&quot;..hl)
+  for i = 1, #localinfo do
+    local obj = localinfo[i]
+    local msg = &quot;(&quot;..i..&quot;) '&quot;..obj.name..&quot;' decl:&quot;..obj.decl..
+                &quot; act:&quot;..obj.act..&quot; rem:&quot;..obj.rem
+    if obj.isself then
+      msg = msg..&quot; isself&quot;
+    end
+    msg = msg..&quot; -&gt; &quot;
+    local xref = obj.xref
+    for j = 1, #xref do msg = msg..xref[j]..&quot; &quot; end
+    print(msg)
+  end
+  print(hl..&quot;\n&quot;)
+end
+
+------------------------------------------------------------------------
+-- reads source file(s) and reports some statistics
+------------------------------------------------------------------------
+
+local function read_only(srcfl)
+  local print = print
+  --------------------------------------------------------------------
+  -- load file and process source input into tokens
+  --------------------------------------------------------------------
+  local z = load_file(srcfl)
+  llex.init(z)
+  llex.llex()
+  local toklist, seminfolist = llex.tok, llex.seminfo
+  print(MSG_TITLE)
+  print(&quot;Statistics for: &quot;..srcfl..&quot;\n&quot;)
+  --------------------------------------------------------------------
+  -- collect statistics
+  --------------------------------------------------------------------
+  stat_init()
+  for i = 1, #toklist do
+    local tok, seminfo = toklist[i], seminfolist[i]
+    stat_add(tok, seminfo)
+  end--for
+  local stat_a = stat_calc()
+  --------------------------------------------------------------------
+  -- display output
+  --------------------------------------------------------------------
+  local fmt = string.format
+  local function figures(tt)
+    return stat_c[tt], stat_l[tt], stat_a[tt]
+  end
+  local tabf1, tabf2 = &quot;%-16s%8s%8s%10s&quot;, &quot;%-16s%8d%8d%10.2f&quot;
+  local hl = string.rep(&quot;-&quot;, 42)
+  print(fmt(tabf1, &quot;Lexical&quot;,  &quot;Input&quot;, &quot;Input&quot;, &quot;Input&quot;))
+  print(fmt(tabf1, &quot;Elements&quot;, &quot;Count&quot;, &quot;Bytes&quot;, &quot;Average&quot;))
+  print(hl)
+  for i = 1, #TTYPES do
+    local ttype = TTYPES[i]
+    print(fmt(tabf2, ttype, figures(ttype)))
+    if ttype == &quot;TK_EOS&quot; then print(hl) end
+  end
+  print(hl)
+  print(fmt(tabf2, &quot;Total Elements&quot;, figures(&quot;TOTAL_ALL&quot;)))
+  print(hl)
+  print(fmt(tabf2, &quot;Total Tokens&quot;, figures(&quot;TOTAL_TOK&quot;)))
+  print(hl..&quot;\n&quot;)
+end
+
+------------------------------------------------------------------------
+-- process source file(s), write output and reports some statistics
+------------------------------------------------------------------------
+
+local function process_file(srcfl, destfl)
+  local function print(...)             -- handle quiet option
+    if option.QUIET then return end
+    _G.print(...)
+  end
+  if plugin and plugin.init then        -- plugin init
+    option.EXIT = false
+    plugin.init(option, srcfl, destfl)
+    if option.EXIT then return end
+  end
+  print(MSG_TITLE)                      -- title message
+  --------------------------------------------------------------------
+  -- load file and process source input into tokens
+  --------------------------------------------------------------------
+  local z = load_file(srcfl)
+  if plugin and plugin.post_load then   -- plugin post-load
+    z = plugin.post_load(z) or z
+    if option.EXIT then return end
+  end
+  llex.init(z)
+  llex.llex()
+  local toklist, seminfolist, toklnlist
+    = llex.tok, llex.seminfo, llex.tokln
+  if plugin and plugin.post_lex then    -- plugin post-lex
+    plugin.post_lex(toklist, seminfolist, toklnlist)
+    if option.EXIT then return end
+  end
+  --------------------------------------------------------------------
+  -- collect 'before' statistics
+  --------------------------------------------------------------------
+  stat_init()
+  for i = 1, #toklist do
+    local tok, seminfo = toklist[i], seminfolist[i]
+    stat_add(tok, seminfo)
+  end--for
+  local stat1_a = stat_calc()
+  local stat1_c, stat1_l = stat_c, stat_l
+  --------------------------------------------------------------------
+  -- do parser optimization here
+  --------------------------------------------------------------------
+  if option[&quot;opt-locals&quot;] then
+    optparser.print = print  -- hack
+    lparser.init(toklist, seminfolist, toklnlist)
+    local globalinfo, localinfo = lparser.parser()
+    if plugin and plugin.post_parse then        -- plugin post-parse
+      plugin.post_parse(globalinfo, localinfo)
+      if option.EXIT then return end
+    end
+    optparser.optimize(option, toklist, seminfolist, globalinfo, localinfo)
+    if plugin and plugin.post_optparse then     -- plugin post-optparse
+      plugin.post_optparse()
+      if option.EXIT then return end
+    end
+  end
+  --------------------------------------------------------------------
+  -- do lexer optimization here, save output file
+  --------------------------------------------------------------------
+  optlex.print = print  -- hack
+  toklist, seminfolist, toklnlist
+    = optlex.optimize(option, toklist, seminfolist, toklnlist)
+  if plugin and plugin.post_optlex then         -- plugin post-optlex
+    plugin.post_optlex(toklist, seminfolist, toklnlist)
+    if option.EXIT then return end
+  end
+  local dat = table.concat(seminfolist)
+  -- depending on options selected, embedded EOLs in long strings and
+  -- long comments may not have been translated to \n, tack a warning
+  if string.find(dat, &quot;\r\n&quot;, 1, 1) or
+     string.find(dat, &quot;\n\r&quot;, 1, 1) then
+    optlex.warn.mixedeol = true
+  end
+  -- save optimized source stream to output file
+  save_file(destfl, dat)
+  --------------------------------------------------------------------
+  -- collect 'after' statistics
+  --------------------------------------------------------------------
+  stat_init()
+  for i = 1, #toklist do
+    local tok, seminfo = toklist[i], seminfolist[i]
+    stat_add(tok, seminfo)
+  end--for
+  local stat_a = stat_calc()
+  --------------------------------------------------------------------
+  -- display output
+  --------------------------------------------------------------------
+  print(&quot;Statistics for: &quot;..srcfl..&quot; -&gt; &quot;..destfl..&quot;\n&quot;)
+  local fmt = string.format
+  local function figures(tt)
+    return stat1_c[tt], stat1_l[tt], stat1_a[tt],
+           stat_c[tt],  stat_l[tt],  stat_a[tt]
+  end
+  local tabf1, tabf2 = &quot;%-16s%8s%8s%10s%8s%8s%10s&quot;,
+                       &quot;%-16s%8d%8d%10.2f%8d%8d%10.2f&quot;
+  local hl = string.rep(&quot;-&quot;, 68)
+  print(&quot;*** lexer-based optimizations summary ***\n&quot;..hl)
+  print(fmt(tabf1, &quot;Lexical&quot;,
+            &quot;Input&quot;, &quot;Input&quot;, &quot;Input&quot;,
+            &quot;Output&quot;, &quot;Output&quot;, &quot;Output&quot;))
+  print(fmt(tabf1, &quot;Elements&quot;,
+            &quot;Count&quot;, &quot;Bytes&quot;, &quot;Average&quot;,
+            &quot;Count&quot;, &quot;Bytes&quot;, &quot;Average&quot;))
+  print(hl)
+  for i = 1, #TTYPES do
+    local ttype = TTYPES[i]
+    print(fmt(tabf2, ttype, figures(ttype)))
+    if ttype == &quot;TK_EOS&quot; then print(hl) end
+  end
+  print(hl)
+  print(fmt(tabf2, &quot;Total Elements&quot;, figures(&quot;TOTAL_ALL&quot;)))
+  print(hl)
+  print(fmt(tabf2, &quot;Total Tokens&quot;, figures(&quot;TOTAL_TOK&quot;)))
+  print(hl)
+  --------------------------------------------------------------------
+  -- report warning flags from optimizing process
+  --------------------------------------------------------------------
+  if optlex.warn.lstring then
+    print(&quot;* WARNING: &quot;..optlex.warn.lstring)
+  elseif optlex.warn.mixedeol then
+    print(&quot;* WARNING: &quot;..&quot;output still contains some CRLF or LFCR line endings&quot;)
+  end
+  print()
+end
+
+--[[--------------------------------------------------------------------
+-- main functions
+----------------------------------------------------------------------]]
+
+local arg = {...}  -- program arguments
+local fspec = {}
+set_options(DEFAULT_CONFIG)     -- set to default options at beginning
+
+------------------------------------------------------------------------
+-- per-file handling, ship off to tasks
+------------------------------------------------------------------------
+
+local function do_files(fspec)
+  for _, srcfl in ipairs(fspec) do
+    local destfl
+    ------------------------------------------------------------------
+    -- find and replace extension for filenames
+    ------------------------------------------------------------------
+    local extb, exte = string.find(srcfl, &quot;%.[^%.%\\%/]*$&quot;)
+    local basename, extension = srcfl, &quot;&quot;
+    if extb and extb &gt; 1 then
+      basename = sub(srcfl, 1, extb - 1)
+      extension = sub(srcfl, extb, exte)
+    end
+    destfl = basename..suffix..extension
+    if #fspec == 1 and option.OUTPUT_FILE then
+      destfl = option.OUTPUT_FILE
+    end
+    if srcfl == destfl then
+      die(&quot;output filename identical to input filename&quot;)
+    end
+    ------------------------------------------------------------------
+    -- perform requested operations
+    ------------------------------------------------------------------
+    if option.DUMP_LEXER then
+      dump_tokens(srcfl)
+    elseif option.DUMP_PARSER then
+      dump_parser(srcfl)
+    elseif option.READ_ONLY then
+      read_only(srcfl)
+    else
+      process_file(srcfl, destfl)
+    end
+  end--for
+end
+
+------------------------------------------------------------------------
+-- main function (entry point is after this definition)
+------------------------------------------------------------------------
+
+local function main()
+  local argn, i = #arg, 1
+  if argn == 0 then
+    option.HELP = true
+  end
+  --------------------------------------------------------------------
+  -- handle arguments
+  --------------------------------------------------------------------
+  while i &lt;= argn do
+    local o, p = arg[i], arg[i + 1]
+    local dash = string.match(o, &quot;^%-%-?&quot;)
+    if dash == &quot;-&quot; then                 -- single-dash options
+      if o == &quot;-h&quot; then
+        option.HELP = true; break
+      elseif o == &quot;-v&quot; then
+        option.VERSION = true; break
+      elseif o == &quot;-s&quot; then
+        if not p then die(&quot;-s option needs suffix specification&quot;) end
+        suffix = p
+        i = i + 1
+      elseif o == &quot;-o&quot; then
+        if not p then die(&quot;-o option needs a file name&quot;) end
+        option.OUTPUT_FILE = p
+        i = i + 1
+      elseif o == &quot;-&quot; then
+        break -- ignore rest of args
+      else
+        die(&quot;unrecognized option &quot;..o)
+      end
+    elseif dash == &quot;--&quot; then            -- double-dash options
+      if o == &quot;--help&quot; then
+        option.HELP = true; break
+      elseif o == &quot;--version&quot; then
+        option.VERSION = true; break
+      elseif o == &quot;--keep&quot; then
+        if not p then die(&quot;--keep option needs a string to match for&quot;) end
+        option.KEEP = p
+        i = i + 1
+      elseif o == &quot;--plugin&quot; then
+        if not p then die(&quot;--plugin option needs a module name&quot;) end
+        if option.PLUGIN then die(&quot;only one plugin can be specified&quot;) end
+        option.PLUGIN = p
+        plugin = require(PLUGIN_SUFFIX..p)
+        i = i + 1
+      elseif o == &quot;--quiet&quot; then
+        option.QUIET = true
+      elseif o == &quot;--read-only&quot; then
+        option.READ_ONLY = true
+      elseif o == &quot;--basic&quot; then
+        set_options(BASIC_CONFIG)
+      elseif o == &quot;--maximum&quot; then
+        set_options(MAXIMUM_CONFIG)
+      elseif o == &quot;--none&quot; then
+        set_options(NONE_CONFIG)
+      elseif o == &quot;--dump-lexer&quot; then
+        option.DUMP_LEXER = true
+      elseif o == &quot;--dump-parser&quot; then
+        option.DUMP_PARSER = true
+      elseif o == &quot;--details&quot; then
+        option.DETAILS = true
+      elseif OPTION[o] then  -- lookup optimization options
+        set_options(o)
+      else
+        die(&quot;unrecognized option &quot;..o)
+      end
+    else
+      fspec[#fspec + 1] = o             -- potential filename
+    end
+    i = i + 1
+  end--while
+  if option.HELP then
+    print(MSG_TITLE..MSG_USAGE); return true
+  elseif option.VERSION then
+    print(MSG_TITLE); return true
+  end
+  if #fspec &gt; 0 then
+    if #fspec &gt; 1 and option.OUTPUT_FILE then
+      die(&quot;with -o, only one source file can be specified&quot;)
+    end
+    do_files(fspec)
+    return true
+  else
+    die(&quot;nothing to do!&quot;)
+  end
+end
+
+-- entry point -&gt; main() -&gt; do_files()
+if not main() then
+  die(&quot;Please run with option -h or --help for usage information&quot;)
+end
+
+-- end of script


Property changes on: branches/eagle_mmc/luasrcdiet.lua
___________________________________________________________________
Name: svn:executable
   + *

Modified: branches/eagle_mmc/mkfs.py
===================================================================
--- branches/eagle_mmc/mkfs.py	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/mkfs.py	2009-12-24 00:45:27 UTC (rev 610)
@@ -26,8 +26,13 @@
 # dirname - the directory where the files are located.
 # outname - the name of the C output
 # flist - list of files
+# mode - preprocess the file system:
+#   &quot;verbatim&quot; - copy the files directly to the FS as they are
+#   &quot;compile&quot; - precompile all files to Lua bytecode and then copy them
+#   &quot;compress&quot; - keep the source code, but compress it with LuaSrcDiet
+# compcmd - the command to use for compiling if &quot;mode&quot; is &quot;compile&quot;
 # Returns True for OK, False for error
-def mkfs( dirname, outname, flist ):
+def mkfs( dirname, outname, flist, mode, compcmd ):
   # Try to create the output files
   outfname = outname + &quot;.h&quot;
   try:
@@ -63,13 +68,44 @@
     # Try to open and read the file
     try:
       crtfile = file( realname, &quot;rb&quot; )
-      filedata = crtfile.read()
     except:
       outfile.close()
       os.remove( outfname )
       print &quot;Unable to read %s&quot; % fname    
       return False
-        
+    
+    # Do we need to process the file?
+    fextpart = ''
+    if mode == &quot;compile&quot; or mode == &quot;compress&quot;:
+      fnamepart, fextpart = os.path.splitext( realname )
+      if mode == &quot;compress&quot;:
+        newext = &quot;.lua.tmp&quot;
+      else:
+        newext = &quot;.lc&quot;
+      if fextpart == &quot;.lua&quot;:
+        newname = fnamepart + newext
+        if mode == &quot;compress&quot;:
+          print &quot;Compressing %s to %s ...&quot; % ( realname, newname )
+        else:
+          print &quot;Cross compiling %s to %s ...&quot; % ( realname, newname )
+        os.system( compcmd % ( newname, realname ) )
+        # TODO: this assumes that the cross compiler ended OK
+        crtfile.close()
+        try:
+          crtfile = file( newname, &quot;rb&quot; )
+        except:
+          outfile.close()
+          os.remove( outfname )
+          print &quot;Unable to read %s&quot; % newname
+          return False
+        if mode == &quot;compile&quot;:
+          fnamepart, fextpart = os.path.splitext( fname )
+          fname = fnamepart + &quot;.lc&quot;
+    filedata = crtfile.read()
+    crtfile.close()
+    if fextpart == &quot;.lua&quot; and mode != &quot;verbatim&quot;:
+      os.remove( newname )
+
     # Write name, size, id, numpars
     for c in fname:
       _add_data( ord( c ), outfile )
@@ -91,3 +127,4 @@
   outfile.close()
   print &quot;Done, total size is %d bytes&quot; % _bytecnt
   return True
+

Deleted: branches/eagle_mmc/remote-lua.py
===================================================================
--- branches/eagle_mmc/remote-lua.py	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/remote-lua.py	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,23 +0,0 @@
-import os, sys 
-
-output = 'lua'
-cdefs = '-DLUA_CROSS_COMPILER -DLUA_REMOTE -DLUA_USE_READLINE'
-
-# Lua source files and include path
-lua_files = &quot;&quot;&quot;lapi.c lcode.c ldebug.c ldo.c ldump.c lfunc.c lgc.c llex.c lmem.c lobject.c lopcodes.c
-   lparser.c lstate.c lstring.c ltable.c ltm.c lundump.c lvm.c lzio.c lauxlib.c lbaselib.c
-   ldblib.c liolib.c lmathlib.c loslib.c ltablib.c lstrlib.c loadlib.c linit.c lua.c print.c lrotable.c&quot;&quot;&quot;
-lua_full_files = &quot; &quot; + &quot; &quot;.join( [ &quot;src/lua/%s&quot; % name for name in lua_files.split() ] )
-lua_full_files += &quot; src/modules/luarpc.c src/luarpc_posix_serial.c &quot;
-local_include = &quot;-Isrc/lua -Iinc -Isrc/modules&quot;
-
-# Compiler/linker options
-cccom = &quot;gcc -g %s -Wall %s -c $SOURCE -o $TARGET&quot; % ( local_include, cdefs )
-linkcom = &quot;gcc -o $TARGET $SOURCES -lm -lreadline&quot;
-
-# Env for building the program
-comp = Environment( CCCOM = cccom,
-                    LINKCOM = linkcom,
-                    ENV = os.environ )
-Decider( 'MD5' )                  
-Default( comp.Program( output, Split( lua_full_files ) ) )

Modified: branches/eagle_mmc/romfs/EK-LM3S6965.lua
===================================================================
--- branches/eagle_mmc/romfs/EK-LM3S6965.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/romfs/EK-LM3S6965.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -28,6 +28,10 @@
 
 LED_1 = pio.PF_0
 
+-- Associate the RIT OLED display device supported by the builtin module lm3s with
+-- a disp name/device offered here
+disp = lm3s.disp
+
 pio.pin.setdir( pio.INPUT, BTN_UP, BTN_DOWN, BTN_LEFT, BTN_RIGHT, BTN_SELECT )
 pio.pin.setpull( pio.PULLUP, BTN_UP, BTN_DOWN, BTN_LEFT, BTN_RIGHT, BTN_SELECT )
 pio.pin.setdir( pio.OUTPUT, LED_1 )

Modified: branches/eagle_mmc/romfs/EK-LM3S8962.lua
===================================================================
--- branches/eagle_mmc/romfs/EK-LM3S8962.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/romfs/EK-LM3S8962.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -28,6 +28,10 @@
 
 LED_1 = pio.PF_0
 
+-- Associate the RIT OLED display device supported by the builtin module lm3s with
+-- a disp name/device offered here
+disp = lm3s.disp
+
 pio.pin.setdir( pio.INPUT, BTN_UP, BTN_DOWN, BTN_LEFT, BTN_RIGHT, BTN_SELECT )
 pio.pin.setpull( pio.PULLUP, BTN_UP, BTN_DOWN, BTN_LEFT, BTN_RIGHT, BTN_SELECT )
 pio.pin.setdir( pio.OUTPUT, LED_1 )

Modified: branches/eagle_mmc/romfs/pong.lua
===================================================================
--- branches/eagle_mmc/romfs/pong.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/romfs/pong.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -1,327 +1,339 @@
--------------------------------------------------------------------------------
---
---		eLua Pong Game
---
--- LED Lab @ PUC-Rio - 2009
---   Dado Sutter
---   Ives Negreiros
---   Ricardo Rosa
---   Pedro Bittencourt
---   Teo Benjamin
---
-
--- Initial Version by Dado Sutter, Fev 2009
---    This had only the ball bouncing on walls, paddle and paddle movement
---
--- Greatly enhanced by Teo Benjamin in Aug/Sep 2009, adding:
---    Score, resizeable paddles, levels/speeds, items
---
---
--------------------------------------------------------------------------------
-
-local canvas = {}
--- canvas.x                     -- Horizontal display size
--- canvas.y                     -- Vertical display size
-
-local paddle = {}
--- paddle.size                  -- Actual Paddle size = ( 6 * ( paddle.size + 1 ) ) + 2
--- paddle.max_size              -- Max paddle.size value -&gt; Constant
--- paddle.min_size              -- Min paddle.size value -&gt; Constant
--- paddle.y                            -- Paddle's Y position ( X position not needed, always 0 )
-
-local ball = {}
--- ball.x                       -- Ball's X position
--- ball.y                       -- Ball's Y position -&gt; starts at a random position
--- ball.dx                      -- Ball's X movement ( 1 = moving right; -1 = moving left )
--- ball.dy                      -- Ball's Y movement ( 1 = moving down; -1 = moving up )
--- ball.char                    -- The char that is printed for the ball -&gt; Constant
-
-local item = {}
--- item.x                       -- Item's X position
--- item.y                       -- Item's Y position ( fix for each item )
--- item.char                    -- This is the char that represents the item ( if false, there is no item )
--- item.all_chars                     -- A table that contains all the possibles item chars. Initialized by upload_items() function
-
--- Define all constants
-local tmr_id = 1
-paddle.max_size = 4
-paddle.min_size = 0
-ball.char = &quot;*&quot;
-local delay_incr = 2000
-
--- Define all &quot;global&quot; variables as program local ones.
--- The values are initialized at the main loop.
-
-local score                    -- Player's score
-local dscore                   -- How many points for each paddle hit
-local delay_time               -- This value is used for the main delay, to make the game speed faster or slower
-local paddle_hits              -- Counts the number of hits on paddle
-local highscore                -- Current Highscore
-
-item.all_chars = {}
-local pressed = {}             -- pressed[ button ] is true if the corresponding button was pressed, or nil if not
-
-local kit = require( pd.board() )  -- This variable is used as a pin assignments for the specific board
-
-local itemFunction = {
-[&quot;L&quot;] = function ()
-    draw_paddle( paddle.y, 0, 0 )
-    if paddle.size &lt; paddle.max_size then
-      paddle.size = paddle.size + 1
-    end
-    draw_paddle( paddle.y, 11, 0 )
-  end,
-
-[&quot;S&quot;] = function ()
-    draw_paddle( paddle.y, 0, 0 )
-    if paddle.size &gt; paddle.min_size then
-      paddle.size = paddle.size - 1
-    end
-    draw_paddle( paddle.y, 11, 0 )
-  end,
-
-[&quot;?&quot;] = function ()
-    item.char = item.all_chars[ math.random( #item.all_chars ) ]
-    use_item()
-  end,
-
-[&quot;*&quot;] = function ()
-  end,
-
-[&quot;P&quot;] = function ()
-    score = score + dscore
-  end,
-
-[&quot;D&quot;] = function ()
-    score = score * 2
-  end,
-
-[&quot;Z&quot;] = function ()
-    lm3s.disp.print( tostring( score ), 111, 89, 0 )
-    score = 0
-  end,
-
-[&quot;T&quot;] = function ()
-    lm3s.disp.print( ball.char, ball.x, ball.y, 0 )
-    ball.y = math.random( 82 )
-    lm3s.disp.print( ball.char, ball.x, ball.y, 15 )
-  end,
-
-[&quot;F&quot;] = function()
-    if delay_time &gt;= 1000 then
-      delay_time = delay_time - 1000
-    end
-  end,
-}
-
--- Updates Y paddle position and draw it using the draw_paddle( ... ) function
-function update_paddle_pos()
-  if kit.btn_pressed( kit.BTN_UP ) then
-    if ( paddle.y &gt; 0 ) then
-      paddle.y = paddle.y - 1
-      draw_paddle( paddle.y, 11, -1 )
-    else
-      tmr.delay( 1, 1700 )
-    end
-  elseif kit.btn_pressed( kit.BTN_DOWN ) then
-    if ( paddle.y + ( paddle.size*6 ) + 1 &lt; 90 ) then
-      paddle.y = paddle.y + 1
-      draw_paddle( paddle.y, 11, 1 )
-    else
-      tmr.delay( 1, 1600 )
-    end
-  else
-    draw_paddle( paddle.y, 11, 0 )
-    tmr.delay( 1, 300 ) -- Maintain function processing time aprox the same
-  end
-end
-
--- Draw the paddle in the display. This function is used by update_paddle_pos() function
-function draw_paddle( y, color, movement )
-  if ( movement == 0 ) then
-    for i = 0, paddle.size, 1 do
-      lm3s.disp.print( &quot;|&quot;, 0, y + ( i * 6 ),  color )
-    end
-  elseif ( movement &gt; 0 ) then      -- Paddle moving Down
-    if y &lt; 8 then
-      lm3s.disp.print( &quot;|&quot;, 0, 0,  0 )
-    else
-      lm3s.disp.print( &quot;|&quot;, 0, y - 8 , 0 )
-    end
-    for i = 0, paddle.size, 1 do
-      lm3s.disp.print( &quot;|&quot;, 0, y + ( i * 6 ),  color )
-    end
-  elseif ( movement &lt; 0 ) then    -- Paddle moving Up
-    lm3s.disp.print( &quot;|&quot;, 0, y + ( ( paddle.size + 1 ) * 6 ) + 2 , 0 )
-    for i = 0, paddle.size, 1 do
-      lm3s.disp.print( &quot;|&quot;, 0, y + ( i * 6 ),  color )
-    end
-  end
-end
-
--- Updates the ( X, Y ) ball position and prints the corresponding char
-function update_ball_pos()
-  if( ( ball.x + 5 &gt;= canvas.x ) or ( ball.x &lt;= 4 ) ) then
-    ball.dx = -ball.dx;
-    if ball.dx == -1 and item.char == false then
-      createItem()
-    end
-  end
-  if( ( ball.y &gt;= 90 - ball.dy ) or ( ball.y &lt;= 1 - ball.dy ) ) then
-    ball.dy = -ball.dy;
-  end
-  lm3s.disp.print( ball.char, ball.x, ball.y, 0 )
-  ball.x, ball.y = ( ball.x + ball.dx ), ( ball.y + ball.dy );
-  lm3s.disp.print( ball.char, ball.x, ball.y, 15 )
-end
-
--- Draw the top wall and erase the last one. Used to move it
-function draw_wall( x )
-  for i = 0, canvas.y, 7 do                    -- Erase the wall
-    lm3s.disp.print( &quot;|&quot;, canvas.x + 1, i, 0 )
-  end
-  canvas.x = x
-  for i = 0, canvas.y, 7 do                    -- Draw a new wall
-    lm3s.disp.print( &quot;|&quot;, canvas.x + 1, i, 6 )
-  end
-end
-
--- Item Functions
-function createItem()
-  item.char = item.all_chars[ math.random( #item.all_chars ) ]
-  item.x = canvas.x - 10
-  item.y = ball.y
-end
-
--- Upload the itens from table itemFunction into the table item.all_chars
--- Must be used to initialize the items
-function upload_items()
-  for k,v in pairs( itemFunction ) do
-    table.insert( item.all_chars, k )
-  end
-end
-
--- Updates the item X position
-function update_item_pos()
-  if item.char then
-    if ( item.x &lt;= 4 ) then
-      if ( ( item.y + 8 &lt; paddle.y ) or ( item.y &gt; paddle.y + ( paddle.size * 6 ) + 8 ) ) == false then
-        use_item()
-      end
-      lm3s.disp.print( item.char, item.x, item.y, 0 )
-      item.char = false
-      return
-    end
-    lm3s.disp.print( item.char, item.x, item.y, 0 )
-    item.x = item.x - 2
-    lm3s.disp.print( item.char, item.x, item.y, 10 )
-  end
-end
-
--- Uses the item's function
-function use_item()
-  itemFunction[ item.char ]()
-end
-
--- Checks if a button was clicked ( pressed and released )
--- Returns true or false
-function button_clicked( button )
-  if kit.btn_pressed( button ) then
-    pressed[ button ] = true
-  else
-    if pressed[ button ] then
-      pressed[ button ] = nil
-      return true
-    end
-    pressed[ button ] = nil
-  end
-  return false
-end
-
------------- MAIN ------------
-upload_items()
-lm3s.disp.init( 1000000 )
-
-tmr.start( tmr_id )
-lm3s.disp.print( &quot;Pls press SELECT --&gt;&quot;, 0, 34, 12 )          
-while not kit.btn_pressed( kit.BTN_SELECT ) do end -- Random init delay to randomsee
-math.randomseed( tmr.read( tmr_id ) ) 
-collectgarbage( &quot;collect&quot; )
-
--- GAME START
-repeat
-  canvas.x = 124
-  canvas.y = 97
-  ball.x = 5
-  ball.y = math.random( ( canvas.y - 8 ) / 2 ) + ( canvas.y / 4 )
-  ball.dx = 1
-  ball.dy = 1
-  paddle.y = ball.y - 4
-  item.x = 0
-  item.y = 0
-  score = 0
-  dscore = 1
-  item.char = false
-  paddle.size = 2
-  delay_time = 10000
-  paddle_hits = 0
-
-  lm3s.disp.clear()
-
-  draw_wall( canvas.x )
-  draw_paddle( paddle.y, 11, 0 )
-
-  local stop_playing = true
-  while ( true ) do
-    for i = 0, 1 do
-      update_paddle_pos()
-    end
-    tmr.delay ( 0, delay_time )
-    update_ball_pos()
-    update_item_pos()
-    if ( ball.x &lt;= 4 ) then
-      if ( ( ball.y + 8 &lt; paddle.y ) or ( ball.y &gt; paddle.y + ( paddle.size * 6 ) + 8 ) ) then  -- If this is true, you lose
-        break
-    else                                                                     -- Else, you score
-        score = score + dscore
-        paddle_hits = paddle_hits + 1
-      end
-    end
-
-    if button_clicked( kit.BTN_RIGHT ) and delay_time &gt; 0 then   -- If the right button is clicked, increase the level
-      delay_time = delay_time - delay_incr
-      dscore = dscore + 1
-    end
-    if button_clicked( kit.BTN_LEFT ) and dscore &gt; 0 then    -- If the left button is clicked, decrease the level
-      delay_time = delay_time + delay_incr
-      dscore = dscore - 1
-    end
-
-    if ( paddle_hits == 5 ) and canvas.x &gt; 80 then  -- After 5 hits in a row, move the wall until canvas.x = 80
-      paddle_hits = 0
-      draw_wall( canvas.x - 5 )
-    end
-    lm3s.disp.print( tostring( dscore ), 118, 0, 6 )
-    lm3s.disp.print( tostring( score ), 111, 89, 6 )
-    collectgarbage( &quot;collect&quot; )
-  end
--------------------------------------------
--- Game Over
--------------------------------------------
-  if score &gt;= ( highscore or 0 ) then
-    highscore = score
-  end
-  lm3s.disp.clear()
-  lm3s.disp.print( &quot;Game Over :(&quot;, 30, 20, 11 )
-  lm3s.disp.print( &quot;Your score was &quot;..tostring( score ), 15, 40, 11 )
-  lm3s.disp.print( &quot;Highscore: &quot;..tostring( highscore ), 15, 50, 11 )
-  lm3s.disp.print( &quot;SELECT to restart&quot;, 6, 70, 11 )
-  for i=1, 1000000 do
-    if kit.btn_pressed( kit.BTN_SELECT ) then
-      stop_playing = false
-      break
-    end
-  end
-until (stop_playing)
-
-lm3s.disp.off()
+-------------------------------------------------------------------------------
+--
+--		eLua Pong Game
+--
+-- LED Lab @ PUC-Rio - 2009
+--   Dado Sutter
+--   Ives Negreiros
+--   Ricardo Rosa
+--   Pedro Bittencourt
+--   Teo Benjamin
+--
+
+-- Initial Version by Dado Sutter, Fev 2009
+--    This had only the ball bouncing on walls, paddle and paddle movement
+--
+-- Greatly enhanced by Teo Benjamin in Aug/Sep 2009, adding:
+--    Score, resizeable paddles, levels/speeds, items
+--
+--
+-------------------------------------------------------------------------------
+
+local canvas = {}
+-- canvas.x                     -- Horizontal display size
+-- canvas.y                     -- Vertical display size
+
+local paddle = {}
+-- paddle.size                  -- Actual Paddle size = ( 6 * ( paddle.size + 1 ) ) + 2
+-- paddle.max_size              -- Max paddle.size value -&gt; Constant
+-- paddle.min_size              -- Min paddle.size value -&gt; Constant
+-- paddle.y                            -- Paddle's Y position ( X position not needed, always 0 )
+
+local ball = {}
+-- ball.x                       -- Ball's X position
+-- ball.y                       -- Ball's Y position -&gt; starts at a random position
+-- ball.dx                      -- Ball's X movement ( 1 = moving right; -1 = moving left )
+-- ball.dy                      -- Ball's Y movement ( 1 = moving down; -1 = moving up )
+-- ball.char                    -- The char that is printed for the ball -&gt; Constant
+
+local item = {}
+-- item.x                       -- Item's X position
+-- item.y                       -- Item's Y position ( fix for each item )
+-- item.char                    -- This is the char that represents the item ( if false, there is no item )
+-- item.all_chars                     -- A table that contains all the possibles item chars. Initialized by upload_items() function
+
+-- Define all constants
+local tmr_id = 1
+paddle.max_size = 4
+paddle.min_size = 0
+ball.char = &quot;*&quot;
+local delay_incr = 2000
+
+
+-- Define all &quot;global&quot; variables as program local ones.
+-- The values are initialized at the main loop.
+
+local score                    -- Player's score
+local dscore                   -- How many points for each paddle hit
+local delay_time               -- This value is used for the main delay, to make the game speed faster or slower
+local paddle_hits              -- Counts the number of hits on paddle
+local highscore                -- Current Highscore
+
+item.all_chars = {}
+local pressed = {}             -- pressed[ button ] is true if the corresponding button was pressed, or nil if not
+
+local kit = require( pd.board() )  -- This variable is used as a pin assignments for the specific board
+
+local itemFunction = {
+[&quot;L&quot;] = function ()
+    draw_paddle( paddle.y, 0, 0 )
+    if paddle.size &lt; paddle.max_size then
+      paddle.size = paddle.size + 1
+    end
+    draw_paddle( paddle.y, 11, 0 )
+  end,
+[&quot;S&quot;] = function ()
+    draw_paddle( paddle.y, 0, 0 )
+    if paddle.size &gt; paddle.min_size then
+      paddle.size = paddle.size - 1
+    end
+    draw_paddle( paddle.y, 11, 0 )
+  end,
+
+[&quot;?&quot;] = function ()
+    item.char = item.all_chars[ math.random( #item.all_chars ) ]
+    use_item()
+  end,
+
+[&quot;*&quot;] = function ()
+  end,
+
+[&quot;P&quot;] = function ()
+    score = score + dscore
+  end,
+
+[&quot;D&quot;] = function ()
+    score = score * 2
+  end,
+
+[&quot;Z&quot;] = function ()
+    lm3s.disp.print( tostring( score ), 111, 89, 0 )
+    score = 0
+  end,
+
+[&quot;T&quot;] = function ()
+    lm3s.disp.print( ball.char, ball.x, ball.y, 0 )
+    ball.y = math.random( 82 )
+    lm3s.disp.print( ball.char, ball.x, ball.y, 15 )
+  end,
+[&quot;F&quot;] = function()
+    if delay_time &gt;= 1000 then
+      delay_time = delay_time - 1000
+    end
+  end,
+}
+
+-- Updates Y paddle position and draw it using the draw_paddle( ... ) function
+function update_paddle_pos()
+  if kit.btn_pressed( kit.BTN_UP ) then
+    if ( paddle.y &gt; 0 ) then
+      paddle.y = paddle.y - 1
+      draw_paddle( paddle.y, 11, -1 )
+    else
+      tmr.delay( 1, 1700 )
+    end
+  elseif kit.btn_pressed( kit.BTN_DOWN ) then
+    if ( paddle.y + ( paddle.size*6 ) + 1 &lt; 90 ) then
+      paddle.y = paddle.y + 1
+      draw_paddle( paddle.y, 11, 1 )
+    else
+      tmr.delay( 1, 1600 )
+    end
+  else
+    draw_paddle( paddle.y, 11, 0 )
+    tmr.delay( 1, 300 ) -- Maintain function processing time aprox the same
+  end
+end
+
+-- Draw the paddle in the display. This function is used by update_paddle_pos() function
+function draw_paddle( y, color, movement )
+  if ( movement == 0 ) then
+    for i = 0, paddle.size, 1 do
+      lm3s.disp.print( &quot;|&quot;, 0, y + ( i * 6 ),  color )
+    end
+  elseif ( movement &gt; 0 ) then      -- Paddle moving Down
+    if y &lt; 8 then
+      lm3s.disp.print( &quot;|&quot;, 0, 0,  0 )
+    else
+      lm3s.disp.print( &quot;|&quot;, 0, y - 8 , 0 )
+    end
+    for i = 0, paddle.size, 1 do
+      lm3s.disp.print( &quot;|&quot;, 0, y + ( i * 6 ),  color )
+    end
+  elseif ( movement &lt; 0 ) then    -- Paddle moving Up
+    lm3s.disp.print( &quot;|&quot;, 0, y + ( ( paddle.size + 1 ) * 6 ) + 2 , 0 )
+    for i = 0, paddle.size, 1 do
+      lm3s.disp.print( &quot;|&quot;, 0, y + ( i * 6 ),  color )
+    end
+  end
+end
+
+-- Updates the ( X, Y ) ball position and prints the corresponding char
+function update_ball_pos()
+  if( ( ball.x + 5 &gt;= canvas.x ) or ( ball.x &lt;= 4 ) ) then
+    ball.dx = -ball.dx;
+    if ball.dx == -1 and item.char == false then
+      createItem()
+    end
+  end
+  if( ( ball.y &gt;= 90 - ball.dy ) or ( ball.y &lt;= 1 - ball.dy ) ) then
+    ball.dy = -ball.dy;
+  end
+  lm3s.disp.print( ball.char, ball.x, ball.y, 0 )
+  ball.x, ball.y = ( ball.x + ball.dx ), ( ball.y + ball.dy );
+  lm3s.disp.print( ball.char, ball.x, ball.y, 15 )
+end
+
+
+-- Draw the top wall and erase the last one. Used to move it
+function draw_wall( x )
+  for i = 0, canvas.y, 7 do                    -- Erase the wall
+    lm3s.disp.print( &quot;|&quot;, canvas.x + 1, i, 0 )
+  end
+  canvas.x = x
+  for i = 0, canvas.y, 7 do                    -- Draw a new wall
+    lm3s.disp.print( &quot;|&quot;, canvas.x + 1, i, 6 )
+  end
+end
+
+-- Item Functions
+function createItem()
+  item.char = item.all_chars[ math.random( #item.all_chars ) ]
+  item.x = canvas.x - 10
+  item.y = ball.y
+end
+
+-- Upload the itens from table itemFunction into the table item.all_chars
+-- Must be used to initialize the items
+function upload_items()
+  for k,v in pairs( itemFunction ) do
+    table.insert( item.all_chars, k )
+  end
+end
+
+-- Updates the item X position
+function update_item_pos()
+  if item.char then
+    if ( item.x &lt;= 4 ) then
+      if ( ( item.y + 8 &lt; paddle.y ) or ( item.y &gt; paddle.y + ( paddle.size * 6 ) + 8 ) ) == false then
+        use_item()
+      end
+      lm3s.disp.print( item.char, item.x, item.y, 0 )
+      item.char = false
+      return
+    end
+    lm3s.disp.print( item.char, item.x, item.y, 0 )
+    item.x = item.x - 2
+    lm3s.disp.print( item.char, item.x, item.y, 10 )
+  end
+end
+
+-- Uses the item's function
+function use_item()
+  itemFunction[ item.char ]()
+end
+
+-- Checks if a button was clicked ( pressed and released )
+-- Returns true or false
+function button_clicked( button )
+  if kit.btn_pressed( button ) then
+    pressed[ button ] = true
+  else
+    if pressed[ button ] then
+      pressed[ button ] = nil
+      return true
+    end
+    pressed[ button ] = nil
+  end
+  return false
+end
+
+------------ MAIN ------------
+upload_items()
+lm3s.disp.init( 1000000 )
+
+tmr.start( tmr_id )
+--menu()
+math.randomseed( tmr.read( tmr_id ) )    -- If you use the menu function, the time will be used as a seed to the random function
+--tmr.stop( tmr_id )
+
+collectgarbage( &quot;collect&quot; )
+
+
+
+
+
+---------------------------------------------------------------------------------------------------------
+---------------------------------------------------------------------------------------------------------
+--                                                                                                     --
+--                                        GAME START                                                   --
+--                                                                                                     --
+---------------------------------------------------------------------------------------------------------
+---------------------------------------------------------------------------------------------------------
+
+repeat
+  canvas.x = 124
+  canvas.y = 97
+  ball.x = 5
+  ball.y = math.random( ( canvas.y - 8 ) / 2 ) + ( canvas.y / 4 )
+  ball.dx = 1
+  ball.dy = 1
+  paddle.y = ball.y - 4
+  item.x = 0
+  item.y = 0
+  score = 0
+  dscore = 1
+  item.char = false
+  paddle.size = 2
+  delay_time = 10000
+  paddle_hits = 0
+
+  lm3s.disp.clear()
+
+  draw_wall( canvas.x )
+  draw_paddle( paddle.y, 11, 0 )
+
+  while ( true ) do
+    for i = 0, 1 do
+      update_paddle_pos()
+    end
+    tmr.delay ( 0, delay_time )
+    update_ball_pos()
+    update_item_pos()
+    if ( ball.x &lt;= 4 ) then
+      if ( ( ball.y + 8 &lt; paddle.y ) or ( ball.y &gt; paddle.y + ( paddle.size * 6 ) + 8 ) ) then  -- If this is true, you lose
+        break
+    else                                                                     -- Else, you score
+        score = score + dscore
+        paddle_hits = paddle_hits + 1
+      end
+    end
+
+    if button_clicked( kit.BTN_RIGHT ) and delay_time &gt; 0 then   -- If the right button is clicked, increase the level
+      delay_time = delay_time - delay_incr
+      dscore = dscore + 1
+    end
+    if button_clicked( kit.BTN_LEFT ) and dscore &gt; 0 then    -- If the left button is clicked, decrease the level
+      delay_time = delay_time + delay_incr
+      dscore = dscore - 1
+    end
+
+    if ( paddle_hits == 5 ) and canvas.x &gt; 80 then  -- After 5 hits in a row, move the wall until canvas.x = 80
+      paddle_hits = 0
+      draw_wall( canvas.x - 5 )
+    end
+    lm3s.disp.print( tostring( dscore ), 118, 0, 6 )
+    lm3s.disp.print( tostring( score ), 111, 89, 6 )
+    collectgarbage( &quot;collect&quot; )
+  end
+-------------------------------------------
+-- Game Over
+-------------------------------------------
+  if score &gt;= ( highscore or 0 ) then
+    highscore = score
+  end
+  lm3s.disp.clear()
+  lm3s.disp.print( &quot;Game Over :(&quot;, 30, 20, 11 )
+  lm3s.disp.print( &quot;Your score was &quot;..tostring( score ), 15, 40, 11 )
+  lm3s.disp.print( &quot;Highscore: &quot;..tostring( highscore ), 15, 50, 11 )
+  lm3s.disp.print( &quot;SELECT to restart&quot;, 6, 70, 11 )
+  enough = true
+  for i=1, 100000 do
+    if kit.btn_pressed( kit.BTN_SELECT ) then
+      enough = false
+      break
+    end
+  end
+until ( enough )
+
+lm3s.disp.off()

Added: branches/eagle_mmc/romfs/snake.lua
===================================================================
--- branches/eagle_mmc/romfs/snake.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/romfs/snake.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,219 @@
+---------------------------------------------------------------
+-- Classic snake game
+-- Still testing!
+--
+--                                      By Ives Negreiros and T&#233;o Benjamin
+---------------------------------------------------------------
+
+local xMax = math.floor( 128 / 6 ) - 1
+local yMax = math.floor( 96 / 8 ) - 1
+local game_map = {}
+
+local Head = {}
+local Tail = {}
+
+local highscore = 0
+local size = 3
+Tail.x = 1
+Tail.y = 1
+Head.x = Tail.x + ( size - 1 )
+Head.y = Tail.y
+
+local Food = {}
+Food.x = false
+Food.y = false
+
+Head.dx = 1
+Head.dy = 0
+Tail.dx = Head.dx
+Tail.dy = Head.dy
+local direction = &quot;right&quot;
+local level = 1
+local score = 0
+
+lm3s.disp.init( 1000000 )
+
+local kit = require( pd.board() )
+local pressed = {}
+
+local function create_food()
+--      if not food then
+                        Food.x, Food.y = math.random( xMax - 1), math.random( yMax - 1)
+                        while game_map[ Food.x ][ Food.y ] do
+                          Food.x, Food.y = math.random( xMax - 1 ), math.random( yMax - 1 )
+                        end
+                        game_map[ Food.x ][ Food.y ] = &quot;food&quot;
+                        lm3s.disp.print( &quot;@&quot;, Food.x * 6, Food.y * 8, 10 )
+--      end
+end
+
+local function eat_food()
+        lm3s.disp.print( &quot;@&quot;, Head.x * 6, Head.y * 8, 0 )
+        game_map[ Head.x ][ Head.y ] = nil
+        create_food()
+        score = score + level
+end
+
+local function check_collision()
+  if Head.x &lt;= 0 or Head.x &gt;= xMax then
+    return true
+  elseif Head.y &lt;= 0 or Head.y &gt;= yMax then
+    return true
+  elseif ( ( game_map[ Head.x ][ Head.y ] ) and ( game_map[ Head.x ][ Head.y ] ~= &quot;food&quot; ) ) then
+        return true
+  end
+  return false
+end
+
+local function move()
+
+        if game_map[ Tail.x ][ Tail.y ] == &quot;right&quot; then
+                Tail.dx = 1
+                Tail.dy = 0
+        elseif game_map[ Tail.x ][ Tail.y ] == &quot;left&quot; then
+                Tail.dx = -1
+                Tail.dy = 0
+        elseif game_map[ Tail.x ][ Tail.y ] == &quot;up&quot; then
+                Tail.dx = 0
+                Tail.dy = -1
+        elseif game_map[ Tail.x ][ Tail.y ] == &quot;down&quot; then
+                Tail.dx = 0
+                Tail.dy = 1
+        end
+        game_map[ Head.x ][ Head.y ] = direction
+        Head.x = Head.x + Head.dx
+        Head.y = Head.y + Head.dy
+
+        if game_map[ Head.x ][ Head.y ] == &quot;food&quot; then
+                eat_food()
+        else
+                lm3s.disp.print( &quot;*&quot;, Tail.x * 6, Tail.y * 8, 0 )
+                game_map[ Tail.x ][ Tail.y ] = nil
+                Tail.x = Tail.x + Tail.dx
+                Tail.y = Tail.y + Tail.dy
+        end
+
+        lm3s.disp.print( &quot;*&quot;, Head.x * 6, Head.y * 8, 10 )
+
+end
+
+
+
+local function draw_walls()
+        for i = 0, xMax*2, 1 do
+    lm3s.disp.print( &quot;_&quot;, i * 3, yMax * 8 - 6, 11 )
+                lm3s.disp.print( &quot;_&quot;, i * 3, 0, 11 )
+        end
+  for i = 0, yMax*2, 1 do
+    lm3s.disp.print( &quot;|&quot;, xMax * 6, i * 4, 11 )
+                lm3s.disp.print( &quot;|&quot;, 0, i * 4, 11 )
+        end
+end
+
+local function button_clicked( button )
+  if kit.btn_pressed( button ) then
+    pressed[ button ] = true
+  else
+    if pressed[ button ] then
+      pressed[ button ] = nil
+      return true
+    end
+  end
+  return false
+end
+
+
+function init()
+  food = false
+  lm3s.disp.clear()
+  draw_walls()
+  size = 3
+  score = 0
+  level = 1
+  Tail.x = 1
+  Tail.y = 1
+  Head.x = Tail.x + ( size - 1 )
+  Head.y = Tail.y
+  Head.dx = 1
+  Head.dy = 0
+  Tail.dx = Head.dx
+  Tail.dy = Head.dy
+  direction = &quot;right&quot;
+
+        for i = 0, xMax, 1 do
+                game_map[ i ] = {}
+        end
+  for i = 0, size - 1, 1 do
+          game_map[ Tail.x + ( i * Tail.dx ) ][ Tail.y + ( i * Tail.dy ) ] = direction
+          lm3s.disp.print( &quot;*&quot;, ( Tail.x + ( i * Tail.dx ) ) * 6, ( Tail.y + ( i * Tail.dy ) ) * 8, 10 )
+  end
+        create_food()
+end
+
+--init()
+--create_food()
+
+repeat
+        init()
+  while true do
+                local dir = direction
+                for i = 1, 1000 - ( 100 * level ), 1 do
+
+                        if kit.btn_pressed( kit.BTN_RIGHT ) and direction ~= &quot;left&quot; then
+                                dir = &quot;right&quot;
+                                Head.dx = 1
+                                Head.dy = 0
+                        end
+                        if kit.btn_pressed( kit.BTN_LEFT ) and direction ~= &quot;right&quot; then
+                                dir = &quot;left&quot;
+                                Head.dx = -1
+                                Head.dy = 0
+                        end
+                        if kit.btn_pressed( kit.BTN_UP ) and direction ~= &quot;down&quot; then
+                                dir = &quot;up&quot;
+                                Head.dx = 0
+                                Head.dy = -1
+                        end
+                        if kit.btn_pressed( kit.BTN_DOWN ) and direction ~= &quot;up&quot; then
+                                dir = &quot;down&quot;
+                                Head.dx = 0
+                                Head.dy = 1
+                        end
+                        if button_clicked( kit.BTN_SELECT ) and level &lt; 10 then
+                                level = level + 1
+                        end
+                end
+                direction = dir
+                move()
+                if check_collision() then print&quot;colidiu&quot; break end
+          --tmr.delay( 0, 400000 )
+        --[[
+          game_map[ Head.x ][ Head.y ] = nil
+        if Head.x &lt; xMax then
+                Head.x = Head.x + 1
+        end
+        game_map[ Head.x ][ Head.y ] = true
+    ]]--
+                collectgarbage( &quot;collect&quot; )
+        end
+
+
+        if score &gt; highscore then
+    highscore = score
+  end
+    lm3s.disp.clear()                         -- This statements displays the game over screen
+    lm3s.disp.print( &quot;Game Over :(&quot;, 30, 20, 11 )
+    lm3s.disp.print( &quot;Your score was &quot;..tostring( score ), 0, 40, 11 )
+    lm3s.disp.print( &quot;Highscore: &quot;..tostring( highscore ), 15, 50, 11 )
+    lm3s.disp.print( &quot;SELECT to restart&quot;, 6, 70, 11 )
+  enough = true                        -- If the player presses select before the time reach 1000000ms, then restart the game
+  for i=1, 1000000 do
+    if kit.btn_pressed( kit.BTN_SELECT ) then
+      enough = false
+      break
+    end
+  end
+  lm3s.disp.clear()
+until ( enough )
+lm3s.disp.off()
+

Copied: branches/eagle_mmc/rpc-lua.py (from rev 609, branches/eagle_mmc/remote-lua.py)
===================================================================
--- branches/eagle_mmc/remote-lua.py	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/rpc-lua.py	2009-12-24 00:45:27 UTC (rev 610)
@@ -0,0 +1,23 @@
+import os, sys 
+
+output = 'luarpc'
+cdefs = '-DLUA_CROSS_COMPILER -DLUA_RPC -DLUA_USE_READLINE'
+
+# Lua source files and include path
+lua_files = &quot;&quot;&quot;lapi.c lcode.c ldebug.c ldo.c ldump.c lfunc.c lgc.c llex.c lmem.c lobject.c lopcodes.c
+   lparser.c lstate.c lstring.c ltable.c ltm.c lundump.c lvm.c lzio.c lauxlib.c lbaselib.c
+   ldblib.c liolib.c lmathlib.c loslib.c ltablib.c lstrlib.c loadlib.c linit.c lua.c print.c lrotable.c&quot;&quot;&quot;
+lua_full_files = &quot; &quot; + &quot; &quot;.join( [ &quot;src/lua/%s&quot; % name for name in lua_files.split() ] )
+lua_full_files += &quot; src/modules/luarpc.c src/luarpc_posix_serial.c &quot;
+local_include = &quot;-Isrc/lua -Iinc -Isrc/modules&quot;
+
+# Compiler/linker options
+cccom = &quot;gcc -g %s -Wall %s -c $SOURCE -o $TARGET&quot; % ( local_include, cdefs )
+linkcom = &quot;gcc -o $TARGET $SOURCES -lm -lreadline&quot;
+
+# Env for building the program
+comp = Environment( CCCOM = cccom,
+                    LINKCOM = linkcom,
+                    ENV = os.environ )
+Decider( 'MD5' )                  
+Default( comp.Program( output, Split( lua_full_files ) ) )

Modified: branches/eagle_mmc/src/lua/linit.c
===================================================================
--- branches/eagle_mmc/src/lua/linit.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/lua/linit.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -21,7 +21,7 @@
 
 extern int luaopen_platform( lua_State *L );
 
-#ifdef LUA_REMOTE
+#ifdef LUA_RPC
 #include &quot;auxmods.h&quot;
 #define LUA_PLATFORM_LIBS_ROM \
   _ROM( AUXLIB_LUARPC, luaopen_luarpc, rpc_map )

Modified: branches/eagle_mmc/src/lua/lua.c
===================================================================
--- branches/eagle_mmc/src/lua/lua.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/lua/lua.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -17,10 +17,8 @@
 #include &quot;lauxlib.h&quot;
 #include &quot;lualib.h&quot;
 
-#if defined(ELUA_PLATFORM)
-#define main lua_main
-#endif
 
+
 static lua_State *globalL = NULL;
 
 static const char *progname = LUA_PROGNAME;
@@ -386,8 +384,7 @@
   return 0;
 }
 
-
-#ifdef LUA_REMOTE
+#ifdef LUA_RPC
 int main (int argc, char **argv) {
 #else
 int lua_main (int argc, char **argv) {

Modified: branches/eagle_mmc/src/lua/luaconf.h
===================================================================
--- branches/eagle_mmc/src/lua/luaconf.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/lua/luaconf.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -89,9 +89,8 @@
 
 //## Modified for eLua
 //## Defaults search modules path to our ROM File System
-
-#ifndef LUA_REMOTE
-#define LUA_PATH_DEFAULT &quot;\\ROM\\?.lua&quot;
+#ifndef LUA_RPC
+#define LUA_PATH_DEFAULT &quot;/rom/?.lua&quot;
 #else
 #define LUA_PATH_DEFAULT  \
 		&quot;.\\?.lua;&quot;  LUA_LDIR&quot;?.lua;&quot;  LUA_LDIR&quot;?\\init.lua;&quot; \
@@ -105,7 +104,7 @@
 #define LUA_LDIR	LUA_ROOT &quot;share/lua/5.1/&quot;
 #define LUA_CDIR	LUA_ROOT &quot;lib/lua/5.1/&quot;
 
-#ifndef LUA_REMOTE
+#ifndef LUA_RPC
 #define LUA_PATH_DEFAULT  &quot;/rom/?.lua&quot;
 #else
 
@@ -827,7 +826,7 @@
 ** without modifying the main part of the file.
 */
 
-#if !defined(LUA_CROSS_COMPILER) || defined(_WIN32)
+#if !defined(LUA_CROSS_COMPILER)
 typedef short int16_t;
 typedef long int32_t;
 #endif

Modified: branches/eagle_mmc/src/luarpc_elua_uart.c
===================================================================
--- branches/eagle_mmc/src/luarpc_elua_uart.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/luarpc_elua_uart.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -7,30 +7,64 @@
 
 #ifdef BUILD_LUARPC
 
-int uart_timeout = PLATFORM_UART_INFINITE_TIMEOUT;
-
-/* Setup Transport */
+// Setup Transport
 void transport_init (Transport *tpt)
 {
 	tpt-&gt;fd = INVALID_TRANSPORT;
+  tpt-&gt;tmr_id = 0;
 }
 
-/* Open Listener / Server */
+// Open Listener / Server
 void transport_open_listener(lua_State *L, ServerHandle *handle)
 {
-	/* Get args &amp; Set up connection */
-	
-	handle-&gt;ltpt.fd = CON_UART_ID;
+	// Get args &amp; Set up connection
+	unsigned uart_id, tmr_id;
+  
+  check_num_args( L,3 ); // 1st arg is uart num, 2nd arg is tmr_id, 3nd is handle
+  if ( !lua_isnumber( L, 1 ) ) 
+    luaL_error( L, &quot;1st arg must be uart num&quot; );
+    
+  if ( !lua_isnumber( L, 2 ) ) 
+    luaL_error( L, &quot;2nd arg must be timer num&quot; );
+
+  // @@@ Error handling could likely be better here
+  uart_id = lua_tonumber( L, 1 );
+  if( !platform_uart_exists( uart_id ) )
+    luaL_error( L, &quot;invalid uart id&quot; );
+  
+  tmr_id = lua_tonumber( L, 2 );
+  if( !platform_timer_exists( tmr_id ) )
+    luaL_error( L, &quot;invalid timer id&quot; );
+  
+	handle-&gt;ltpt.fd = ( int )uart_id;
+	handle-&gt;ltpt.tmr_id = tmr_id;
 }
 
-/* Open Connection / Client */
+// Open Connection / Client
 int transport_open_connection(lua_State *L, Handle *handle)
 {
-	handle-&gt;tpt.fd = CON_UART_ID;
-	return 0;
+	// Get args &amp; Set up connection
+	unsigned uart_id, tmr_id;
+  
+  check_num_args( L,3 ); // 1st arg is uart num, 2nd arg is tmr_id, 3nd is handle
+  if ( !lua_isnumber( L, 1 ) ) 
+    return luaL_error( L, &quot;1st arg must be uart num&quot; );
+    
+  if ( !lua_isnumber( L, 2 ) ) 
+    return luaL_error( L, &quot;2nd arg must be timer num&quot; );
+
+  uart_id = lua_tonumber( L, 1 );
+  MOD_CHECK_ID( uart, uart_id );
+  
+  tmr_id = lua_tonumber( L, 1 );
+  MOD_CHECK_ID( timer, tmr_id );
+  
+	handle-&gt;tpt.fd = ( int )uart_id;
+	handle-&gt;tpt.tmr_id = tmr_id;
+	return 1;
 }
 
-/* Accept Connection */
+// Accept Connection 
 void transport_accept (Transport *tpt, Transport *atpt)
 {
 	struct exception e;
@@ -45,29 +79,30 @@
 	int n = 0;
 	int c;
 	struct exception e;
+	int uart_timeout = PLATFORM_UART_INFINITE_TIMEOUT; // not sure whether we should always follow this
 	
 	while( n &lt; length )
 	{
 		TRANSPORT_VERIFY_OPEN;
-		c = platform_uart_recv( CON_UART_ID, CON_TIMER_ID, uart_timeout );
+		c = platform_uart_recv( tpt-&gt;fd, tpt-&gt;tmr_id, uart_timeout );
 				
     if( c &lt; 0 )
 		{
-		  uart_timeout = 1000000; /*  Reset and use timeout of 1s */
+		  // uart_timeout = 1000000;  // Reset and use timeout of 1s
 			e.errnum = ERR_NODATA;
 			e.type = nonfatal;
 			Throw( e );
 		}
 		else
 		{
-			buffer[ n ] = ( u8 ) c;
+			buffer[ n ] = ( u8 )c;
 			n++;
 		}
-		/* After getting one char of a read, remainder should follow within a timeout of 0.1 sec */
+		// After getting one char of a read remainder
+		//  should follow within a timeout of 0.1 sec
 		uart_timeout = 100000;
   }
 	
-	uart_timeout = PLATFORM_UART_INFINITE_TIMEOUT;
 }
 
 void transport_write_buffer( Transport *tpt, const u8 *buffer, int length )
@@ -80,21 +115,21 @@
     platform_uart_send( CON_UART_ID, buffer[ i ] );
 }
 
-/* Check if data is available on connection without reading:
- 		- 1 = data available, 0 = no data available */
+// Check if data is available on connection without reading:
+// 		- 1 = data available, 0 = no data available
 int transport_readable (Transport *tpt)
 {
-	return 1; /* no really easy way to check this unless platform support is added */
+	return 1; // no really easy way to check this unless platform support is added
 }
 
-/* Check if transport is open:
-		- 1 = connection open, 0 = connection closed */
+// Check if transport is open:
+//		- 1 = connection open, 0 = connection closed
 int transport_is_open (Transport *tpt)
 {
-	return (tpt-&gt;fd != INVALID_TRANSPORT);
+	return ( tpt-&gt;fd != INVALID_TRANSPORT );
 }
 
-/* Shut down connection */
+// Shut down connection
 void transport_close (Transport *tpt)
 {
 	tpt-&gt;fd = INVALID_TRANSPORT;

Modified: branches/eagle_mmc/src/luarpc_posix_serial.c
===================================================================
--- branches/eagle_mmc/src/luarpc_posix_serial.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/luarpc_posix_serial.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -74,7 +74,7 @@
 {
   check_num_args (L,2); /* 1st arg is path, 2nd is handle */
   if (!lua_isstring (L,1))
-    my_lua_error (L,&quot;first argument must be serial serial port&quot;);
+    luaL_error(L,&quot;first argument must be serial serial port&quot;);
 
   transport_open( &amp;handle-&gt;ltpt, lua_tostring (L,1) );
     
@@ -86,7 +86,7 @@
 { 
   check_num_args (L,2); /* 1st arg is path, 2nd is handle */
   if (!lua_isstring (L,1))
-    my_lua_error (L,&quot;first argument must be serial serial port&quot;);
+    luaL_error(L,&quot;first argument must be serial serial port&quot;);
 
   transport_open( &amp;handle-&gt;tpt, lua_tostring (L,1) );
   

Modified: branches/eagle_mmc/src/main.c
===================================================================
--- branches/eagle_mmc/src/main.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/main.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -31,14 +31,36 @@
 extern char etext[];
 
 
-void boot_remote( void )
+#ifdef ELUA_BOOT_RPC
+
+#ifndef RPC_UART_ID
+  #define RPC_UART_ID     CON_UART_ID
+#endif
+
+#ifndef RPC_TIMER_ID
+  #define RPC_TIMER_ID    CON_TIMER_ID
+#endif
+
+#ifndef RPC_TIMER_ID
+  #define RPC_UART_SPEED  CON_UART_SPEED
+#endif
+
+void boot_rpc( void )
 {
   lua_State *L = lua_open();
   luaL_openlibs(L);  /* open libraries */
+  
+  // Set up UART for 8N1 w/ adjustable baud rate
+  platform_uart_setup( RPC_UART_ID, RPC_UART_SPEED, 8, PLATFORM_UART_PARITY_NONE, PLATFORM_UART_STOPBITS_1 );
+  
+  // Start RPC Server
   lua_getglobal( L, &quot;rpc&quot; );
   lua_getfield( L, -1, &quot;server&quot; );
-  lua_pcall( L, 0, 0, 0 );
+  lua_pushnumber( L, RPC_UART_ID );
+  lua_pushnumber( L, RPC_TIMER_ID );
+  lua_pcall( L, 2, 0, 0 );
 }
+#endif
 
 // ****************************************************************************
 //  Program entry point
@@ -71,8 +93,8 @@
     lua_main( 2, lua_argv );
   }
   
-#ifdef ELUA_BOOT_REMOTE
-  boot_remote();
+#ifdef ELUA_BOOT_RPC
+  boot_rpc();
 #else
   
   // Run the shell
@@ -85,7 +107,7 @@
   }
   else
     shell_start();
-#endif // #ifdef ELUA_BOOT_REMOTE
+#endif // #ifdef ELUA_BOOT_RPC
 
 #ifdef ELUA_SIMULATOR
   hostif_exit(0);

Modified: branches/eagle_mmc/src/modules/can.c
===================================================================
--- branches/eagle_mmc/src/modules/can.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/modules/can.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -69,6 +69,10 @@
   { LSTRKEY( &quot;setup&quot; ),  LFUNCVAL( can_setup ) },
   { LSTRKEY( &quot;send&quot; ),  LFUNCVAL( can_send ) },  
   { LSTRKEY( &quot;recv&quot; ),  LFUNCVAL( can_recv ) },
+#if LUA_OPTIMIZE_MEMORY &gt; 0
+  { LSTRKEY( &quot;ID_STD&quot; ), LNUMVAL( ELUA_CAN_ID_STD ) },
+  { LSTRKEY( &quot;ID_EXT&quot; ), LNUMVAL( ELUA_CAN_ID_EXT ) },
+#endif
   { LNILKEY, LNILVAL }
 };
 
@@ -79,6 +83,10 @@
 #else // #if LUA_OPTIMIZE_MEMORY &gt; 0
   luaL_register( L, AUXLIB_CAN, can_map );
   
+  // Module constants  
+  MOD_REG_NUMBER( L, &quot;ID_STD&quot;, ELUA_CAN_ID_STD );
+  MOD_REG_NUMBER( L, &quot;ID_EXT&quot;, ELUA_CAN_ID_EXT );
+  
   return 1;
 #endif // #if LUA_OPTIMIZE_MEMORY &gt; 0  
 }

Modified: branches/eagle_mmc/src/modules/luarpc.c
===================================================================
--- branches/eagle_mmc/src/modules/luarpc.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/modules/luarpc.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -36,14 +36,14 @@
 
 #ifdef BUILD_LUARPC
 
-/* Support for Compiling with rotables */
+// Support for Compiling with &amp; without rotables 
 #ifdef LUA_OPTIMIZE_MEMORY
 #define LUA_ISCALLABLE( state, idx ) ( lua_isfunction( state, idx ) || lua_islightfunction( state, idx ) )
 #else
 #define LUA_ISCALLABLE( state, idx ) lua_isfunction( state, idx )
 #endif
 
-/* Prototypes for Local Functions  */
+// Prototypes for Local Functions  
 LUALIB_API int luaopen_luarpc( lua_State *L );
 Handle *handle_create( lua_State *L );
 
@@ -81,8 +81,7 @@
   abort();
 }
 
-/* enums for variable types, commands, and status codes */
-
+// Lua Types
 enum {
   RPC_NIL=0,
   RPC_NUMBER,
@@ -91,9 +90,11 @@
   RPC_TABLE,
   RPC_TABLE_END,
   RPC_FUNCTION,
-  RPC_FUNCTION_END
+  RPC_FUNCTION_END,
+  RPC_REMOTE
 };
 
+// RPC Commands
 enum
 {
   RPC_CMD_CALL = 1,
@@ -102,6 +103,7 @@
   RPC_CMD_NEWINDEX
 };
 
+// RPC Status Codes
 enum
 {
   RPC_READY = 64,
@@ -112,7 +114,7 @@
 enum { RPC_PROTOCOL_VERSION = 3 };
 
 
-/* return a string representation of an error number */
+// return a string representation of an error number 
 
 static const char * errorString( int n )
 {
@@ -129,27 +131,24 @@
 }
 
 
-/****************************************************************************/
-/* transport layer generics */
+// **************************************************************************
+// transport layer generics
 
-/* read from the transport into a string buffer. */
-
+// read arbitrary length from the transport into a string buffer. 
 static void transport_read_string( Transport *tpt, const char *buffer, int length )
 {
   transport_read_buffer( tpt, ( u8 * )buffer, length );
 }
 
 
-/* write a string buffer to the transport */
-
+// write arbitrary length string buffer to the transport 
 static void transport_write_string( Transport *tpt, const char *buffer, int length )
 {
   transport_write_buffer( tpt, ( u8 * )buffer, length );
 }
 
 
-/* read a u8 from the transport */
-
+// read a u8 from the transport 
 static u8 transport_read_u8( Transport *tpt )
 {
   u8 b;
@@ -160,8 +159,7 @@
 }
 
 
-/* write a u8 to the transport */
-
+// write a u8 to the transport 
 static void transport_write_u8( Transport *tpt, u8 x )
 {
   struct exception e;
@@ -185,7 +183,7 @@
   uint8_t  b[ 4 ];
 };
 
-/* read a u32 from the transport */
+// read a u32 from the transport 
 static u32 transport_read_u32( Transport *tpt )
 {
   union u32_bytes ub;
@@ -198,7 +196,7 @@
 }
 
 
-/* write a u32 to the transport */
+// write a u32 to the transport 
 static void transport_write_u32( Transport *tpt, u32 x )
 {
   union u32_bytes ub;
@@ -210,8 +208,7 @@
   transport_write_buffer( tpt, ub.b, 4 );
 }
 
-/* read a lua number from the transport */
-
+// read a lua number from the transport 
 static lua_Number transport_read_number( Transport *tpt )
 {
   lua_Number x;
@@ -223,9 +220,9 @@
   if( tpt-&gt;net_little != tpt-&gt;loc_little )
     swap_bytes( ( uint8_t * )b, tpt-&gt;lnum_bytes );
   
-  if( tpt-&gt;net_intnum != tpt-&gt;loc_intnum )
+  if( tpt-&gt;net_intnum != tpt-&gt;loc_intnum ) // if we differ on num types, use int
   {
-    switch( tpt-&gt;lnum_bytes )
+    switch( tpt-&gt;lnum_bytes ) // read integer types
     {
       case 1: {
         int8_t y = *( int8_t * )b;
@@ -247,13 +244,13 @@
     }
   }
   else
-    x = ( lua_Number ) *( lua_Number * )b;
+    x = ( lua_Number ) *( lua_Number * )b; // if types match, use native type
     
   return x;
 }
 
 
-/* write a lua number to the transport */
+// write a lua number to the transport 
 static void transport_write_number( Transport *tpt, lua_Number x )
 {
   struct exception e;
@@ -298,13 +295,10 @@
 
 
 
-/****************************************************************************/
-/* lua utility */
+// **************************************************************************
+// lua utilities
 
-/* replacement for lua_error that resets the exception stack before leaving
- * Lua-RPC.
- */
-
+// replacement for lua_error
 void my_lua_error( lua_State *L, const char *errmsg )
 {
   lua_pushstring( L, errmsg );
@@ -313,23 +307,21 @@
 
 int check_num_args( lua_State *L, int desired_n )
 {
-  int n = lua_gettop( L );   /* number of arguments on stack */
+  int n = lua_gettop( L );   // number of arguments on stack
   if ( n != desired_n )
   {
-    char s[ 30 ];
-    snprintf( s, 30, &quot;must have %d arg%c&quot;, desired_n,
+    return luaL_error( L, &quot;must have %d arg%c&quot;, desired_n,
        ( desired_n == 1 ) ? '\0' : 's' );
-    my_lua_error( L, s );
   }
   return n;
 }
 
 static int ismetatable_type( lua_State *L, int ud, const char *tname )
 {
-  if( lua_getmetatable( L, ud ) ) {  /* does it have a metatable? */
-    lua_getfield( L, LUA_REGISTRYINDEX, tname );  /* get correct metatable */
-    if( lua_rawequal( L, -1, -2 ) ) {  /* does it have the correct mt? */
-      lua_pop( L, 2 );  /* remove both metatables */
+  if( lua_getmetatable( L, ud ) ) {  // does it have a metatable?
+    lua_getfield( L, LUA_REGISTRYINDEX, tname );  // get correct metatable
+    if( lua_rawequal( L, -1, -2 ) ) {  // does it have the correct mt?
+      lua_pop( L, 2 );  // remove both metatables
       return 1;
     }
   }
@@ -339,28 +331,27 @@
 
 
 /****************************************************************************/
-/* read and write lua variables to a transport.
- * these functions do little error handling of their own, but they call transport
- * functions which may throw exceptions, so calls to these functions must be
- * wrapped in a Try block.
- */
+// read and write lua variables to a transport.
+//   these functions do little error handling of their own, but they call transport
+//   functions which may throw exceptions, so calls to these functions must be
+//   wrapped in a Try block.
 
-/* write a table at the given index in the stack. the index must be absolute
- * (i.e. positive).
- */
-
 static void write_variable( Transport *tpt, lua_State *L, int var_index );
 static int read_variable( Transport *tpt, lua_State *L );
 
+// write a table at the given index in the stack. the index must be absolute
+// (i.e. positive).
+// @@@ circular table references will cause stack overflow!
 static void write_table( Transport *tpt, lua_State *L, int table_index )
 {
-  lua_pushnil( L );  /* push first key */
+  lua_pushnil( L );  // push first key
   while ( lua_next( L, table_index ) ) 
   {
-    /* next key and value were pushed on the stack */
+    // next key and value were pushed on the stack 
     write_variable( tpt, L, lua_gettop( L ) - 1 );
     write_variable( tpt, L, lua_gettop( L ) );
-    /* remove value, keep key for next iteration */
+    
+    // remove value, keep key for next iteration 
     lua_pop( L, 1 );
   }
 }
@@ -374,6 +365,9 @@
 #include &quot;lundump.h&quot;
 #include &quot;ldo.h&quot;
 
+// Dump bytecode representation of function onto stack and send. This
+// implementation uses eLua's crosscompile dump to match match the
+// bytecode representation to the client/server negotiated format.
 static void write_function( Transport *tpt, lua_State *L, int var_index )
 {
   TValue *o;
@@ -387,26 +381,28 @@
   target.lua_Number_integral=tpt-&gt;net_intnum;
   target.is_arm_fpa=0;
   
-  /* push function onto stack, serialize to string */
+  // push function onto stack, serialize to string 
   lua_pushvalue( L, var_index );
   luaL_buffinit( L, &amp;b );
   lua_lock(L);
   o = L-&gt;top - 1;
   luaU_dump_crosscompile(L,clvalue(o)-&gt;l.p,writer,&amp;b,0,target);
   lua_unlock(L);
-  /* put string representation on stack and send it */
+  
+  // put string representation on stack and send it
   luaL_pushresult( &amp;b );
   write_variable( tpt, L, lua_gettop( L ) );
   
-  /* Remove function &amp; dumped string from stack*/
+  // Remove function &amp; dumped string from stack
   lua_pop( L, 2 );
 }
 
 
-/* write a variable at the given index in the stack. the index must be absolute
- * (i.e. positive).
- */
+static void helper_remote_index( Helper *helper );
 
+// write a variable at the given index in the stack. the index must be absolute
+// (i.e. positive).
+
 static void write_variable( Transport *tpt, lua_State *L, int var_index )
 {
   int stack_at_start = lua_gettop( L );
@@ -452,22 +448,27 @@
       break;
 
     case LUA_TUSERDATA:
-      my_lua_error( L, &quot;userdata transmission unsupported&quot; );
+      if( lua_isuserdata( L, var_index ) &amp;&amp; ismetatable_type( L, var_index, &quot;rpc.helper&quot; ) )
+      {
+        transport_write_u8( tpt, RPC_REMOTE );
+        helper_remote_index( ( Helper * )lua_touserdata( L, var_index ) );        
+      } else
+        luaL_error( L, &quot;userdata transmission unsupported&quot; );
       break;
 
     case LUA_TTHREAD:
-      my_lua_error( L, &quot;thread transmission unsupported&quot; );
+      luaL_error( L, &quot;thread transmission unsupported&quot; );
       break;
 
     case LUA_TLIGHTUSERDATA:
-      my_lua_error( L, &quot;light userdata transmission unsupported&quot; );
+      luaL_error( L, &quot;light userdata transmission unsupported&quot; );
       break;
   }
   MYASSERT( lua_gettop( L ) == stack_at_start );
 }
 
 
-/* read a table and push in onto the stack */
+// read a table and push in onto the stack 
 static void read_table( Transport *tpt, lua_State *L )
 {
   int table_index;
@@ -482,6 +483,7 @@
   }
 }
 
+// read function and load
 static void read_function( Transport *tpt, lua_State *L )
 {
   const char *b;
@@ -499,12 +501,32 @@
   }
 }
 
+static void read_index( Transport *tpt, lua_State *L )
+{
+  u32 len;
+  char *funcname;
+  char *token = NULL;
+  
+  len = transport_read_u32( tpt ); // variable name length
+  funcname = ( char * )alloca( len + 1 );
+  transport_read_string( tpt, funcname, len );
+  funcname[ len ] = 0;
+  
+  token = strtok( funcname, &quot;.&quot; );
+  lua_getglobal( L, token );
+  token = strtok( NULL, &quot;.&quot; );
+  while( token != NULL )
+  {
+    lua_getfield( L, -1, token );
+    lua_remove( L, -2 );
+    token = strtok( NULL, &quot;.&quot; );
+  }
+}
 
-/* read a variable and push in onto the stack. this returns 1 if a &quot;normal&quot;
- * variable was read, or 0 if an end-table marker was read (in which case
- * nothing is pushed onto the stack).
- */
 
+// read a variable and push in onto the stack. this returns 1 if a &quot;normal&quot;
+// variable was read, or 0 if an end-table or end-function marker was read (in which case
+// nothing is pushed onto the stack).
 static int read_variable( Transport *tpt, lua_State *L )
 {
   struct exception e;
@@ -548,6 +570,10 @@
     case RPC_FUNCTION_END:
       return 0;
 
+    case RPC_REMOTE:
+      read_index( tpt, L );
+      break;
+
     default:
       e.errnum = type;
       e.type = fatal;
@@ -557,11 +583,10 @@
 }
 
 
-/****************************************************************************/
-/* rpc utility */
+// **************************************************************************
+// rpc utilities
 
-/* functions for sending and receving headers
- */
+// functions for sending and receving headers 
 
 static void client_negotiate( Transport *tpt )
 {
@@ -569,11 +594,12 @@
   char header[ 8 ];
   int x = 1;
 
-  tpt-&gt;loc_little = (char)*(char*)&x;
-  tpt-&gt;lnum_bytes = (char)sizeof(lua_Number);
-  tpt-&gt;loc_intnum = (char)(((lua_Number)0.5)==0);
+  // default client configuration
+  tpt-&gt;loc_little = ( char )*( char * )&x;
+  tpt-&gt;lnum_bytes = ( char )sizeof( lua_Number );
+  tpt-&gt;loc_intnum = ( char )( ( ( lua_Number )0.5 ) == 0 );
 
-  /* write the protocol header */
+  // write the protocol header 
   header[0] = 'L';
   header[1] = 'R';
   header[2] = 'P';
@@ -585,7 +611,7 @@
   transport_write_string( tpt, header, sizeof( header ) );
   
   
-  /* read response with wire configuration */
+  // read server's response
   transport_read_string( tpt, header, sizeof( header ) );
   if( header[0] != 'L' ||
       header[1] != 'R' ||
@@ -598,6 +624,7 @@
     Throw( e );
   }
   
+  // write configuration from response
   tpt-&gt;net_little = header[5];
   tpt-&gt;lnum_bytes = header[6];
   tpt-&gt;net_intnum = header[7];
@@ -609,12 +636,12 @@
   char header[ 8 ];
   int x = 1;
   
-  tpt-&gt;net_little = tpt-&gt;loc_little = (char)*(char*)&x;
-  tpt-&gt;lnum_bytes = (char)sizeof(lua_Number);
-  tpt-&gt;net_intnum = tpt-&gt;loc_intnum = (char)(((lua_Number)0.5)==0);
+  // default sever configuration
+  tpt-&gt;net_little = tpt-&gt;loc_little = ( char )*( char * )&x;
+  tpt-&gt;lnum_bytes = ( char )sizeof( lua_Number );
+  tpt-&gt;net_intnum = tpt-&gt;loc_intnum = ( char )( ( ( lua_Number )0.5 ) == 0 );
   
-  
-  /* check that the header is ok */
+  // read and check header from client
   transport_read_string( tpt, header, sizeof( header ) );
   if( header[0] != 'L' ||
       header[1] != 'R' ||
@@ -627,42 +654,58 @@
     Throw( e );
   }
   
-  /*  check if endianness differs, if so use big endian order  */
+  // check if endianness differs, if so use big endian order  
   if( header[ 5 ] != tpt-&gt;loc_little )
     header[ 5 ] = tpt-&gt;net_little = 0;
     
-  /* set number precision to lowest common denominator */
+  // set number precision to lowest common denominator 
   if( header[ 6 ] &gt; tpt-&gt;lnum_bytes )
     header[ 6 ] = tpt-&gt;lnum_bytes;
   if( header[ 6 ] &lt; tpt-&gt;lnum_bytes )
     tpt-&gt;lnum_bytes = header[ 6 ];
   
-  /* if lua_Number is integer on either side, use integer */
+  // if lua_Number is integer on either side, use integer 
   if( header[ 7 ] != tpt-&gt;loc_intnum )
     header[ 7 ] = tpt-&gt;net_intnum = 1;
-    
+  
+  // send reconciled configuration to client
   transport_write_string( tpt, header, sizeof( header ) );
 }
 
-/****************************************************************************/
-/* client side handle and handle helper userdata objects.
- *
- * a handle userdata (handle to a RPC server) is a pointer to a Handle object.
- * a helper userdata is a pointer to a Helper object.
- *
- * helpers let us make expressions like:
- *    handle.funcname (a,b,c)
- * &quot;handle.funcname&quot; returns the helper object, which calls the remote
- * function.
- */
 
-/* global error handling */
-static int global_error_handler = LUA_NOREF;  /* function reference */
+static int generic_catch_handler(lua_State *L, Handle *handle, struct exception e )
+{
+  deal_with_error( L, handle, errorString( e.errnum ) );
+  switch( e.type )
+  {
+    case nonfatal:
+      lua_pushnil( L );
+      return 1;
+      break;
+    case fatal:
+      transport_close( &amp;handle-&gt;tpt );
+      break;
+    default: lua_assert( 0 );
+  }
+  return 0;
+}
 
-/* handle a client or server side error. NOTE: this function may or may not
- * return. the handle `h' may be 0.
- */
+// **************************************************************************
+// client side handle and handle helper userdata objects.
+//
+//  a handle userdata (handle to a RPC server) is a pointer to a Handle object.
+//  a helper userdata is a pointer to a Helper object.
+//
+//  helpers let us make expressions like:
+//     handle.funcname (a,b,c)
+//  &quot;handle.funcname&quot; returns the helper object, which calls the remote
+//  function.
 
+// global error default (no handler) 
+static int global_error_handler = LUA_NOREF;
+
+// handle a client or server side error. NOTE: this function may or may not
+// return. the handle `h' may be 0.
 void deal_with_error(lua_State *L, Handle *h, const char *error_string)
 { 
   if( global_error_handler !=  LUA_NOREF )
@@ -672,10 +715,9 @@
     lua_pcall( L, 1, 0, 0 );
   }
   else
-    my_lua_error( L, error_string );
+    luaL_error( L, error_string );
 }
 
-
 Handle *handle_create( lua_State *L )
 {
   Handle *h = ( Handle * )lua_newuserdata( L, sizeof( Handle ) );
@@ -700,7 +742,7 @@
 }
 
 
-/* indexing a handle returns a helper */
+// indexing a handle returns a helper 
 static int handle_index (lua_State *L)
 {
   const char *s;
@@ -709,20 +751,20 @@
   MYASSERT( lua_isuserdata( L, 1 ) &amp;&amp; ismetatable_type( L, 1, &quot;rpc.handle&quot; ) );
 
   if( lua_type( L, 2 ) != LUA_TSTRING )
-    my_lua_error( L, &quot;can't index a handle with a non-string&quot; );
+    return luaL_error( L, &quot;can't index a handle with a non-string&quot; );
   s = lua_tostring( L, 2 );
   if ( strlen( s ) &gt; NUM_FUNCNAME_CHARS - 1 )
-    my_lua_error( L, errorString( ERR_LONGFNAME ) );
+    return luaL_error( L, errorString( ERR_LONGFNAME ) );
     
   helper_create( L, ( Handle * )lua_touserdata( L, 1 ), s );
 
-  /* return the helper object */
+  // return the helper object 
   return 1;
 }
 
 static int helper_newindex( lua_State *L );
 
-/* indexing a handle returns a helper */
+// indexing a handle returns a helper
 static int handle_newindex( lua_State *L )
 {
   const char *s;
@@ -731,10 +773,10 @@
   MYASSERT( lua_isuserdata( L, 1 ) &amp;&amp; ismetatable_type( L, 1, &quot;rpc.handle&quot; ) );
 
   if( lua_type( L, 2 ) != LUA_TSTRING )
-    my_lua_error( L, &quot;can't index handle with a non-string&quot; );
+    return luaL_error( L, &quot;can't index handle with a non-string&quot; );
   s = lua_tostring( L, 2 );
   if ( strlen( s ) &gt; NUM_FUNCNAME_CHARS - 1 )
-    my_lua_error( L, errorString( ERR_LONGFNAME ) );
+    return luaL_error( L, errorString( ERR_LONGFNAME ) );
   
   helper_create( L, ( Handle * )lua_touserdata( L, 1 ), &quot;&quot; );
   lua_replace(L, 1);
@@ -744,14 +786,14 @@
   return 0;
 }
 
-/* replays series of indexes to remote side as a string */
+// replays series of indexes to remote side as a string
 static void helper_remote_index( Helper *helper )
 {
   int i, len;
   Helper **hstack;
   Transport *tpt = &amp;helper-&gt;handle-&gt;tpt;
   
-  /* get length of name &amp; make stack of helpers */
+  // get length of name &amp; make stack of helpers
   len = strlen( helper-&gt;funcname );
   if( helper-&gt;nparents &gt; 0 ) // If helper has parents, build string to remote index
   {
@@ -759,15 +801,15 @@
     hstack[ helper-&gt;nparents - 1 ] = helper-&gt;parent;
     len += strlen( hstack[ helper-&gt;nparents - 1 ]-&gt;funcname ) + 1;
   
-    for(i = helper-&gt;nparents - 1 ; i &gt; 0 ; i -- )
+    for( i = helper-&gt;nparents - 1 ; i &gt; 0 ; i -- )
     {
       hstack[ i - 1 ] = hstack[ i ]-&gt;parent;
       len += strlen( hstack[ i ]-&gt;funcname ) + 1;
     }
 	
-	transport_write_u32( tpt, len );
+	  transport_write_u32( tpt, len );
 
-	/* replay helper key names */     
+    // replay helper key names      
     for( i = 0 ; i &lt; helper-&gt;nparents ; i ++ )
     {
      transport_write_string( tpt, hstack[ i ]-&gt;funcname, strlen( hstack[ i ]-&gt;funcname ) );
@@ -796,7 +838,7 @@
 
 }
 
-static int helper_get(lua_State *L, Helper *helper )
+static int helper_get( lua_State *L, Helper *helper )
 {
   struct exception e;
   int freturn = 0;
@@ -813,18 +855,7 @@
   }
   Catch( e )
   {
-    switch( e.type )
-    {
-        deal_with_error( L, helper-&gt;handle, errorString( e.errnum ) );
-      case nonfatal:
-        lua_pushnil( L );
-        return 1;
-        break;
-      case fatal:
-        transport_close( tpt );
-        break;
-      default: lua_assert( 0 );
-    }
+    freturn = generic_catch_handler( L, helper-&gt;handle, e );
   }
   return freturn;
 }
@@ -861,6 +892,8 @@
 // }
 
 
+
+
 static int helper_call (lua_State *L)
 {
   struct exception e;
@@ -870,11 +903,11 @@
   MYASSERT( lua_gettop( L ) &gt;= 1 );
   MYASSERT( lua_isuserdata( L, 1 ) &amp;&amp; ismetatable_type( L, 1, &quot;rpc.helper&quot; ) );
   
-  /* get helper object and its transport */
+  // get helper object and its transport 
   h = ( Helper * )lua_touserdata( L, 1 );
   tpt = &amp;h-&gt;handle-&gt;tpt;
   
-  /* capture special calls, otherwise execute normal remote call */
+  // capture special calls, otherwise execute normal remote call
   if( strcmp(&quot;get&quot;, h-&gt;funcname ) == 0 )
   {
     helper_get( L, h-&gt;parent );
@@ -887,15 +920,15 @@
       int i,n;
       u32 nret,ret_code;
 
-      /* write function name */
+      // write function name
       helper_wait_ready( tpt, RPC_CMD_CALL );
       helper_remote_index( h );
 
-      /* write number of arguments */
+      // write number of arguments
       n = lua_gettop( L );
       transport_write_u32( tpt, n - 1 );
     
-      /* write each argument */
+      // write each argument
       for( i = 2; i &lt;= n; i ++ )
         write_variable( tpt, L, i );
 
@@ -906,12 +939,12 @@
         freturn = 0;
       }*/
 
-      /* read return code */
+      // read return code
       ret_code = transport_read_u8( tpt );
 
       if ( ret_code == 0 )
       {
-        /* read return arguments */
+        // read return arguments
         nret = transport_read_u32( tpt );
       
         for ( i = 0; i &lt; ( ( int ) nret ); i ++ )
@@ -921,7 +954,7 @@
       }
       else
       {
-        /* read error and handle it */
+        // read error and handle it
         transport_read_u32( tpt ); // read code (not being used here)
         u32 len = transport_read_u32( tpt );
         char *err_string = ( char * )alloca( len + 1 );
@@ -934,23 +967,15 @@
     }
     Catch( e )
     {
-      switch( e.type )
-      {
-          deal_with_error( L, h-&gt;handle, errorString( e.errnum ) );
-        case nonfatal:
-          lua_pushnil( L );
-          return 1;
-          break;
-        case fatal:
-          transport_close( tpt );
-          break;
-        default: lua_assert( 0 );
-      }
+      freturn = generic_catch_handler( L, h-&gt;handle, e );
     }
   }
   return freturn;
 }
 
+
+
+
 static int helper_newindex( lua_State *L )
 {
   struct exception e;
@@ -961,13 +986,13 @@
   MYASSERT( lua_isuserdata( L, -3 ) &amp;&amp; ismetatable_type( L, -3, &quot;rpc.helper&quot; ) );
   MYASSERT( lua_isstring( L, -2 ) );
   
-  /* get helper object and its transport */
+  // get helper object and its transport
   h = ( Helper * )lua_touserdata( L, -3 );
   tpt = &amp;h-&gt;handle-&gt;tpt;
   
   Try
   {  
-    /* write function name */
+    // write function name
     helper_wait_ready( tpt, RPC_CMD_NEWINDEX );
     helper_remote_index( h );
 
@@ -977,7 +1002,7 @@
     ret_code = transport_read_u8( tpt );
     if( ret_code != 0 )
     {
-      /* read error and handle it */
+      // read error and handle it
       transport_read_u32( tpt ); // Read code (not using here)
       u32 len = transport_read_u32( tpt );
       char *err_string = ( char * )alloca( len + 1 );
@@ -991,18 +1016,7 @@
   }
   Catch( e )
   {
-    switch( e.type )
-    {
-        deal_with_error( L, h-&gt;handle, errorString( e.errnum ) );
-      case nonfatal:
-        lua_pushnil( L );
-        return 1;
-        break;
-      case fatal:
-        transport_close( tpt );
-        break;
-      default: lua_assert( 0 );
-    }
+    freturn = generic_catch_handler( L, h-&gt;handle, e );
   }
   return freturn;
 }
@@ -1020,8 +1034,8 @@
   return h;
 }
 
-/* indexing a handle returns a helper */
-static int helper_index (lua_State *L)
+// indexing a handle returns a helper 
+static int helper_index( lua_State *L )
 {
   const char *s;
 
@@ -1029,18 +1043,18 @@
   MYASSERT( lua_isuserdata( L, 1 ) &amp;&amp; ismetatable_type( L, 1, &quot;rpc.helper&quot; ) );
 
   if( lua_type( L, 2 ) != LUA_TSTRING )
-    my_lua_error( L, &quot;can't index handle with non-string&quot; );
+    return luaL_error( L, &quot;can't index handle with non-string&quot; );
   s = lua_tostring( L, 2 );
   if ( strlen( s ) &gt; NUM_FUNCNAME_CHARS - 1 )
-    my_lua_error( L, errorString( ERR_LONGFNAME ) );
+    return luaL_error( L, errorString( ERR_LONGFNAME ) );
   
   helper_append( L, ( Helper * )lua_touserdata( L, 1 ), s );
 
   return 1;
 }
 
-/****************************************************************************/
-/* server side handle userdata objects. */
+// **************************************************************************
+// server side handle userdata objects. 
 
 static ServerHandle *server_handle_create( lua_State *L )
 {
@@ -1066,14 +1080,14 @@
   server_handle_shutdown( h );
 }
 
-/****************************************************************************/
-/* remote function calling (client side) */
+// **************************************************************************
+// remote function calling (client side)
 
-/* rpc_connect (ip_address, port)
- *     returns a handle to the new connection, or nil if there was an error.
- *     if there is an RPC error function defined, it will be called on error.
- */
+// rpc_connect (ip_address, port)
+//      returns a handle to the new connection, or nil if there was an error.
+//      if there is an RPC error function defined, it will be called on error.
 
+
 static int rpc_connect( lua_State *L )
 {
   struct exception e;
@@ -1096,13 +1110,13 @@
 }
 
 
-/* rpc_close (handle)
- *     this closes the transport, but does not free the handle object. that's
- *     because the handle will still be in the user's name space and might be
- *     referred to again. we'll let garbage collection free the object.
- *     it's a lua runtime error to refer to a transport after it has been closed.
- */
+// rpc_close( handle )
+//     this closes the transport, but does not free the handle object. that's
+//     because the handle will still be in the user's name space and might be
+//     referred to again. we'll let garbage collection free the object.
+//     it's a lua runtime error to refer to a transport after it has been closed.
 
+
 static int rpc_close( lua_State *L )
 {
   check_num_args( L, 1 );
@@ -1123,42 +1137,39 @@
     }
   }
 
-  my_lua_error(L,&quot;arg must be handle&quot;);
-  return 0;
+  return luaL_error(L,&quot;arg must be handle&quot;);
 }
 
 
-/* rpc_async (handle,)
- *     this sets a handle's asynchronous calling mode (0/nil=off, other=on).
- *     (this is for the client only).
- */
-/* @@@ This should probably be adjusted to be in line with our new multiple command architecture */
-static int rpc_async (lua_State *L)
-{
-  Handle *handle;
-  check_num_args( L, 2 );
+// rpc_async (handle,)
+//     this sets a handle's asynchronous calling mode (0/nil=off, other=on).
+//     (this is for the client only).
+//     @@@ Before re-enabling, this should be brought up to date with multi-command architecture
 
-  if ( !lua_isuserdata( L, 1 ) || !ismetatable_type( L, 1, &quot;rpc.handle&quot; ) )
-    my_lua_error( L, &quot;first arg must be client handle&quot; );
+// static int rpc_async (lua_State *L)
+// {
+//   Handle *handle;
+//   check_num_args( L, 2 );
+// 
+//   if ( !lua_isuserdata( L, 1 ) || !ismetatable_type( L, 1, &quot;rpc.handle&quot; ) )
+//     my_lua_error( L, &quot;first arg must be client handle&quot; );
+// 
+//   handle = ( Handle * )lua_touserdata( L, 1 );
+// 
+//   if ( lua_isnil( L, 2 ) || ( lua_isnumber( L, 2 ) &amp;&amp; lua_tonumber( L, 2 ) == 0) )
+//     handle-&gt;async = 0;
+//   else
+//     handle-&gt;async = 1;
+// 
+//   return 0;
+// }
 
-  handle = ( Handle * )lua_touserdata( L, 1 );
+//****************************************************************************
+// lua remote function server
+//   read function call data and execute the function. this function empties the
+//   stack on entry and exit. This sets a custom error handler to catch errors 
+//   around the function call.
 
-  if ( lua_isnil( L, 2 ) || ( lua_isnumber( L, 2 ) &amp;&amp; lua_tonumber( L, 2 ) == 0) )
-    handle-&gt;async = 0;
-  else
-    handle-&gt;async = 1;
-
-  return 0;
-}
-
-/****************************************************************************/
-/* lua remote function server */
-
-/* read function call data and execute the function. this function empties the
- * stack on entry and exit. This sets a custom error handler to catch errors 
- * around the function call.
- */
-
 static void read_cmd_call( Transport *tpt, lua_State *L )
 {
   int i, stackpos, good_function, nargs;
@@ -1166,40 +1177,41 @@
   char *funcname;
   char *token = NULL;
 
-  /* read function name */
+  // read function name
   len = transport_read_u32( tpt ); /* function name string length */ 
   funcname = ( char * )alloca( len + 1 );
   transport_read_string( tpt, funcname, len );
   funcname[ len ] = 0;
     
-  /* get function */
-  /* @@@ perhaps handle more like variables instead of using a long string? */
-  /* @@@ also strtok is not thread safe */
+  // get function
+  // @@@ perhaps handle more like variables instead of using a long string?
+  // @@@ also strtok is not thread safe
   token = strtok( funcname, &quot;.&quot; );
   lua_getglobal( L, token );
   token = strtok( NULL, &quot;.&quot; );
   while( token != NULL )
   {
     lua_getfield( L, -1, token );
+    lua_remove( L, -2 );
     token = strtok( NULL, &quot;.&quot; );
   }
   stackpos = lua_gettop( L ) - 1;
   good_function = LUA_ISCALLABLE( L, -1 );
 
-  /* read number of arguments */
+  // read number of arguments
   nargs = transport_read_u32( tpt );
 
-  /* read in each argument, leave it on the stack */
+  // read in each argument, leave it on the stack
   for ( i = 0; i &lt; nargs; i ++ ) 
     read_variable( tpt, L );
 
-  /* call the function */
+  // call the function
   if( good_function )
   {
     int nret, error_code;
     error_code = lua_pcall( L, nargs, LUA_MULTRET, 0 );
     
-    /* handle errors */
+    // handle errors
     if ( error_code )
     {
       size_t len;
@@ -1212,7 +1224,7 @@
     }
     else
     {
-      /* pass the return values back to the caller */
+      // pass the return values back to the caller
       transport_write_u8( tpt, 0 );
       nret = lua_gettop( L ) - stackpos;
       transport_write_u32( tpt, nret );
@@ -1222,7 +1234,7 @@
   }
   else
   {
-    /* bad function */
+    // bad function
     const char *msg = &quot;undefined function: &quot;;
     int errlen = strlen( msg ) + len;
     transport_write_u8( tpt, 1 );
@@ -1231,7 +1243,7 @@
     transport_write_string( tpt, msg, strlen( msg ) );
     transport_write_string( tpt, funcname, len );
   }
-  /* empty the stack */
+  // empty the stack
   lua_settop ( L, 0 );
 }
 
@@ -1242,28 +1254,29 @@
   char *funcname;
   char *token = NULL;
 
-  /* read function name */
-  len = transport_read_u32( tpt ); /* function name string length */ 
+  // read function name
+  len = transport_read_u32( tpt ); // function name string length 
   funcname = ( char * )alloca( len + 1 );
   transport_read_string( tpt, funcname, len );
   funcname[ len ] = 0;
 
-  /* get function */
-  /* @@@ perhaps handle more like variables instead of using a long string? */
-  /* @@@ also strtok is not reentrant, strtok_r would be, if needed */
+  // get function
+  // @@@ perhaps handle more like variables instead of using a long string?
+  // @@@ also strtok is not thread safe
   token = strtok( funcname, &quot;.&quot; );
   lua_getglobal( L, token );
   token = strtok( NULL, &quot;.&quot; );
   while( token != NULL )
   {
     lua_getfield( L, -1, token );
+    lua_remove( L, -2 );
     token = strtok( NULL, &quot;.&quot; );
   }
 
-  /* return top value on stack */
+  // return top value on stack
   write_variable( tpt, L, lua_gettop( L ) );
 
-  /* empty the stack */
+  // empty the stack
   lua_settop ( L, 0 );
 }
 
@@ -1274,16 +1287,16 @@
   char *funcname;
   char *token = NULL;
 
-  /* read function name */
-  len = transport_read_u32( tpt ); /* function name string length */ 
+  // read function name
+  len = transport_read_u32( tpt ); // function name string length
   funcname = ( char * )alloca( len + 1 );
   transport_read_string( tpt, funcname, len );
   funcname[ len ] = 0;
 
-  /* get function */
-  /* @@@ perhaps handle more like variables instead of using a long string? */
-  /* @@@ also strtok is not thread safe */
-  if( strlen( funcname ) &gt; 0 ) /*  */
+  // get function
+  // @@@ perhaps handle more like variables instead of using a long string?
+  // @@@ also strtok is not thread safe
+  if( strlen( funcname ) &gt; 0 )
   {
     token = strtok( funcname, &quot;.&quot; );
     lua_getglobal( L, token );
@@ -1291,33 +1304,34 @@
     while( token != NULL )
     {
       lua_getfield( L, -1, token );
+      lua_remove( L, -2 );
       token = strtok( NULL, &quot;.&quot; );
     }
-    read_variable( tpt, L ); /* key */
-    read_variable( tpt, L ); /* value */  
-    lua_settable( L, -3 ); /* set key to value on indexed table */
+    read_variable( tpt, L ); // key
+    read_variable( tpt, L ); // value
+    lua_settable( L, -3 ); // set key to value on indexed table
   }
   else
   {
-    read_variable( tpt, L ); /* key */
-    read_variable( tpt, L ); /* value */  
+    read_variable( tpt, L ); // key
+    read_variable( tpt, L ); // value
     lua_setglobal( L, lua_tostring( L, -2 ) );
   }
-  /* Write out 0 to indicate no error and that we're done */
+  // Write out 0 to indicate no error and that we're done
   transport_write_u8( tpt, 0 );
   
-  /*if ( error_code ) // Add some error handling later
-  {
-    size_t len;
-    const char *errmsg;
-    errmsg = lua_tolstring (L, -1, &amp;len);
-    transport_write_u8( tpt, 1 );
-    transport_write_u32( tpt, error_code );
-    transport_write_u32( tpt, len );
-    transport_write_string( tpt, errmsg, len );
-  }*/
+  // if ( error_code ) // Add some error handling later
+  // {
+  //   size_t len;
+  //   const char *errmsg;
+  //   errmsg = lua_tolstring (L, -1, &amp;len);
+  //   transport_write_u8( tpt, 1 );
+  //   transport_write_u32( tpt, error_code );
+  //   transport_write_u32( tpt, len );
+  //   transport_write_string( tpt, errmsg, len );
+  // }
   
-  /* empty the stack */
+  // empty the stack
   lua_settop ( L, 0 );
 }
 
@@ -1329,10 +1343,10 @@
 
   Try
   {
-    /* make server handle */
+    // make server handle 
     handle = server_handle_create( L );
 
-    /* make listening transport */
+    // make listening transport 
     transport_open_listener( L, handle );
   }
   Catch( e )
@@ -1347,31 +1361,32 @@
 }
 
 
-/* rpc_listen (port) --&gt; server_handle */
+// rpc_listen( transport_indentifier ) --&gt; server_handle
+//    transport_identifier defines where to listen, identifier type is subject to transport implementation
 static int rpc_listen( lua_State *L )
 {
   ServerHandle *handle;
 
   handle = rpc_listen_helper( L );
   if ( handle == 0 )
-    printf( &quot;bad Handle&quot; );
+    return luaL_error( L, &quot;bad handle&quot; );
     
   return 1;
 }
 
 
-/* rpc_peek (server_handle) --&gt; 0 or 1 */
+// rpc_peek( server_handle ) --&gt; 0 or 1 
 static int rpc_peek( lua_State *L )
 {
   ServerHandle *handle;
 
   check_num_args( L, 1 );
   if ( !( lua_isuserdata( L, 1 ) &amp;&amp; ismetatable_type( L, 1, &quot;rpc.server_handle&quot; ) ) )
-    my_lua_error( L, &quot;arg must be server handle&quot; );
+    return luaL_error( L, &quot;arg must be server handle&quot; );
 
   handle = ( ServerHandle * )lua_touserdata( L, 1 );
 
-  /* if accepting transport is open, see if there is any data to read */
+  // if accepting transport is open, see if there is any data to read
   if ( transport_is_open( &amp;handle-&gt;atpt ) )
   {
     if ( transport_readable( &amp;handle-&gt;atpt ) )
@@ -1382,7 +1397,7 @@
     return 1;
   }
 
-  /* otherwise, see if there is a new connection on the listening transport */
+  // otherwise, see if there is a new connection on the listening transport
   if ( transport_is_open( &amp;handle-&gt;ltpt ) )
   {
     if ( transport_readable( &amp;handle-&gt;ltpt ) )
@@ -1404,29 +1419,29 @@
 
   Try 
   {
-    /* if accepting transport is open, read function calls */
+    // if accepting transport is open, read function calls
     if ( transport_is_open( &amp;handle-&gt;atpt ) )
     {
       Try
       {
         switch ( transport_read_u8( &amp;handle-&gt;atpt ) )
         {
-          case RPC_CMD_CALL:
+          case RPC_CMD_CALL:  // call function
             transport_write_u8( &amp;handle-&gt;atpt, RPC_READY );
             read_cmd_call( &amp;handle-&gt;atpt, L );
             break;
-          case RPC_CMD_GET:
+          case RPC_CMD_GET: // get server-side variable for client
             transport_write_u8( &amp;handle-&gt;atpt, RPC_READY );
             read_cmd_get( &amp;handle-&gt;atpt, L );
             break;
-          case RPC_CMD_CON: /*  @@@ allow client to &quot;reconnect&quot;, should support better mechanism */
+          case RPC_CMD_CON: //  allow client to renegotiate active connection
             server_negotiate( &amp;handle-&gt;atpt );
             break;
-          case RPC_CMD_NEWINDEX:
+          case RPC_CMD_NEWINDEX: // assign new variable on server
             transport_write_u8( &amp;handle-&gt;atpt, RPC_READY );
             read_cmd_newindex( &amp;handle-&gt;atpt, L );
             break;
-          default:
+          default: // complain and throw exception if unknown command
             transport_write_u8(&amp;handle-&gt;atpt, RPC_UNSUPPORTED_CMD );
             e.type = nonfatal;
             e.errnum = ERR_COMMAND;
@@ -1437,14 +1452,9 @@
       }
       Catch( e )
       {
-        /* if the client has closed the connection, close our side
-         * gracefully too.
-         */
-        transport_close( &amp;handle-&gt;atpt );
-
         switch( e.type )
         {
-          case fatal:
+          case fatal: // shutdown will initiate after throw
             Throw( e );
             
           case nonfatal:
@@ -1452,7 +1462,7 @@
             if ( handle-&gt;link_errs &gt; MAX_LINK_ERRS )
             {
               handle-&gt;link_errs = 0;
-              Throw( e );
+              Throw( e ); // remote connection will be closed
             }
             break;
             
@@ -1463,9 +1473,8 @@
     }
     else
     {
-      /* if accepting transport is not open, accept a new connection from the
-       * listening transport.
-       */
+      // if accepting transport is not open, accept a new connection from the
+      // listening transport
       transport_accept( &amp;handle-&gt;ltpt, &amp;handle-&gt;atpt );
       
       switch ( transport_read_u8( &amp;handle-&gt;atpt ) )
@@ -1473,10 +1482,10 @@
         case RPC_CMD_CON:
           server_negotiate( &amp;handle-&gt;atpt );
           break;
-        default: /* connection must be established to issue any other commands */
+        default: // connection must be established to issue any other commands
           e.type = nonfatal;
           e.errnum = ERR_COMMAND;
-          Throw( e );
+          Throw( e ); // remote connection will be closed
       }
     }
   }
@@ -1488,9 +1497,11 @@
         server_handle_shutdown( handle );
         deal_with_error( L, 0, errorString( e.errnum ) );
         break;
+        
       case nonfatal:
         transport_close( &amp;handle-&gt;atpt );
         break;
+        
       default:
         Throw( e );
     }
@@ -1498,15 +1509,14 @@
 }
 
 
-/* rpc_dispatch (server_handle) */
-
+// rpc_dispatch( server_handle )
 static int rpc_dispatch( lua_State *L )
 {
   ServerHandle *handle;
   check_num_args( L, 1 );
 
   if ( ! ( lua_isuserdata( L, 1 ) &amp;&amp; ismetatable_type( L, 1, &quot;rpc.server_handle&quot; ) ) )
-    my_lua_error( L, &quot;arg must be server handle&quot; );
+    return luaL_error( L, &quot;arg must be server handle&quot; );
 
   handle = ( ServerHandle * )lua_touserdata( L, 1 );
 
@@ -1515,16 +1525,20 @@
 }
 
 
-/* lrf_server (port) */
-
+// rpc_server( transport_identifier )
 static int rpc_server( lua_State *L )
 {
   int shref;
   ServerHandle *handle = rpc_listen_helper( L );
   
-  /* hack to anchor handle in registry */
-  /* @@@ this should be replaced when we create a system for multiple connections */
-  /* @@@   such a mechanism would likely likely create a table for multiple connections that we could service in an event loop */
+  // Anchor handle in the registry
+  //   This is needed because garbage collection can steal our handle, 
+  //   which isn't otherwise referenced
+  //
+  //   @@@ this should be replaced when we create a system for multiple 
+  //   @@@ connections. such a mechanism would likely likely create a
+  //   @@@ table for multiple connections that we could service in an event loop 
+  
   shref = luaL_ref( L, LUA_REGISTRYINDEX );
   lua_rawgeti(L, LUA_REGISTRYINDEX, shref );
   
@@ -1536,12 +1550,10 @@
   return 0;
 }
 
-/****************************************************************************/
-/* more error handling stuff */
+// **************************************************************************
+// more error handling stuff 
 
-/* rpc_on_error ([handle,] error_handler)
- */
-
+// rpc_on_error( [ handle, ] error_handler )
 static int rpc_on_error( lua_State *L )
 {
   check_num_args( L, 1 );
@@ -1556,17 +1568,17 @@
   else if ( lua_isnil( L, 1 ) )
     { ;; }
   else
-    my_lua_error( L, &quot;bad args&quot; );
+    return luaL_error( L, &quot;bad args&quot; );
 
-  /* @@@ add option for handle */
-  /* Handle *h = (Handle*) lua_touserdata (L,1); */
-  /* if (lua_isuserdata (L,1) &amp;&amp; ismetatable_type(L, 1, &quot;rpc.handle&quot;)); */
+  // @@@ add option for handle 
+  // Handle *h = (Handle*) lua_touserdata (L,1); 
+  // if (lua_isuserdata (L,1) &amp;&amp; ismetatable_type(L, 1, &quot;rpc.handle&quot;)); 
 
   return 0;
 }
 
-/****************************************************************************/
-/* register RPC functions */
+// **************************************************************************
+// register RPC functions 
 
 #ifndef LUARPC_STANDALONE
 
@@ -1602,9 +1614,9 @@
   {  LSTRKEY( &quot;listen&quot; ), LFUNCVAL( rpc_listen ) },
   {  LSTRKEY( &quot;peek&quot; ), LFUNCVAL( rpc_peek ) },
   {  LSTRKEY( &quot;dispatch&quot; ), LFUNCVAL( rpc_dispatch ) },
-  {  LSTRKEY( &quot;rpc_async&quot; ), LFUNCVAL( rpc_async ) },
+//  {  LSTRKEY( &quot;rpc_async&quot; ), LFUNCVAL( rpc_async ) },
 #if LUA_OPTIMIZE_MEMORY &gt; 0
-/*  {  LSTRKEY(&quot;mode&quot;), LSTRVAL( LUARPC_MODE ) }, */
+// {  LSTRKEY(&quot;mode&quot;), LSTRVAL( LUARPC_MODE ) }, 
 #endif // #if LUA_OPTIMIZE_MEMORY &gt; 0
   { LNILKEY, LNILVAL }
 };
@@ -1663,7 +1675,7 @@
   { &quot;listen&quot;, rpc_listen },
   { &quot;peek&quot;, rpc_peek },
   { &quot;dispatch&quot;, rpc_dispatch },
-  { &quot;rpc_async&quot;, rpc_async },
+//  { &quot;rpc_async&quot;, rpc_async },
   { NULL, NULL }
 };
 

Modified: branches/eagle_mmc/src/platform/lm3s/platform_conf.h
===================================================================
--- branches/eagle_mmc/src/platform/lm3s/platform_conf.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/platform/lm3s/platform_conf.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -12,7 +12,7 @@
 // *****************************************************************************
 // Define here what components you want for this platform
 
-//#define BUILD_XMODEM
+#define BUILD_XMODEM
 #define BUILD_SHELL
 #define BUILD_ROMFS
 #define BUILD_MMCFS
@@ -110,7 +110,6 @@
 #define VTMR_NUM_TIMERS       4
 #define VTMR_FREQ_HZ          4
 
-
 // Number of resources (0 if not available/not implemented)
 #ifdef FORLM3S9B92
   #define NUM_PIO             7
@@ -147,6 +146,9 @@
 #define ADC_TIMER_FIRST_ID    0
 #define ADC_NUM_TIMERS        NUM_TIMER  
 
+// RPC  
+#define RPC_UART_ID           CON_UART_ID
+#define RPC_TIMER_ID          CON_TIMER_ID
 // SD/MMC Filesystem Setup
 #define MMCFS_TICK_HZ     4
 #define MMCFS_TICK_MS     ( 1000 / MMCFS_TICK_HZ )

Modified: branches/eagle_mmc/src/platform/lpc24xx/platform_conf.h
===================================================================
--- branches/eagle_mmc/src/platform/lpc24xx/platform_conf.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/platform/lpc24xx/platform_conf.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -15,6 +15,7 @@
 #define BUILD_ROMFS
 #define BUILD_TERM
 #define BUILD_CON_GENERIC
+#define BUILD_LUARPC
 
 // *****************************************************************************
 // UART/Timer IDs configuration data (used in main.c)
@@ -39,6 +40,7 @@
   _ROM( AUXLIB_BIT, luaopen_bit, bit_map )\
   _ROM( AUXLIB_CPU, luaopen_cpu, cpu_map )\
   _ROM( AUXLIB_PWM, luaopen_pwm, pwm_map )\
+  _ROM( AUXLIB_LUARPC, luaopen_luarpc, rpc_map )\
   _ROM( LUA_MATHLIBNAME, luaopen_math, math_map )
 
 // *****************************************************************************
@@ -67,6 +69,10 @@
 //#define BUF_ENABLE_UART
 //#define CON_BUF_SIZE          BUF_SIZE_128
 
+// RPC  
+#define RPC_UART_ID           CON_UART_ID
+#define RPC_TIMER_ID          CON_TIMER_ID
+
 // CPU frequency (needed by the CPU module, 0 if not used)
 #define CPU_FREQUENCY         Fcclk
 

Modified: branches/eagle_mmc/src/platform/stm32/platform.c
===================================================================
--- branches/eagle_mmc/src/platform/stm32/platform.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/platform/stm32/platform.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -34,7 +34,6 @@
 // Max SysTick preload value is 16777215, for STM32F103RET6 @ 72 MHz, lowest acceptable rate would be about 5 Hz
 #define SYSTICKHZ               10  
 #define SYSTICKMS               (1000 / SYSTICKHZ)
-
 // ****************************************************************************
 // Platform initialization
 
@@ -85,7 +84,7 @@
     /* Capture error */ 
     while (1);
   }
-
+  
   cmn_platform_init();
 
   // All done
@@ -108,8 +107,6 @@
 {
   SystemInit();
   
-  RCC_PCLK1Config(RCC_HCLK_Div2);
-
   RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);
 }
 
@@ -691,7 +688,8 @@
 
 // We leave out TIM6/TIM for now, as they are dedicated
 static TIM_TypeDef * const timer[] = { TIM1, TIM2, TIM3, TIM4, TIM5 };
-#define TIM_GET_BASE_CLK( id ) ( ( id ) == 0 || ( id ) == 5 ? ( HCLK / PCLK2_DIV ) : ( HCLK / PCLK1_DIV ) )
+#define TIM_GET_PRESCALE( id ) ( ( id ) == 0 || ( id ) == 5 ? ( PCLK2_DIV ) : ( PCLK1_DIV ) )
+#define TIM_GET_BASE_CLK( id ) ( TIM_GET_PRESCALE( id ) == 1 ? ( HCLK / TIM_GET_PRESCALE( id ) ) : ( HCLK / ( TIM_GET_PRESCALE( id ) / 2 ) ) )
 #define TIM_STARTUP_CLOCK       50000
 
 static u32 timer_set_clock( unsigned id, u32 clock );
@@ -735,7 +733,7 @@
 {
   TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
   TIM_TypeDef *ptimer = timer[ id ];
-  u16 pre = TIM_GET_BASE_CLK( id ) / clock;
+  u16 pre = ( TIM_GET_BASE_CLK( id ) / clock ) - 1;
   
   TIM_TimeBaseStructure.TIM_Period = 0xFFFF;
   TIM_TimeBaseStructure.TIM_Prescaler = pre;
@@ -745,8 +743,7 @@
   TIM_TimeBaseInit( timer[ id ], &amp;TIM_TimeBaseStructure );
   TIM_Cmd( ptimer, ENABLE );
   
-  TIM_PrescalerConfig( ptimer, pre, TIM_PSCReloadMode_Immediate );
-  return TIM_GET_BASE_CLK( id ) / pre;
+  return TIM_GET_BASE_CLK( id ) / ( pre + 1 );
 }
 
 void platform_s_timer_delay( unsigned id, u32 delay_us )
@@ -861,7 +858,7 @@
   
   /* PWM Mode configuration */  
   TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1;
-  TIM_OCInitStructure.TIM_OutputState = ( PWM_TIMER_NAME-&gt;CCER &amp; ( ( u16 )1 &lt;&lt; 4*id ) ) ? TIM_OutputState_Enable : TIM_OutputState_Disable;
+  TIM_OCInitStructure.TIM_OutputState = ( PWM_TIMER_NAME-&gt;CCER &amp; ( ( u16 )1 &lt;&lt; 4 * id ) ) ? TIM_OutputState_Enable : TIM_OutputState_Disable;
   TIM_OCInitStructure.TIM_OutputNState = TIM_OutputNState_Disable;
   TIM_OCInitStructure.TIM_Pulse = ( u16 )( duty * ( PWM_TIMER_NAME-&gt;ARR + 1 ) / 100 );
   TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;
@@ -911,11 +908,11 @@
       break;
 
     case PLATFORM_PWM_OP_START:
-      PWM_TIMER_NAME-&gt;CCER |= ( ( u16 )1 &lt;&lt; 4*id );
+      PWM_TIMER_NAME-&gt;CCER |= ( ( u16 )1 &lt;&lt; 4 * id );
       break;
 
     case PLATFORM_PWM_OP_STOP:
-      PWM_TIMER_NAME-&gt;CCER &amp;= ~( ( u16 )1 &lt;&lt; 4*id );
+      PWM_TIMER_NAME-&gt;CCER &amp;= ~( ( u16 )1 &lt;&lt; 4 * id );
       break;
   }
 
@@ -1148,12 +1145,12 @@
   	period /= prescaler;
 
   	timer_base_struct.TIM_Period = period - 1;
-  	timer_base_struct.TIM_Prescaler = (2 * prescaler) - 1;
+  	timer_base_struct.TIM_Prescaler = prescaler - 1;
   	timer_base_struct.TIM_ClockDivision = TIM_CKD_DIV1;
   	timer_base_struct.TIM_CounterMode = TIM_CounterMode_Down;
   	TIM_TimeBaseInit( timer[ d-&gt;timer_id ], &amp;timer_base_struct );
     
-    frequency = 2 * ( TIM_GET_BASE_CLK( id ) / ( TIM_GetPrescaler( timer[ d-&gt;timer_id ] ) + 1 ) ) / period;
+    frequency = ( TIM_GET_BASE_CLK( id ) / ( TIM_GetPrescaler( timer[ d-&gt;timer_id ] ) + 1 ) ) / period;
     
     // Set up output compare for timer
     TIM_SelectOutputTrigger(timer[ d-&gt;timer_id ], TIM_TRGOSource_Update);

Modified: branches/eagle_mmc/src/platform/stm32/platform_conf.h
===================================================================
--- branches/eagle_mmc/src/platform/stm32/platform_conf.h	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/platform/stm32/platform_conf.h	2009-12-24 00:45:27 UTC (rev 610)
@@ -114,6 +114,10 @@
 #define ADC_TIMER_FIRST_ID    0
 #define ADC_NUM_TIMERS        4
 
+// RPC  
+#define RPC_UART_ID           CON_UART_ID
+#define RPC_TIMER_ID          CON_TIMER_ID
+#define RPC_UART_SPEED        CON_UART_SPEED
 #define MMCFS_TICK_HZ     10
 #define MMCFS_TICK_MS     ( 1000 / MMCFS_TICK_HZ )
 

Modified: branches/eagle_mmc/src/platform/stm32/startup_stm32f10x_hd.s
===================================================================
--- branches/eagle_mmc/src/platform/stm32/startup_stm32f10x_hd.s	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/platform/stm32/startup_stm32f10x_hd.s	2009-12-24 00:45:27 UTC (rev 610)
@@ -64,6 +64,7 @@
     .section	.text.Reset_Handler
 	.weak	Reset_Handler
 	.type	Reset_Handler, %function
+  .thumb_func
 Reset_Handler:	
 
 /* FSMC Bank1 NOR/SRAM3 is used for the STM3210E-EVAL, if another Bank is 

Modified: branches/eagle_mmc/src/platform/stm32/stm32f10x_it.c
===================================================================
--- branches/eagle_mmc/src/platform/stm32/stm32f10x_it.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/platform/stm32/stm32f10x_it.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -48,11 +48,13 @@
 {
 }
 
+#if 0
 int fputc(int ch, FILE *f)
 {
    platform_uart_send(0, ch);
    return ch;
 }
+#endif
 
 void hard_fault_handler_c(unsigned int * hardfault_args)
 {
@@ -188,7 +190,6 @@
 }
 
 
-
 /******************************************************************************/
 /*                 STM32F10x Peripherals Interrupt Handlers                   */
 /*  Add here the Interrupt Handler for the used peripheral(s) (PPP), for the  */
@@ -199,5 +200,4 @@
 extern void DMA1_Channel1_IRQHandler(void);
 extern void USART1_IRQHandler(void);
 extern void SysTick_Handler(void);
-
 /******************* (C) COPYRIGHT 2009 STMicroelectronics *****END OF FILE****/

Modified: branches/eagle_mmc/src/shell.c
===================================================================
--- branches/eagle_mmc/src/shell.c	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/src/shell.c	2009-12-24 00:45:27 UTC (rev 610)
@@ -56,12 +56,13 @@
 {
   args = args;
   printf( &quot;Shell commands:\n&quot; );
-  printf( &quot;  exit       - exit from this shell\n&quot; );
-  printf( &quot;  help       - print this help\n&quot; );
-  printf( &quot;  ls or dir  - lists ROMFS files and sizes\n&quot; );
-  printf( &quot;  lua [args] - run Lua with the given arguments\n&quot; );
-  printf( &quot;  recv       - receive a file (XMODEM) and execute it\n&quot; );
-  printf( &quot;  ver        - print eLua version\n&quot; );
+  printf( &quot;  exit        - exit from this shell\n&quot; );
+  printf( &quot;  help        - print this help\n&quot; );
+  printf( &quot;  ls or dir   - lists ROMFS files and sizes\n&quot; );
+  printf( &quot;  cat or type - lists file contents\n&quot; );
+  printf( &quot;  lua [args]  - run Lua with the given arguments\n&quot; );
+  printf( &quot;  recv        - receive a file (XMODEM) and execute it\n&quot; );
+  printf( &quot;  ver         - print eLua version\n&quot; );
 }
 
 // 'lua' handler
@@ -222,6 +223,39 @@
 #endif
 }
 
+
+// 'cat' and 'type' handler
+static void shell_cat( char *args )
+{
+  FILE *fp;
+  int c;
+  char *p;
+
+// *args has an appended space. Replace it with the string terminator.
+//  *(strchr( args, ' ' )) = 0;
+  if ( *args )
+    while ( *args ) {
+      p = strchr( args, ' ' );
+      *p = 0;
+      if( ( fp = fopen( args , &quot;rb&quot; ) ) != NULL ) {
+        c = fgetc( fp );
+        while( c != EOF ) {
+          printf(&quot;%c&quot;, (char) c );  
+          c = fgetc( fp );
+        }
+        fclose ( fp );
+      }
+      else
+        printf( &quot;File %s not found\n&quot;, args );
+      args = p + 1;
+    }      
+  else
+      printf( &quot;Usage: cat (or type) &lt;filename1&gt; [&lt;filename2&gt; ...]\n&quot; );
+}    
+
+
+
+
 // Insert shell commands here
 static const SHELL_COMMAND shell_commands[] =
 {
@@ -232,6 +266,8 @@
   { &quot;exit&quot;, NULL },
   { &quot;ls&quot;, shell_ls },
   { &quot;dir&quot;, shell_ls },
+  { &quot;cat&quot;, shell_cat },
+  { &quot;type&quot;, shell_cat },
   { NULL, NULL }
 };
 

Modified: branches/eagle_mmc/test/test-rpc.lua
===================================================================
--- branches/eagle_mmc/test/test-rpc.lua	2009-12-24 00:44:59 UTC (rev 609)
+++ branches/eagle_mmc/test/test-rpc.lua	2009-12-24 00:45:27 UTC (rev 610)
@@ -6,7 +6,8 @@
 
 --slave,err = rpc.connect (&quot;/dev/tty.usbserial-FTE3HV7L&quot;);
 -- slave,err = rpc.connect (&quot;/dev/tty.usbserial-ftCYPMYJ&quot;);
-slave,err = rpc.connect(&quot;/dev/tty.usbserial-04110857B&quot;)
+-- slave,err = rpc.connect(&quot;/dev/tty.usbserial-04110857B&quot;)
+slave,err = rpc.connect(&quot;/dev/tty.usbserial-A9005fG0&quot;)
 --slave,err = rpc.connect (&quot;/dev/ttys0&quot;);
 
 print(&quot;Platform: &quot; .. slave.pd.platform())
@@ -36,16 +37,18 @@
 -- check that we can get entry on remote table
 assert(test_local.sval == slave.test:get().sval, &quot;table field not equivalent&quot;)
 
-adc = slave.adc
+print(&quot;Memory Used: &quot; .. slave.collectgarbage(&quot;count&quot;) .. &quot; kB&quot;)
 
-adc.setblocking(0,1)
-adc.setclock(0, 64 ,2)
-
-adc.sample(0,128)
--- print(slave.collectgarbage(&quot;count&quot;))
-for i=1,128 do
-	retsamp = adc.getsample(0)
-	if not (retsamp == nil) then
-		print(retsamp)
-	end
-end
+-- adc = slave.adc
+-- 
+-- adc.setblocking(0,1)
+-- adc.setclock(0, 64 ,2)
+-- 
+-- adc.sample(0,128)
+-- -- print(slave.collectgarbage(&quot;count&quot;))
+-- for i=1,128 do
+--  retsamp = adc.getsample(0)
+--  if not (retsamp == nil) then
+--    print(retsamp)
+--  end
+-- end


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000565.html">[Elua-svn] r609 - branches/eagle_mmc/src/platform/lm3s
</A></li>
	<LI>Next message: <A HREF="000567.html">[Elua-svn] r611 - in branches/pre0.7: . inc romfs src src/fatfs	src/lua src/platform/lm3s src/platform/stm32
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#566">[ date ]</a>
              <a href="thread.html#566">[ thread ]</a>
              <a href="subject.html#566">[ subject ]</a>
              <a href="author.html#566">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-svn">More information about the eLua-svn
mailing list</a><br>
</body></html>
