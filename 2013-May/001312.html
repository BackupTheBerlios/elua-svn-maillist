<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [eLua-svn] [elua/elua] 3f08ca: Rework uart stdin CRLF handling not to use a timer
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/elua-svn/2013-May/index.html" >
   <LINK REL="made" HREF="mailto:elua-svn%40lists.berlios.de?Subject=Re%3A%20%5BeLua-svn%5D%20%5Belua/elua%5D%203f08ca%3A%20Rework%20uart%20stdin%20CRLF%20handling%20not%0A%20to%20use%20a%20timer&In-Reply-To=%3C5190fc8cba373_1189f35de04907d%40hookshot-fe3-pe1-prd.aws.github.net.mail%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001311.html">
   <LINK REL="Next"  HREF="001313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[eLua-svn] [elua/elua] 3f08ca: Rework uart stdin CRLF handling not to use a timer</H1>
    <B>GitHub</B> 
    <A HREF="mailto:elua-svn%40lists.berlios.de?Subject=Re%3A%20%5BeLua-svn%5D%20%5Belua/elua%5D%203f08ca%3A%20Rework%20uart%20stdin%20CRLF%20handling%20not%0A%20to%20use%20a%20timer&In-Reply-To=%3C5190fc8cba373_1189f35de04907d%40hookshot-fe3-pe1-prd.aws.github.net.mail%3E"
       TITLE="[eLua-svn] [elua/elua] 3f08ca: Rework uart stdin CRLF handling not to use a timer">noreply at github.com
       </A><BR>
    <I>Mon May 13 16:45:32 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="001311.html">[eLua-svn] [elua/elua] 63fbfb: Make table of available RAM regions	static
</A></li>
        <LI>Next message: <A HREF="001313.html">[eLua-svn] [elua/elua] 9a5206: Mizar32: Make inclusion of term.*() Lua module dep...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1312">[ date ]</a>
              <a href="thread.html#1312">[ thread ]</a>
              <a href="subject.html#1312">[ subject ]</a>
              <a href="author.html#1312">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Branch: refs/heads/Mizar32-v0.9
  Home:   <A HREF="https://github.com/elua/elua">https://github.com/elua/elua</A>
  Commit: 3f08ca9b6473c4e41c63534edbb7dabc0c37355f
      <A HREF="https://github.com/elua/elua/commit/3f08ca9b6473c4e41c63534edbb7dabc0c37355f">https://github.com/elua/elua/commit/3f08ca9b6473c4e41c63534edbb7dabc0c37355f</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/newlib/genstd.c

  Log Message:
  -----------
  Rework uart stdin CRLF handling not to use a timer

Saving 100 bytes of code


  Commit: 7e5196109a1ce3cfc2cf1579f1f649e18dcc199a
      <A HREF="https://github.com/elua/elua/commit/7e5196109a1ce3cfc2cf1579f1f649e18dcc199a">https://github.com/elua/elua/commit/7e5196109a1ce3cfc2cf1579f1f649e18dcc199a</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/common.c

  Log Message:
  -----------
  Add custom strerror()

Adds a homebrew strerror() function that only decodes the errno
values that eLua generates, saving 2288 bytes of string table.


  Commit: ad529b186af4c41bd02c4b7476d1d1c75e13a499
      <A HREF="https://github.com/elua/elua/commit/ad529b186af4c41bd02c4b7476d1d1c75e13a499">https://github.com/elua/elua/commit/ad529b186af4c41bd02c4b7476d1d1c75e13a499</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/lua/lauxlib.c
    M src/lua/lbaselib.c
    M src/lua/ldo.c
    M src/lua/loadlib.c
    M src/lua/lstrlib.c
    M src/lua/ltablib.c
    M src/lua/lua.c

  Log Message:
  -----------
  Simplify Lua error strings

Reduce the size of Lua error messages and make more of them have the
same text so that there is only one copy of them in the executable
saving 778 bytes of text.


  Commit: fdd5fa0f442f13ff36d5ee2ed8f61c7bd779dc7d
      <A HREF="https://github.com/elua/elua/commit/fdd5fa0f442f13ff36d5ee2ed8f61c7bd779dc7d">https://github.com/elua/elua/commit/fdd5fa0f442f13ff36d5ee2ed8f61c7bd779dc7d</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/newlib/genstd.c

  Log Message:
  -----------
  If !BUILD_SHELL, don't quilt Lua on Ctrl-Z

If there's no eLua sell to return to, quitting Lua on ^Z makes no sense.


  Commit: d83aab4a62af06a8ba96a9b363355c5b1836f959
      <A HREF="https://github.com/elua/elua/commit/d83aab4a62af06a8ba96a9b363355c5b1836f959">https://github.com/elua/elua/commit/d83aab4a62af06a8ba96a9b363355c5b1836f959</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/lua/ldblib.c
    M src/lua/linit.c
    M src/lua/lua.c
    M src/lua/luaconf.h

  Log Message:
  -----------
  Add LUA_REMOVE_DEBUG define in luaconf.h to remove the debug library


  Commit: d9fa0063b64863e96df57d50d51be841dac45337
      <A HREF="https://github.com/elua/elua/commit/d9fa0063b64863e96df57d50d51be841dac45337">https://github.com/elua/elua/commit/d9fa0063b64863e96df57d50d51be841dac45337</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/elua_int.c
    M src/lua/ldblib.c
    M src/lua/ldebug.c
    M src/lua/ldebug.h
    M src/lua/ldo.c
    M src/lua/lgc.c
    M src/lua/lstate.c
    M src/lua/lstate.h
    M src/lua/lua.c
    M src/lua/lua.h
    M src/lua/luaconf.h
    M src/lua/lvm.c

  Log Message:
  -----------
  Add a luaconf.h define LUA_REMOVE_HOOKS to remove the hooks mechanism


  Commit: fcaf4098df7b254347c1015615e0f7045c838acc
      <A HREF="https://github.com/elua/elua/commit/fcaf4098df7b254347c1015615e0f7045c838acc">https://github.com/elua/elua/commit/fcaf4098df7b254347c1015615e0f7045c838acc</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-08 (Wed, 08 May 2013)

  Changed paths:
    M src/lua/loadlib.c
    M src/lua/lua.c
    M src/lua/luaconf.h

  Log Message:
  -----------
  Add a luaconf.h define LUA_REMOVE_GETENV to remove all calls to getenv()

Allow removal of all calls to getenv() since embedded platforms don't
usually have an environment to query.


  Commit: 1fa67686d0949fd47e8de0d8f26f1f18eb87b753
      <A HREF="https://github.com/elua/elua/commit/1fa67686d0949fd47e8de0d8f26f1f18eb87b753">https://github.com/elua/elua/commit/1fa67686d0949fd47e8de0d8f26f1f18eb87b753</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/lua/lua.c
    M src/lua/luaconf.h

  Log Message:
  -----------
  Add luaconf.h define LUA_REMOVE_SIGNAL to removes all calls to signal()


  Commit: e3196ffe96be16a7846392aada0763655d104bb2
      <A HREF="https://github.com/elua/elua/commit/e3196ffe96be16a7846392aada0763655d104bb2">https://github.com/elua/elua/commit/e3196ffe96be16a7846392aada0763655d104bb2</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/lua/lapi.c
    M src/lua/ldo.c
    M src/lua/ldump.c
    M src/lua/lstrlib.c
    M src/lua/luaconf.h
    M src/lua/lundump.c
    M src/lua/lundump.h
    M src/main.c

  Log Message:
  -----------
  Add luaconf.h LUA_REMOVE_DUMP and LUA_REMOVE_UNDUMP defines

Defining these remove the dump and undump mechanisms respectively
from the interpreter.  &quot;dump&quot; is always used needed when building the
Lua cross-compiler, undump is needed to load compiled bytecode.


  Commit: b9b98c9131cb1f724c39a5e9b6cafaed9268708e
      <A HREF="https://github.com/elua/elua/commit/b9b98c9131cb1f724c39a5e9b6cafaed9268708e">https://github.com/elua/elua/commit/b9b98c9131cb1f724c39a5e9b6cafaed9268708e</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/lua/lbaselib.c
    M src/lua/luaconf.h

  Log Message:
  -----------
  Add luaconf.h LUA_REMOVE_COLLECTGARBAGE to drop collectgarbage and gcinfo

For systems with a lack of program space


  Commit: 0341751f11afa35e346700da817b58b15eed4e3d
      <A HREF="https://github.com/elua/elua/commit/0341751f11afa35e346700da817b58b15eed4e3d">https://github.com/elua/elua/commit/0341751f11afa35e346700da817b58b15eed4e3d</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/lua/lapi.c
    M src/lua/lauxlib.c
    M src/lua/lbaselib.c
    M src/lua/ldo.c
    M src/lua/legc.c
    M src/lua/legc.h
    M src/lua/lfunc.c
    M src/lua/lgc.c
    M src/lua/lgc.h
    M src/lua/lobject.h
    M src/lua/lparser.c
    M src/lua/lstate.c
    M src/lua/lstate.h
    M src/lua/lstring.c
    M src/lua/ltable.c
    M src/lua/lua.c
    M src/lua/lua.h
    M src/lua/luaconf.h
    M src/lua/lvm.c
    M src/lua/lzio.h
    M src/modules/elua.c

  Log Message:
  -----------
  Make inclusion of EGC conditional on LUA_EGC in luaconf.h


  Commit: b7ad399514924a57c30c0b7d9d8628661db92325
      <A HREF="https://github.com/elua/elua/commit/b7ad399514924a57c30c0b7d9d8628661db92325">https://github.com/elua/elua/commit/b7ad399514924a57c30c0b7d9d8628661db92325</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M SConstruct
    M build_elua.lua
    M inc/newlib/devman.h
    M src/lua/lapi.c
    M src/lua/lauxlib.c
    M src/lua/lbaselib.c
    M src/lua/lfunc.h
    M src/lua/lgc.h
    M src/lua/lobject.h
    M src/lua/lrotable.c
    M src/lua/lstring.c
    M src/lua/lstring.h
    M src/lua/lua.h
    M src/lua/lundump.c
    M src/lua/lzio.c
    M src/lua/lzio.h
    M src/mmcfs.c
    M src/newlib/devman.c
    M src/newlib/genstd.c
    M src/newlib/stdtcp.c
    M src/remotefs/elua_rfs.c
    M src/romfs.c
    M src/semifs.c

  Log Message:
  -----------
  Make read-only string patch conditional on -DLUA_ROSTRINGS

This makes the read-only strings and function patch (commit d54659b5)
a compile-time option, depending whether LUA_ROSTRINGS is defined.

Use scons/build_elua.lua rostrings=0 to remove it, saving 916 to 1044
bytes of code on AVR32, depending on the config.

Conflicts:

	inc/newlib/devman.h
	src/mmcfs.c
	src/newlib/devman.c
	src/newlib/genstd.c
	src/romfs.c
	src/semifs.c


  Commit: 624be739a8a2f0743176b1e38e3bf6838ee31b04
      <A HREF="https://github.com/elua/elua/commit/624be739a8a2f0743176b1e38e3bf6838ee31b04">https://github.com/elua/elua/commit/624be739a8a2f0743176b1e38e3bf6838ee31b04</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M inc/newlib/devman.h
    M src/mmcfs.c
    M src/newlib/devman.c
    M src/newlib/genstd.c
    M src/newlib/stdtcp.c
    M src/newlib/stubs.c
    M src/remotefs/elua_rfs.c
    M src/romfs.c
    M src/semifs.c
    M src/shell/shell_ls.c

  Log Message:
  -----------
  Include code for directory operations only when BUILD_SHELL is defined

Only the eLua shell uses directory oriented file operations so this drops them
from struct DM_DEVICE unless BUILD_SHELL is defined (via define DM_DIROPS)
saving 2308 byts of code when the shell is not in use.


  Commit: d2e9679ab2aaf79650a8803b919f91b84b5381de
      <A HREF="https://github.com/elua/elua/commit/d2e9679ab2aaf79650a8803b919f91b84b5381de">https://github.com/elua/elua/commit/d2e9679ab2aaf79650a8803b919f91b84b5381de</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/common.c
    M src/common_tmr.c
    M src/modules/auxmods.h
    M src/modules/tmr.c
    M src/modules/uart.c

  Log Message:
  -----------
  Check for availability of systimer at compile time not run time

Saving 316 bytes of code


  Commit: 1de3fcae4d06f0da9f068d983a1cd7c6505eec44
      <A HREF="https://github.com/elua/elua/commit/1de3fcae4d06f0da9f068d983a1cd7c6505eec44">https://github.com/elua/elua/commit/1de3fcae4d06f0da9f068d983a1cd7c6505eec44</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/main.c
    M src/mmcfs.c
    M src/remotefs/elua_rfs.c
    M src/romfs.c
    M src/semifs.c

  Log Message:
  -----------
  Drop null device initializations

Remove pointless calls to foo_init() { dm_register(NULL,NULL,NULL) };
when BUILD_FOO is not defined, saving a few dozen bytes of code.


  Commit: 9a0b89225b6153efca250cafe95c867972b79ccc
      <A HREF="https://github.com/elua/elua/commit/9a0b89225b6153efca250cafe95c867972b79ccc">https://github.com/elua/elua/commit/9a0b89225b6153efca250cafe95c867972b79ccc</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M src/modules/uart.c

  Log Message:
  -----------
  Improve sloppy coding in uart.c

Recode cascaded ifs as switch, allowing the optimizer to save 20 bytes.


  Commit: 2b7a83219aaf5c797ac4ec2fdd8a4dc7818c546d
      <A HREF="https://github.com/elua/elua/commit/2b7a83219aaf5c797ac4ec2fdd8a4dc7818c546d">https://github.com/elua/elua/commit/2b7a83219aaf5c797ac4ec2fdd8a4dc7818c546d</A>
  Author: Martin Guy &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/elua-svn">martinwguy at gmail.com</A>&gt;
  Date:   2013-05-13 (Mon, 13 May 2013)

  Changed paths:
    M README.asciidoc
    M SConstruct
    M build_elua.lua
    M src/lua/luaconf.h
    M src/platform/avr32/MIZAR32/mizar32_conf.h

  Log Message:
  -----------
  Config for Mizar32 models


Compare: <A HREF="https://github.com/elua/elua/compare/3f08ca9b6473^...2b7a83219aaf">https://github.com/elua/elua/compare/3f08ca9b6473^...2b7a83219aaf</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001311.html">[eLua-svn] [elua/elua] 63fbfb: Make table of available RAM regions	static
</A></li>
	<LI>Next message: <A HREF="001313.html">[eLua-svn] [elua/elua] 9a5206: Mizar32: Make inclusion of term.*() Lua module dep...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1312">[ date ]</a>
              <a href="thread.html#1312">[ thread ]</a>
              <a href="subject.html#1312">[ subject ]</a>
              <a href="author.html#1312">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/elua-svn">More information about the eLua-svn
mailing list</a><br>
</body></html>
